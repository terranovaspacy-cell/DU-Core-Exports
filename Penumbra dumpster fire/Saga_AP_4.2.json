{"slots":{"-3":{"name":"library","type":{"methods":[],"events":[]}},"-2":{"name":"system","type":{"methods":[],"events":[]}},"-1":{"name":"unit","type":{"methods":[],"events":[]}},"0":{"name":"slot1","type":{"methods":[],"events":[]}},"1":{"name":"slot2","type":{"methods":[],"events":[]}},"2":{"name":"slot3","type":{"methods":[],"events":[]}},"3":{"name":"slot4","type":{"methods":[],"events":[]}},"4":{"name":"slot5","type":{"methods":[],"events":[]}},"5":{"name":"slot6","type":{"methods":[],"events":[]}},"6":{"name":"slot7","type":{"methods":[],"events":[]}},"7":{"name":"slot8","type":{"methods":[],"events":[]}},"8":{"name":"slot9","type":{"methods":[],"events":[]}},"9":{"name":"slot10","type":{"methods":[],"events":[]}},"10":{"name":"slot11","type":{"methods":[],"events":[]}},"11":{"name":"slot21","type":{"methods":[],"events":[]}}},"handlers":[{"code":"json={Q=\"0.1.2\"}local BN\nlocal XC={[\"\\\\\"]=\"\\\\\",[\"\\\"\"]=\"\\\"\",[\"\\b\"]=\"b\",[\"\\f\"]=\"f\",[\"\\n\"]=\"n\",[\"\\r\"]=\"r\",[\"\\t\"]=\"t\"}local ZX={[\"/\"]=\"/\"}for rt,ty in pairs(XC)do ZX[ty]=rt end\nlocal function HJ(rt)\nreturn\"\\\\\"..(XC[rt]or\nstring.format(\"u%04x\",rt:byte()))end\nlocal function SD(rt)return\"null\"end\nlocal function FG(ty,rt)local yu={}rt=\nrt or{}if rt[ty]then Q(\"circular reference\")end\nrt[ty]=true\nif rawget(ty,1)~=nil or next(ty)==nil then local ui=0\nfor op in pairs(ty)do\nif\nW(op)~=\"number\"then Q(\"invalid table: mixed or invalid key types\")end\nui=ui+1 end\nif ui~=#ty then\nQ(\"invalid table: sparse array\")end\nfor op,pl in ipairs(ty)do E.W(yu,BN(pl,rt))end\nrt[ty]=nil\nreturn\"[\"..E.E(yu,\",\")..\"]\"else\nfor op,ui in pairs(ty)do\nif\nW(op)~=\"string\"then Q(\"invalid table: mixed or invalid key types\")end\nE.W(yu,BN(op,rt)..\":\"..BN(ui,rt))end\nrt[ty]=nil\nreturn\"{\"..E.E(yu,\",\")..\"}\"end end\nlocal function PA(rt)\nreturn'\"'..rt:gsub('[%z\\1-\\31\\\\\"]',HJ)..'\"'end\nlocal function AS(rt)if\nrt~=rt or rt<=-R.R or rt>=R.R then\nQ(\"unexpected number value '\"..T(rt)..\"'\")end\nreturn string.format(\"%.14g\",rt)end\nlocal TY={[\"nil\"]=SD,[\"table\"]=FG,[\"string\"]=PA,[\"number\"]=AS,[\"boolean\"]=_G['tostring']}\nBN=function(ty,rt)local yu=W(ty)local ui=TY[yu]\nif ui then if Y%1000 ==0 then end\nY=Y+1\nreturn ui(ty,rt)end\nQ(\"unexpected type '\"..yu..\"'\")end\nfunction json.encode(rt)Y=1\nreturn(BN(rt))end\nlocal NM\nlocal function VB(...)local rt={}for ty=1,select(\"#\",...)do\nrt[select(ty,...)]=true end\nreturn rt end\nlocal Mq=VB(\" \",\"\\t\",\"\\r\",\"\\n\")\nlocal LZ=VB(\" \",\"\\t\",\"\\r\",\"\\n\",\"]\",\"}\",\",\")local YU=VB(\"\\\\\",\"/\",'\"',\"b\",\"f\",\"n\",\"r\",\"t\",\"u\")\nlocal JK=VB(\"true\",\"false\",\"null\")local OP={[\"true\"]=true,[\"false\"]=false,[\"null\"]=nil}\nlocal function qw(ui,yu,ty,rt)local op=2000*R.T(U/2000)if U<op and yu>=op then end\nU=yu\nfor pl=yu,#ui do if\nty[ui:sub(pl,pl)]~=rt then return pl end end\nreturn\n#ui+1 end\nlocal function er(rt,ty,yu)local ui=1\nlocal op=1\nfor pl=1,ty-1 do op=op+1\nif rt:sub(pl,pl)==\"\\n\"then ui=ui+1\nop=1 end end\nQ(string.format(\"%s at line %d col %d\",yu,ui,op))end\nlocal function KL(rt)local ty=R.Y\nif rt<=0x7f then return string.char(rt)elseif rt<=0x7ff then return string.char(ty(rt/64)+192,\nrt%64+128)elseif rt<=0xffff then return\nstring.char(\nty(rt/4096)+224,ty(rt%4096/64)+128,rt%64+128)elseif rt<=0x10ffff then\nreturn string.char(ty(rt/262144)+240,ty(\nrt%262144/4096)+128,ty(rt%4096/64)+128,\nrt%64+128)end\nQ(string.format(\"invalid unicode codepoint '%x'\",rt))end\nlocal function UI(rt)local n1=I(rt:sub(1,4),16)local n2=I(rt:sub(7,10),16)\nif n2 then return\nKL(\n(n1-0xd800)*0x400+ (n2-0xdc00)+0x10000)else return KL(n1)end end\nlocal function GH(ty,rt)local ui=\"\"local op=rt+1\nlocal yu=op\nwhile op<=#ty do local pl=ty:byte(op)\nif pl<32 then\ner(ty,op,\"control character in string\")elseif pl==92 then ui=ui..ty:sub(yu,op-1)op=op+1\nlocal lk=ty:sub(op,op)\nif\nlk==\"u\"then\nlocal kj=ty:match(\"^[dD][89aAbB]%x%x\\\\u%x%x%x%x\",op+1)or\nty:match(\"^%x%x%x%x\",op+1)or\ner(ty,op-1,\"invalid unicode escape in string\")ui=ui..UI(kj)op=op+#kj else if not YU[lk]then\ner(ty,op-1,\"invalid escape char '\"..lk..\"' in string\")end\nui=ui..ZX[lk]end\nyu=op+1 elseif pl==34 then ui=ui..ty:sub(yu,op-1)return ui,op+1 end\nop=op+1 end\ner(ty,rt,\"expected closing quote for string\")end\nlocal function we(rt,ty)local yu=qw(rt,ty,LZ)local ui=rt:sub(ty,yu-1)local op=I(ui)\nif not op then er(rt,ty,\n\"invalid number '\"..ui..\"'\")end\nreturn op,yu end\nlocal function CV(rt,ty)local yu=qw(rt,ty,LZ)local ui=rt:sub(ty,yu-1)\nif not JK[ui]then er(rt,ty,\"invalid literal '\"..ui..\"'\")end\nreturn OP[ui],yu end\nlocal function DF(rt,ty)local yu={}local ui=1\nty=ty+1\nwhile 1 do local op\nty=qw(rt,ty,Mq,true)if rt:sub(ty,ty)==\"]\"then ty=ty+\n1\nbreak end\nop,ty=NM(rt,ty)yu[ui]=op\nui=ui+1\nty=qw(rt,ty,Mq,true)local pl=rt:sub(ty,ty)ty=ty+1\nif pl==\"]\"then break end\nif pl~=\",\"then\ner(rt,ty,\"expected ']' or ','\")end end\nreturn yu,ty end\nlocal function IO(rt,ty)local yu={}ty=ty+1\nwhile 1 do local ui,op\nty=qw(rt,ty,Mq,true)if rt:sub(ty,ty)==\"}\"then\nty=ty+1\nbreak end\nif rt:sub(ty,ty)~='\"'then\ner(rt,ty,\"expected string for key\")end\nui,ty=NM(rt,ty)ty=qw(rt,ty,Mq,true)\nif\nrt:sub(ty,ty)~=\":\"then er(rt,ty,\"expected ':' after key\")end\nty=qw(rt,ty+1,Mq,true)op,ty=NM(rt,ty)yu[ui]=op\nty=qw(rt,ty,Mq,true)local pl=rt:sub(ty,ty)ty=ty+1\nif pl==\"}\"then break end\nif pl~=\",\"then\ner(rt,ty,\"expected '}' or ','\")end end\nreturn yu,ty end\nlocal RT={['\"']=GH,[\"0\"]=we,[\"1\"]=we,[\"2\"]=we,[\"3\"]=we,[\"4\"]=we,[\"5\"]=we,[\"6\"]=we,[\"7\"]=we,[\"8\"]=we,[\"9\"]=we,[\"-\"]=we,[\"t\"]=CV,[\"f\"]=CV,[\"n\"]=CV,[\"[\"]=DF,[\"{\"]=IO}function Q(rt)O(rt)end\nNM=function(rt,ty)local yu=rt:sub(ty,ty)local ui=RT[yu]\nif ui then return ui(rt,ty)end\ner(rt,ty,\"unexpected character '\"..yu..\"'\")end\nfunction json.decode(rt)U=0\nif W(rt)~=\"string\"then\nQ(\"expected argument of type string, got \"..W(rt))end\nlocal ty,yu=NM(rt,qw(rt,1,Mq,true))yu=qw(rt,yu,Mq,true)\nif yu<=#rt then er(rt,yu,\"trailing garbage\")end\nreturn ty end\nreturn json","filter":{"args":[],"signature":"onStart()","slotKey":"-3"},"key":"1"},{"code":"\nfunction P()I=_G['tonumber']T=_G['tostring']W=_G['type']\nE=_G['table']E.E=E['concat']E.W=E['insert']E.U=E['remove']E.I=E['sort']\nR=_G['math']R.O=R['max']R.P=R['min']R.A=R['abs']R.S=R['sin']R.D=R['cos']\nR.F=R['tan']R.GH=R['asin']R.J=R['acos']R.K=R['atan']R.L=R['atan2']\nR.T=R['ceil']R.Y=R['floor']R.Z=R['exp']R.X=R['fmod']R.C=R['deg']\nR.V=R['rad']R.R=R['huge']R.B=R['log']R.N=R['pi']R.M=R['pow']\nR.q=R['random']R.w=R['sqrt']A=_G['utils']A.e=A['round']A.r=A['sign']\nA.t=A['clamp']A.yu=A['smoothstep']A.i=A['map']if S==nil then S={}\nS.o=_G['constants']['epsilon']S.pl=_G['constants']['rad2deg']\nS.k=_G['constants']['deg2rad']end\nD=_G['axisCommandId']D.j=D['longitudinal']D.h=D['lateral']D.g=D['vertical']\nF='axisCommands'G=_G['axisCommandType']G.f=G['byTargetSpeed']\nG.d=G['byThrottle']H.sa=H['getWorldPosition']H.zx=H['isSeated']\nH.cv=H['isFrozen']H.bn=H['freeze']H.m=H['getWorldVelocity']J._=J['print']\nJ.QQ=J['playSound']J.WQ=J['stopSound']J.EQ=J['isPlayingSound']\nJ.RQ=J['showHelper']J.TQ=J['createWidget']J.YQ=J['createWidgetPanel']\nJ.UQ=J['createData']J.IQ=J['updateData']J.OQ=J['addDataToWidget']\nJ.PQ=J['removeDataFromWidget']J.AQ=J['destroyWidget']J.SQ=J['destroyWidgetPanel']\nJ.DQ=J['getControlDeviceForwardInput']J.FQ=J['getControlDeviceYawInput']\nJ.GQ=J['getControlDeviceLeftRightInput']J.HQ=J['getArkTime']J.JQ=J['getActionKeyName']\nJ.KQ=J['getMouseWheel']J.LQ=J['getMouseDeltaX']J.ZQ=J['getMouseDeltaY']\nJ.XQ=J['getMousePosX']J.CQ=J['getMousePosY']J.VQ=J['getScreenWidth']\nJ.BQ=J['getScreenHeight']J.NQ=J['getThrottleInputFromMouseWheel']\nJ.MQ=J['showScreen']J.qQ=J['setScreen']J.wQ=J['lockView']J.bn=J['freeze']\nJ.eQ=J['setWaypoint']J.rQ=J['getCameraWorldForward']\nK.tQ=K['getPointOnScreen']L=_G['Navigator']L.yQ=L['toggleBoosters']\nL.uQ=L['update']L.iQ=L['setEngineTorqueCommand']\nL.oQ=L['setEngineForceCommand']L.pQ=L['setBoosterCommand']L.lQ=Z\nZ.kQ=Z['isRemoteControlled']Z.jQ=Z['isAnyLandingGearExtended']\nZ.hQ=Z['deployLandingGears']Z.gQ=Z['retractLandingGears']\nZ.fQ=Z['isAnyHeadlightSwitchedOn']Z.dQ=Z['switchOnHeadlights']\nZ.sQ=Z['switchOffHeadlights']Z.aQ=Z['getControlMode']\nZ.zQ=Z['cancelCurrentControlMasterMode']Z.xQ=Z['getAtmosphereDensity']\nZ.getWidgetData=Z['getWidgetData']Z.cQ=Z['setEngineThrust']Z.vQ=Z['getThrottle']\nZ.bQ=Z['setTimer']Z.nQ=Z['hideWidget']Z.mQ=Z['showWidget']\nZ._Q=Z['setAxisCommandValue']X=_G['AxisCommandManager']\nX.QW=X['activateGroundEngineAltitudeStabilization']\nX.WW=X['deactivateGroundEngineAltitudeStabilization']X.EW=X['updateTargetGroundAltitudeFromActionStart']\nX.RW=X['updateTargetGroundAltitudeFromActionLoop']X.TW=X['setupCustomTargetSpeedRanges']\nX.YW=X['getTargetSpeed']X.UW=X['setTargetGroundAltitude']\nX.IW=X['getTargetGroundAltitude']X.OW=X['getAxisCommandType']\nX.PW=X['composeAxisAccelerationFromTargetSpeed']X.AW=X['composeAxisAccelerationFromThrottle']\nX.SW=X['getCurrentToTargetDeltaSpeed']X.DW=X['getTargetSpeedCurrentStep']\nX.FW=X['updateCommandFromActionStart']X.GW=X['updateCommandFromActionLoop']\nX.HW=X['updateCommandFromActionStop']X.JW=X['setTargetSpeedCommand']\nX.KW=X['setThrottleCommand']X.LW=X['getThrottleCommand']X.ZW=X['resetCommand']end\nfunction C()V.XW=V['getName']V.sa=V['getWorldPosition']\nV.CW=V['getForward']V.VW=V['getUp']V.BW=V['getRight']\nV.NW=V['getWorldOrientationForward']V.MW=V['getWorldOrientationUp']\nV.qW=V['getWorldOrientationRight']V.wW=V['getMaxThrustAlongAxis']\nV.eW=V['getWorldAngularVelocity']V.m=V['getWorldVelocity']\nV.rW=V['getWorldAirFrictionAngularAcceleration']V.tW=V['getFrictionBurnSpeed']\nV.yW=V['getWorldAcceleration']V.uW=V['getVelocity']V.iW=V['getMaxBrake']\nV.oW=V['getCurrentBrake']V.pW=V['getMaxSpeed']V.lW=V['getMass']\nV.kW=V['getTotalMass']V.jW=V['getPvPTimer']V.hW=V['isInPvPZone']\nB.gW.fW=B.gW['getWorldVertical']B.gW.dW=B.gW['getAltitude']\nB.gW.sW=B.gW['getElementNameById']B.gW.aW=B.gW['getElementDisplayNameById']\nB.gW.zW=B.gW['getElementTypeById']B.gW.xW=B.gW['getElementMassById']\nB.gW.cW=B.gW['getElementMaxHitPointsById']B.gW.getElementIdList=B.gW['getElementIdList']\nB.gW.getElementItemIdById=B.gW['getElementItemIdById']J.getItem=J['getItem']J.isItemInClass=J['isItemInClass']\nJ.vW=J['getActionUpdateDeltaTime']B.gW.bW=B.gW['getGravityIntensity']\nB.gW.nW=B.gW['getCoreStress']B.gW.mW=B.gW['getCoreStressRatio']\nB.gW._W=B.gW['getMaxCoreStress']B.gW.QE=B.gW['g']\nif B.WE~=nil then B.WE.EE=B.WE['isActive']\nB.WE.RE=B.WE['getShieldHitpoints']B.WE.TE=B.WE['getMaxShieldHitpoints']\nB.WE.YE=B.WE['startVenting']B.WE.UE=B.WE['stopVenting']B.WE.IE=B.WE['isVenting']\nB.WE.OE=B.WE['getVentingCooldown']B.WE.PE=B.WE['getVentingMaxCooldown']\nB.WE.AE=B.WE['getResistances']B.WE.SE=B.WE['setResistances']\nB.WE.DE=B.WE['getResistancesCooldown']B.WE.FE=B.WE['getResistancesMaxCooldown']\nB.WE.GE=B.WE['getResistancesPool']B.WE.HE=B.WE['getResistancesRemaining']\nB.WE.JE=B.WE['getStressRatio']B.WE.KE=B.WE['getStressRatioRaw']\nB.WE.LE=B.WE['getStressHitpoints']B.WE.ZE=B.WE['getStressHitpointsRaw']end\nif B.XE~=nil then B.XE.activate=B.XE['activate']\nB.XE.deactivate=B.XE['deactivate']B.XE.toggle=B.XE['toggle']\nB.XE.CE=B.XE['getBaseAltitude']B.XE.VE=B.XE['getTargetAltitude']\nB.XE.BE=B.XE['setTargetAltitude']B.XE.NE=B.XE['getFieldStrength']\nB.XE.ME=B.XE['getFieldPower']B.XE.qE=B.XE['getPulsorCount']\nB.XE.wE=B.XE['getCompensationRate']B.XE.EE=B.XE['isActive']end\nif B.eE~=nil then B.eE.rE=B.eE['activateWarp']\nB.eE.tE=B.eE['getStatus']B.eE.getDistance=B.eE['getDistance']\nB.eE.yE=B.eE['getDestinationName']B.eE.uE=B.eE['getAvailableWarpCells']\nB.eE.iE=B.eE['getRequiredWarpCells']end\nif B.oE~=nil then\nfor RT,TY in ipairs(B.oE)do TY.pE=TY['clear']TY.lE=TY['clearValue']\nTY.kE=TY['getNbKeys']TY.jE=TY['hasKey']TY.hE=TY['getKeyList']\nTY.gE=TY['setStringValue']TY.fE=TY['getStringValue']TY.dE=TY['setIntValue']\nTY.sE=TY['getIntValue']TY.aE=TY['setFloatValue']TY.zE=TY['getFloatValue']end end\nif B.xE~=nil then\nfor RT,TY in ipairs(B.xE)do TY.cE=TY['getOperationalState']\nTY.vE=TY['getWidgetDataId']TY.bE=TY['getRange']TY.nE=TY['getIdentifyRanges']\nTY.mE=TY['getConstructIds']TY._E=TY['getIdentifiedConstructIds']\nTY.QR=TY['getSortMethod']TY.WR=TY['setSortMethod']TY.ER=TY['getTargetId']\nTY.RR=TY['getConstructCoreSize']TY.TR=TY['getConstructDistance']\nTY.YR=TY['isConstructAbandoned']TY.UR=TY['getThreatRateFrom']\nTY.IR=TY['hasMatchingTransponder']TY.OR=TY['getConstructName']\nTY.PR=TY['getConstructSize']TY.AR=TY['getConstructKind']TY.SR=TY['getConstructs']end end\nN.DR=N['axisCommandManager']end","filter":{"args":[],"signature":"onStart()","slotKey":"-3"},"key":"2"},{"code":"\nspaceCapableOverride=false --export: (Space Capable Ship Override) true/false -- (average ships do not need this) is your ship space capable with a gyro? Space capability is auto detected from rear facing engines. if you use a gyro to get to space, the auto detection may not work, so set this to true if the ship says your not space capable when using AP, when you really are.\nhoverHeight=10 --export: (Hover Height) 0-50 default hover height to goto when unlocking parking mode (G key)\nthrottleBurnProtection=true --export: (Auto Throttle Burn Protection) true/false -- takes over the throttle/braking when you are going to exceed your ships burn speed in atmo. (only when already in atmo, it does not prevent you from coming in to atmo too fast if manually transitioning from space to atmo)\nmaxPitch=35 --export: (Max Pitch) set between 5-80, 35 is default.\nmaxRoll=45 --export: (Max Roll) set between 5-80, 45 is default.\nwingStallAngle=35 --export: (Wing Stall Angle) 25-60. what angle do a majority of your wings stall? 25-60. Ailerons 30, Wings 55, Stabilizers 70. Set slightly below the stall angle of your main lift source. or split the difference if a mix. if you notice your ship \"skids\" in atmo, your wings are stalling, reduce this number.\nshieldManage=true --export: (Auto Shield Management) true/false , let the ship handle shield control on off/resistance management/venting.\nmaxSpaceSpeed=0 --export: (Max Space Speed) in km/h (max speed you want to go in space, not ships capable max speed) 0 for ships max capable speed, or if your selected speed exceeds ships capability, ships max speed will be used.\nradarOn=false --export: (Radar Widget) true/false -- if radar attached, start with radar widget open (open close widget with /radar command)\nautoAGGAdjust=false --export: when AGG is active, have the AP automatically control it or not. either way it will try to land in the bubble and catch you.\npitchSpeedFactor=0.8 --export: This factor will increase/decrease the player input along the pitch axis<br>(higher value may be unstable)<br>Valid values: Superior or equal to 0.01\nyawSpeedFactor=1 --export: This factor will increase/decrease the player input along the yaw axis<br>(higher value may be unstable)<br>Valid values: Superior or equal to 0.01\nrollSpeedFactor=1.5 --export: This factor will increase/decrease the player input along the roll axis<br>(higher value may be unstable)<br>Valid values: Superior or equal to 0.01\nbrakeSpeedFactor=3 --export: When braking, this factor will increase the brake force by brakeSpeedFactor *velocity<br>Valid values: Superior or equal to 0.01\nbrakeFlatFactor=1 --export: When braking, this factor will increase the brake force by a flat brakeFlatFactor *velocity direction><br>(higher value may be unstable)<br>Valid values: Superior or equal to 0.01\nautoRoll=false --export: [Only in atmosphere]<br>When the pilot stops rolling,  flight model will try to get back to horizontal (no roll)\nautoRollFactor=2 --export: [Only in atmosphere]<br>When autoRoll is engaged, this factor will increase to strength of the roll back to 0<br>Valid values: Superior or equal to 0.01\nturnAssist=true --export: [Only in atmosphere]<br>When the pilot is rolling, the flight model will try to add yaw and pitch to make the construct turn better<br>The flight model will start by adding more yaw the more horizontal the construct is and more pitch the more vertical it is\nturnAssistFactor=2 --export: [Only in atmosphere]<br>This factor will increase/decrease the turnAssist effect<br>(higher value may be unstable)<br>Valid values: Superior or equal to 0.01\ntorqueFactor=2 --export: Force factor applied to reach rotationSpeed<br>(higher value may be unstable)<br>Valid values: Superior or equal to 0.01\ncustomAtlas=\"atlas\"\nsupportTTV=true --export: (Default true) Enable support for The-Third-Verse myDU server features, like enhanced fuel tank handling with item ID-based calculations\nmaxVBrakeSpeed=300 --export: (km/h) Maximum allowed vertical brake speed (outside final bubble)\nagl=0 --export: (AGL) Above Ground Limit - minimum distance from measurement to ground\natmoTankHandling=0 --export: (Atmospheric Fuel Tank Handling) 0-5\nspaceTankHandling=0 --export: (Space Fuel Tank Handling) 0-5\nrocketTankHandling=0 --export: (Rocket Fuel Tank Handling) 0-5\nfuelTankOptimization=0 --export: (Fuel Tank Optimization) 0-5\ncontainerOptimization=0 --export: (Container Optimization) 0-5\nM={FR=0,GR=0,HR=0,JR=0,KR=false,LR=false,ZR=false,XR=false,CR=false,VR=false,BR=false,NR=false,MR=false}function q()M.NR=false end\nfunction w()M.NR=true end\nfunction e()M.BR=false end\nfunction r()\nM.BR=true end\nfunction t()M.MR=false end\nfunction y()M.MR=true end\nfunction u()\nif M.NR then o.qR()return end\np:wR()end\nfunction l()local gC=j\ngC.eR=0\nif\nnot gC.rR and not gC.tR then\nif not M.NR then gC.yR=h.uR\ngC.iR=gC.yR\ngC.rR=true\nO('Altitude Hold: '..T(gC.rR))else\nif H.zx()==false then gC.tR=true\nO('Follow Mode: '..T(gC.tR))else O('[E] Not on Remote, follow disabled')end end else\nif not gC.rR and gC.tR then gC.tR=false\nO('Follow Mode: '..T(gC.tR))elseif gC.rR and not gC.tR then gC.rR=false\ngC.iR=nil\nO('Altitude Hold: '..T(gC.rR))end end end\nfunction g()local gC=j\ngC.eR=0\ngC.oR=false\nif not gC.oR then if gC.pR then f()gC.oR=true\nd()\nO('Orbital Hold: '..T(gC.oR))else\nO('[E] Space thrust not detected: Orbital Hold Disabled')end end\nO('Orbital Hold: '..T(gC.oR))end\nfunction s()local gC=j\nif not gC.lR and not gC.kR and not gC.jR then\ngC.hR='radial out'gC.lR=not gC.lR elseif gC.lR then gC.hR='radial in'gC.lR=not gC.lR\ngC.kR=not gC.kR elseif gC.kR then gC.hR='camera aim'gC.jR=not gC.jR\ngC.kR=not gC.kR else gC.hR='off'gC.jR=not\ngC.jR end\nO('Radial Mode: '..T(gC.hR))end\nfunction a()local gC=j\nif gC.gR=='all'or gC.gR==nil then gC.gR='primary'elseif gC.gR=='primary'then\ngC.gR='hybrid'elseif gC.gR=='hybrid'then gC.gR='locked'else gC.gR='all'end\nO('Engine Mode: '..T(gC.gR))end\nfunction z()local gC=j\nif M.NR and B.XE~=nil and x.fR==true then gC.dR=true\ngC.rR=true\ngC.yR=h.uR\nc:sR(v.aR,false)p.zR.aR=false\nO('autoAGGAdjust Off, Altitude Hold: '..T(gC.rR))p:wR(true)return end\np:xR()O('Slow Flat: '..T(p.zR.cR))end\nfunction b()local gC=j\nif gC.vR==nil or gC.vR=='none'then gC.vR='planets'elseif gC.vR=='planets'then\ngC.vR='moons'elseif gC.vR=='moons'then gC.vR='both'else gC.vR='none'end\nO('AR Mode: '..T(gC.vR))end\nfunction n()j.bR=not j.bR\nO('Rotation Dampening: '..T(j.bR))end\nfunction m()o.nR.mR=not o.nR.mR\nO('Instructions Menu (ALT+9): '..T(o.nR.mR))end\nfunction _()if B.eE~=nil then B.eE.rE()end end\nfunction QQ()if B.XE~=nil then\nB.XE.toggle()end end\nfunction WQ()\nif p._R then p:wR(false)end\np:QT()end\nfunction EQ()N:yQ()end\nfunction RQ()if Z.fQ()then Z.sQ()else\nZ.dQ()end end\nfunction TQ()N.DR:ZW(D.j)end\nfunction YQ()end\nfunction UQ()M.ZR=true\nif not o.nR.WT then N.DR:ZW(D.g)N.DR:WW()\nN.DR:FW(D.g,1.0)j.ET=true end end\nfunction IQ()M.ZR=false\nif not o.nR.WT then N.DR:ZW(D.g)N.DR:QW()end\nj.ET=false end\nfunction OQ()M.XR=true\nif not o.nR.WT then\nN.DR:ZW(D.g)N.DR:WW()N.DR:FW(D.g,-1.0)j.ET=true end end\nfunction PQ()M.XR=false\nif not o.nR.WT then\nN.DR:ZW(D.g)N.DR:QW()end\nj.ET=false end\nfunction AQ()M.CR=true\nif not o.nR.WT then N.DR:FW(D.h,-1.0)end\nj.RT=true end\nfunction SQ()M.CR=false\nif not o.nR.WT then\nN.DR:HW(D.h,1.0)end\nj.RT=false end\nfunction DQ()\nM.VR=true\nif not o.nR.WT then N.DR:FW(D.h,1.0)end\nj.RT=true end\nfunction FQ()M.VR=false\nif not o.nR.WT then else N.DR:HW(D.h,-1.0)end\nj.RT=false end\nfunction GQ()M.FR=M.FR-1 end\nfunction HQ()\nM.FR=0 end\nfunction JQ()M.FR=M.FR+1 end\nfunction KQ()M.FR=0 end\nfunction LQ()M.GR=M.GR-1 end\nfunction ZQ()M.GR=0 end\nfunction XQ()M.GR=M.GR+1 end\nfunction CQ()M.GR=0 end\nfunction VQ()\nM.HR=M.HR+1 end\nfunction BQ()M.HR=0 end\nfunction NQ()M.HR=M.HR-1 end\nfunction MQ()M.HR=0 end\nfunction qQ()N.DR:EW(-1.0)end\nfunction wQ()N.DR:RW(-1.0)end\nfunction eQ()N.DR:EW(1.0)end\nfunction rQ()N.DR:RW(1.0)end\nfunction tQ()N.DR:FW(D.j,\nM.BR and 1.0 or 5.0)j.TT=false end\nfunction yQ()N.DR:GW(D.j,M.BR and 1.0 or 5.0)j.TT=false end\nfunction uQ()N.DR:FW(D.j,M.BR and-1.0 or-5.0)\nj.TT=false end\nfunction iQ()\nN.DR:GW(D.j,M.BR and-1.0 or-5.0)j.TT=false end\nfunction oQ()local PA=p\nM.JR=1\nM.KR=true\nPA._R=false\npQ()M.LR=M.BR==true end\nfunction lQ()\nlocal PA=N.DR:OW(D.j)if(PA==G.f)then local AS=N.DR:YW(D.j)if(R.A(AS)>S.o)then\nN.DR:GW(D.j,-A.r(AS))end end end\nfunction kQ()if not M.BR then M.JR=0\nM.KR=false end end\nfunction jQ()if(\nB.gW~=nil and V~=nil)then h=hQ(V,B.gW)gQ()end end\nfunction fQ()jQ()end\nlocal function OP(PA)J._(PA)end\nlocal function IO(PA)\nOP('[E] '..(PA or''))end\nfunction onInput(PA)local DF=j\nlocal GH=p\nlocal AS=o\nlocal FG=dQ(PA,' ')\nlocal HJ=FG[1]:lower()local SD=(#FG>1)and I(FG[2])or nil\nif\nHJ:sub(1,1)~='/'then\nif AS.nR.WT then local JK=sQ.YT.UT:IT()\nif JK~=nil and JK.OT~=nil and\nJK.OT.PT~=nil then\nif JK.OT.PT.AT~=nil then PA=JK.OT.PT.AT(PA)end\nJK.OT.PT.ST(PA,JK.OT.PT.DT)end end else\nif HJ=='/togglemenu'or HJ=='/mainmenu'then AS.qR()end\nif HJ=='/scale'or HJ=='/setscale'then\nc:sR(v.FT,I(FG[2])/100)end\nif HJ=='/addpos'then\nif#FG<2 then\nO('No target supplied')elseif aQ.GT==nil then\nO('You must have a route open in the Main Menu before using this command')else zQ(FG[2])end end\nif HJ=='/goto'then if#FG<2 then O('No target supplied')return end\nlocal JK=xQ(FG[2])\nif JK==nil then O('Invalid ::pos{...} string')else GH:HT(JK)pQ()if\nGH.JT==0 or GH.KT==GH.LT.ZT then cQ=GH.LT.XT end\nJ._(\n[[Target Set to ]]..FG[2]..[[ near ]]..GH.LT.n..[[ ]]..GH.CT..[[ at ]]..GH.JT..[[ m ]])end end\nif HJ=='/convert'then\nif T(FG[2])==nil then else J._(T(xQ(FG[2])))end end\nif HJ=='/debug'then DF.VT=not DF.VT end\nif HJ=='/helper'then local JK=FG[2]if JK==nil then\nreturn OP(\"Use '/helper on' or '/helper off'\")end\nlocal KL=JK:lower()\nif KL=='on'then J.RQ(true)return\nOP('Helper: ON')elseif KL=='off'then J.RQ(false)return OP('Helper: OFF')else return\nOP(\"Use '/helper on' or '/helper off'\")end end\nif HJ=='/setmaxspacespeed'or HJ=='/setmsp'then if I(FG[2])==nil then else\nc:sR(v.BT,I(FG[2]))GH:NT()\nJ._([[Max Space Speed set to ]]..GH.BT)end end\nif HJ=='/setmaxpitch'or HJ=='/setmp'then if I(FG[2])==nil then else\nGH.zR.MT=I(FG[2])J._([[Max Pitch set to ]]..GH.zR.MT)\nc:sR(v.MT,GH.zR.MT)end end\nif HJ=='/setmaxroll'or HJ=='/setmr'then if I(FG[2])==nil then else\nGH.zR.qT=I(FG[2])J._([[Max Roll set to ]]..GH.zR.qT)\nc:sR(v.qT,GH.zR.qT)end end\nif HJ=='/shield'then GH.zR.wT=not GH.zR.wT\nif GH.zR.wT then\nO('Shield management enabled')else O('Shield management disabled')end\nc:sR(v.wT,GH.zR.wT)end\nif HJ=='/space'then GH.zR.eT=not GH.zR.eT\nif not GH.zR.eT then\nO('Space function disabled')else O('Space function enabled')end\nc:sR(v.eT,GH.zR.eT)end\nif HJ=='/sethover'then\nif I(FG[2])==nil then else GH:rT(I(FG[2]))J._([[Hover height set to ]]..GH.zR.tT)end end\nif HJ=='/atp'then\nGH:yT()if GH.zR.uT then O('Auto throttle burn protection enabled')else\nO('Auto throttle burn protection disabled')end end\nif HJ=='/alt'or HJ=='/altitude'then\nif I(FG[2])==nil then else DF.yR=I(FG[2])J._(\n[[Altitude hold set to ]]..DF.yR)end end\nif HJ=='/orbitalt'then\nif\nDF.oR then\nif I(FG[2])==nil then O('Error: did not enter a number')else\nDF.eR=I(FG[2])J._([[Orbit Alt set to ]]..DF.eR)d()end else O('Error: Engage orbital hold mode first.')end end\nif HJ=='/radar'then vQ:iT()end\nif HJ=='/radarbox'then vQ:oT()end\nif HJ=='/unit'then AS.pT()end\nif HJ=='/core'then AS.lT()end\nif HJ==\n'/freeze'then\nif bQ().kT==true then H.bn(false)else H.bn(true)end\nO([[Frozen = ]]..T(bQ().kT))end\nif HJ=='/aggalt'and B.XE~=nil then if SD==nil then\nIO('Enter valid altitude number >= 1000!')return end\nSD=R.O(1000,R.Y(SD+0.5))B.XE.BE(SD)\nOP('AGG target altitude: '..SD)end\nif HJ=='/agg'and B.XE~=nil then B.XE.toggle()end\nif HJ==\n'/aggauto'then local JK=FG[2]if JK==nil then return\nOP('Auto AGG Adjust = '..T(GH.zR.aR))end\nlocal KL=nil\nif\nJK:lower()=='on'then KL=true end\nif JK:lower()=='off'then KL=false end\nif\nKL==nil then return IO(\"Use '/aggauto on' or '/aggauto off'\")end\nc:sR(v.aR,KL)GH.zR.aR=KL\nreturn OP('Auto AGG Adjust '..(KL and'enabled'or'disabled'))end\nif HJ=='/inatmo'then O(DF.jT)O(B.WE.EE())end\nif HJ==\n'/supportttv'then local JK=FG[2]if JK==nil then return\nOP('supportTTV = '..T(c:hT(v.gT,supportTTV)))end\nlocal LZ=nil\nlocal KL=JK:lower()\nif KL=='on'or KL=='true'or KL=='1'then LZ=true end\nif KL=='off'or KL=='false'or KL=='0'then LZ=false end\nif LZ==nil then\nreturn IO(\"Use '/supportTTV on|off' or '/supportTTV true|false'\")end\nc:sR(v.gT,LZ)p.zR.gT=LZ\n_G.gT=LZ\nnQ()\nOP('supportTTV set to '..T(LZ)..'; tanks re-scanned')end\nif HJ=='/maxvbrakespeed'then local JK=I(FG[2])\nif JK==nil then return OP('maxVBrakeSpeed = '..T(c:hT(v.fT,p.zR.fT)))end\nJK=R.O(10,R.P(1000,R.Y(JK+0.5)))\nc:sR(v.fT,JK)p.zR.fT=JK\nOP('maxVBrakeSpeed set to '..T(JK)..' km/h')end\nif HJ=='/agl'then local JK=I(FG[2])if JK==nil then return\nOP('agl = '..T(c:hT(v.dT,p.zR.dT)))end\nJK=R.O(0,JK)\nc:sR(v.dT,JK)p.zR.dT=JK\nOP('agl set to '..T(JK)..' m')end end end\nfunction mQ()\nif(B.gW~=nil and V~=nil)then h=hQ(V,B.gW)_Q=bQ()x=QW()WW=EW()\nlocal PA=j\nN:uQ()o:uQ()vQ:uQ()RW:uQ()TW()\nif p._R or PA.tR or PA.oR then\nYW={sT=0,aT=0,zT=0,xT=0,cT=0,vT=0,bT=0,nT=0,mT=0,_T=0}else\nYW={sT=-J.getAxisValue(0),aT=-J.getAxisValue(1),zT=J.getAxisValue(2),nT=J.getAxisValue(3),bT=\n-J.getAxisValue(4),cT=J.getAxisValue(5),xT=J.getAxisValue(6),vT=J.getAxisValue(7),mT=J.getAxisValue(8),_T=J.getAxisValue(9)}end end end\nfunction TW()local op=j\nlocal yu=p\nlocal qw=x\nlocal ui=h\nop.jT=ui.jT\nop.QY,op.WY,op.EY=UW()op.RY=false\nIW()local rt=ui.uR\nlocal er=yu.JT\nlocal GH=ui.TY.YY*3.6\nlocal SD=OW.dist(yu.KT,ui.UY)or 0\nlocal we=ui.IY*3.6\nlocal XC=(yu.BT==nil or yu.BT<=1000)and((\n(ui.OY or 0)*3.6)-1)or yu.BT\nlocal HJ=\n(not op.jT and(SD/1000)>=1000)and 1.5 or 1.0\nlocal FG=(B.XE~=nil and qw.fR==true)local VB=ui.PY\nlocal ty=yu and yu.LT\nlocal LZ=(ty and ty.XT)or 0\nlocal BN=ui.AY\nlocal JK=I(p.zR.dT)or 0\nlocal CV=(LZ~=nil)and(rt-LZ)or nil\nlocal KL=I(p.zR.fT)or 300\nKL=R.O(R.A(KL),50)local NM=KL/3.6\nlocal ZX=R.O(\n-ui.SY,0)PW=(VB~=nil and ty~=nil)and\n(VB.b==ty.b)or false\nlocal AS=op.DY\nop.FY=false\nop.GY=nil\nif WW~=nil and WW.HY~=nil then local pl=op.JY\nlocal lk=WW.HY\nif\npl=='Warping'and lk~='Warping'and yu._R then pQ()op.DY='Transfer'\nop.KY=false\nop.LY=false\nop.ZY=false\nop.XY=false\nop.CY=true\nN.DR:ZW(D.j)end\nop.JY=lk end\nlocal function DF(pl,lk)if lk==nil or lk<0 then return pl end\nlocal kj=50/3.6\nif lk>=500 then return pl elseif lk>=200 then return\nR.P(pl,kj)else local gf=5/3.6\nlocal hg=A.t(lk/200,0,1)\nlocal jh=gf+ (kj-gf)*hg\nreturn R.P(pl,jh)end end\nlocal function PA(NM,kj,lk,pl)\nif kj==nil or kj<=0 or lk==nil or lk<=0 then return NM end\nlocal jh=(NM*NM)/ (2*kj)local sf=pl or 0.8\nlocal hg=R.w(2*jh*lk*sf)return R.P(NM,hg)end\nif op.tR then local pl=OW.dist(ui.UY,_Q.VY)local lk=_Q.BY:len()*3.6\nlocal kj=20+\nlk- (20-R.P(pl-50,20))\nif lk==0 then kj=20 end\nif pl>200 then op.NY=true\nN.DR:UW(40)if yu.MY then yu:QT(false)end end\nif op.NY then N.DR:KW(D.j,AW(kj))\nif we>kj+10 then M.JR=1 else M.JR=0 end end\nif\nop.NY==true and pl<50 and lk<30 then N.DR:KW(D.j,AW(0))if not yu.MY then yu:QT(true)end\nop.NY=false end end\nif op.TT and op.oR then if not M.KR then M.JR=0 end\nop.TT=false end\nif yu._R then M.JR=0\nN.DR:UW(40)end\nif\n(not yu._R)and SW()=='cruise'then local pl=N.DR:OW(D.j)\nif pl==G.f and op.jT then local lk=op.qY or 0\nlocal kj=\nN.DR:YW(D.j)or 0\nif lk<=1050 and kj>1050 and kj<=1100 then\nN.DR:JW(D.j,1080)kj=1080 end\nop.qY=kj end end\nif yu.zR.uT then\nif\nnot yu._R and not yu.MY and not op.oR and not M.KR then\nif\nui.wY>=0.02 or(op.jT and ui.SY*3.6 <-100)then\nif we>=1080 or op.TT then op.TT=true\nif SW()=='travel'then DW()N.DR:ZW(D.j)\nN.DR:JW(D.j,1080)end end end else op.TT=false end end\np:eY(false)\nif B.WE~=nil and yu.zR.wT==true then local gf=B.WE.GE()\nlocal hg=B.WE.AE()local jh=B.WE.DE()local kj=B.WE.RE()local lk=B.WE.TE()\nlocal pl=((kj/lk)*100)\nif B.WE.ZE()==0 then gf=gf/4\nif\n(\nhg[1]==gf and hg[2]==gf and hg[3]==gf and hg[4]==gf)or jh~=0 then else B.WE.SE(gf,gf,gf,gf)end else local fd=B.WE.KE()\nif\n(\nhg[1]== (gf*fd[1])and hg[2]== (gf*fd[2])and hg[3]== (gf*fd[3])and hg[4]==\n(gf*fd[4]))or jh~=0 then else B.WE.SE(gf*fd[1],gf*fd[2],\ngf*fd[3],gf*fd[4])end end\nif kj==0 and B.WE.OE()==0 then B.WE.YE()end\nif\nui.rY==true and B.WE.EE()==false then B.WE.activate()elseif ui.rY==false and\nB.WE.EE()==true then B.WE.deactivate()end end\nif not yu._R then op.DY='Off'op.tY=false\nop.yY=false\nop.uY=nil end\nif M.FR~=0 and not yu._R then op.yR=rt end\nop.iY=B.XE~=nil and\nqw.fR==true and yu.zR.aR==true and yu.CT=='surface'if yu._R or op.rR then FW()end\nif not op.oR or op.DY~='Orbit'then\nop.XY=false end\nlocal Mq={x=R.A(GW.x),y=R.A(GW.y),z=R.A(GW.z)}\nif op.oR or op.DY=='Orbit'then local pl=ui.PY.oY-ui.PY.pY\nlocal hg=ui.PY.XT\nlocal kj=ui.TY.lY\nlocal fd=ui.kY.jY.uR\nlocal gf=ui.kY.hY.uR\nlocal lk=ui.kY.gY\nlocal jh=ui.kY.fY\nlocal VB=ui.PY\nlocal ty=yu.LT\nPW=(VB~=nil and ty~=nil)and(VB.b==\nty.b)or false\nHW=0\nM.JR=0\nif op.DY=='Orbit'then if R.A(JW())>2 then HW=0.1\nM.JR=1 end end\nif not op.jT and rt>=op.dY and not op.XY then\nif we>=GH then HW=1\nM.JR=1 end end\nif\nnot op.XY and ui.SY*3.6 <-400 then HW=2\nM.JR=1 end\nop.XY=(fd>hg)and(gf>hg)if SW()=='cruise'then DW()end\nif op.XY then if fd<op.dY-100 then\nif jh<5 then KW=true end end\nif\n(fd<op.dY-100 and KW==true)or(gf<\nop.dY-100 and LW==true)then ZW='2'N.DR:KW(D.j,0.1)else LW=false\nKW=false\nZW='3'N.DR:KW(D.j,0)end\nif fd>op.dY+100 then if jh<5 then XW=gf\nCW=true end end\nif CW then if\nXW>gf+50 then CW=false end end\nif fd>op.dY+100 and\nCW==true then HW='apoDwn'M.JR=1 else XW=gf+1000\nCW=false end\nif gf<op.dY-100 then if lk<5 then LW=true end end\nif\ngf>op.dY+100 then if lk<5 then VW=fd\nBW=true end end\nif BW then\nif VW>fd+50 then BW=false end end\nif gf>op.dY+100 and BW==true then HW=3\nM.JR=1 else\nVW=fd+1000\nBW=false end else local ds=false\nif(\nMq.x<0.008 and Mq.y<0.008 and Mq.z<0.008)then ds=true end\nif Z.xQ()>0.05 then ZW='4'N.DR:KW(D.j,AW())else\nif kj>op.dY-100 and\nrt<op.dY-5 then ZW='5'N.DR:KW(D.j,0)elseif kj< (op.dY-100)then ZW='6'if ds or ui.SY*3.6 <0 then N.DR:KW(D.j,AW(GH))else\nN.DR:KW(D.j,0.1)end else ZW='7'N.DR:KW(D.j,AW(GH))end end end end\nif(yu._R or op.rR or op.oR)and op.jT and\nNW()>yu.zR.sY then op.aY=true else op.aY=false end\nif yu._R then if M.LR then M.LR=false end\nlocal gf=MW(yu.KT)\nif op.TT==true then op.TT=false end\nif not op.tY then local ds=MW(yu.KT)op.uY=ds\nlocal fd=\nPW and op.jT and yu.CT=='surface'and(ds~=nil and ds<=20000)op.yY=fd and true or false\nop.tY=true end\nlocal hg=PW and yu.CT=='surface'and\n(OW.dist(yu.KT,ui.UY)<=100000)and op.jT\nlocal pl=(op.yY==true)local jh=false\nd()\nif not yu.zY then\nif yu.CT=='space'then if\nOW.dist(yu.KT,ui.UY)<10000 then yu:xY()end end\nif yu.CT=='surface'then if PW and gf<1000 then yu:xY()end end end\nif op.DY~='Orbit'then HW=4\nM.JR=0 end\nif op.rR and op.iR~=nil then\nop.yR=op.iR elseif op.iY and hg then op.yR=qw.cY elseif not op.rR then\nif op.yY then\nop.yR=R.O(VB.XT+500,er+500)elseif VB.vY then\nop.yR=R.O(R.O(VB.XT+1000,er+1000),VB.bY*0.5)else op.yR=R.O(VB.XT+3000,er+1000)end end\nif(not PW)and not op.pR then\nO('Ship not space capable, shutting down AP')yu:wR(false)end\nif j.dR then hg=true end\nif not op.pR then\nif not PW or er> (ty.oY-ty.pY)then\nJ._('point on other planet, ship currently set to not space capable.')yu:wR(false)end end\nlocal lk=false\nif op.DY=='reEntry'then lk=true end\nif PW and yu.CT=='surface'then if\nqW()>18 then jh=true end else if\nqW()>80 and OW.dist(VB.ZT,ui.UY)<VB.pY*2 then jh=true end end\nif(R.A(ui.nY)+R.A(ui.mY))<3 then op._Y=true else\nop._Y=false end\nif op.LY then if\nop.jT or(wW()<=10 and we<=XC)then op.LY=false end end\nif\nop.DY=='Landing'then op.ZY=true end\nif not op.ZY then if not PW then op.KY=false\nop.LY=false elseif ty.vY and not jh then op.KY=false end\nif\nop.KY and PW and yu.CT=='surface'then local cv=MW(yu.KT)\nif cv<=R.O(\n(ui.QU.distance or 0)*2,5000)then op.KY=false end end\nlocal xc=rt<op.dY+2000\nlocal zx=jh and PW and xc\nlocal az=jh and not PW\nlocal ds=PW and xc and not ty.vY\nlocal sa=\n(zx and not(ty.vY and hg))or az or op.KY or(ds and not hg)\nlocal fd=((not op.iY)or(not hg))and op.pR and(not hg or rt>\nop.dY+1000)\nif j.dR then op.DY='agg'op.KY=false\nop.LY=false elseif\n((not op.CY)or jh)and sa and fd then op.KY=true\nop.DY='Orbit'elseif\n(PW and op.jT and not op.iY and\nyu.CT=='surface'and hg)or not op.pR then op.DY='Atmo Travel'elseif(not PW or\nyu.CT=='space')and op.jT and op.WU then\nop.DY='Transition'elseif\n(\n(\n((not PW or yu.CT=='space')and not jh and not op.LY)or\n(\nPW and(rt>op.dY+1000 or not hg)and not jh and not op.LY)and not qw.EU)or op.DY=='standby')then op.DY='Transfer'op.KY=false elseif op.iY and qw.EU and hg then op.LY=false\nop.DY='agg'elseif\n\n(not op.jT and(ui.QU.distance*1.5 >=gf)and\n((rt<\nop.dY+5000 and PW)or lk or(PW and op.XY)))and not op.iY and VB.vY and yu.CT=='surface'then op.KY=false\nop.DY='reEntry'elseif op.LY and not op.jT then op.DY='Space Braking'end\nif op.jT then op.LY=false end\nif\nAS=='Space Braking'and op.DY~='Space Braking'then op.LY=false end end\nif B.XE~=nil and yu.zR.aR then\nif qw.fR and yu.CT=='surface'then\nif j.dR then elseif\n((\n(ty.vY and not qw.EU)or not PW)and(not hg))then if qw.RU~=ty.bY then B.XE.BE(ty.bY)end elseif\n(hg and PW and not qw.EU)then\nif er==0 then if qw.RU~=R.O(R.O(er+500,1000),ty.XT)then\nB.XE.BE(R.O(R.O(er+500,1000),ty.XT))end else if qw.RU~=R.O(er+500,1000)then B.XE.BE(R.O(\ner+500,1000))end end elseif PW and qw.EU then\nif er==0 then\nif qw.RU~=R.O(R.O(er+500,1000),ty.XT)then B.XE.BE(R.O(R.O(\ner+500,1000),ty.XT))end else if qw.RU~=R.O(er+500,1000)then\nB.XE.BE(R.O(er+500,1000))end end end end end\nif op.DY=='agg'or j.dR then local fd=false\nif(Mq.x<0.005 and Mq.y<0.005 and\nMq.z<0.005)or we<4000 or(\nui.TU>0.5 and not PW)then\nfd=true end\nlocal ds=qW()\nif ds>=0.5 and ds<5 and\nfd then ZW='agg 1'N.DR:KW(D.j,AW(300))end\nif(not j.dR)and ds>=5 and fd then ZW='agg 2'\nN.DR:KW(D.j,AW(GH))end end\nlocal kj=OW.dist(ui.UY,ty.ZT)if ty.vY then\nkj=A.e(kj- (ty.oY*1.05))else kj=kj- (ty.pY*1.5)end\nif\nop.DY=='Transfer'or op.DY=='Space Braking'then N.DR:ZW(D.j)op.FY=true\nlocal az=false\nlocal fd=R.A(eW())<=30\nif fd then op.CY=false end\nlocal sa=0.008*HJ\nif yu.CT==\n'surface'then\nif(Mq.x<sa and Mq.y<sa and Mq.z<sa)or we<\n4000 or\n(ui.TU>0.5 and not PW and we<XC)then az=true end end\nif\nyu.CT=='space'then if\n(Mq.x<sa and Mq.y<sa and Mq.z<sa)or we<500 or(ui.TU>0.5 and not PW and we<XC)then az=true end end\nif az then op.CY=false end\nif op.iY and yu.CT~='space'then\nlocal zx=((\nOW.dist(ty.ZT,ui.UY)-ty.pY)-qw.RU)\nif op.iY and ui.QU.distance*1.5 >=zx then op.LY=true\nHW=9\nM.JR=1 end\nif op.iY and PW and rt<=qw.RU+100 and not qw.EU then\nop.YU=true\nZW='agg 5'N.DR:KW(D.j,0)HW=10\nM.JR=1 else op.YU=false end end\nif\n(\nyu.CT=='surface'and ui.QU.distance*1.4 >=rt-op.dY and PW and op.DY~='Landing'and we>1000)or\n(yu.CT=='surface'and ui.QU.distance*1.4 >=kj and not PW)then op.LY=true\nHW=11\nM.JR=1 end\nif yu.CT=='space'and\nui.QU.distance*1.4 >=OW.dist(yu.KT,ui.UY)-1000 then op.LY=true\nif\nOW.dist(yu.KT,ui.UY)<1000 then if we>110 then HW=11.1\nM.JR=1 end else HW=11.2\nM.JR=1 end end\nlocal ds=50\nif\nwW()>ds and op.DY~='Space Braking'and not op.jT and we>500 then HW=12\nM.JR=1 end\nif not op.LY then\nlocal zx=(not op.jT)and(we>500)and(wW()>ds)if not zx then M.JR=0 end\nif we<XC and az or we<3000 then ZW='8'op.GY=AW(XC)\nN.DR:KW(D.j,op.GY)elseif we<XC then ZW='8.1'op.GY=0.3\nN.DR:KW(D.j,op.GY)else ZW='8.1.1'op.GY=0\nN.DR:KW(D.j,op.GY)end\nlocal xc=0.05*HJ\nif wW()>xc and az and we>=XC then ZW='8.2'op.GY=A.t((wW()*0.1)-\n0.01,0,1)N.DR:KW(D.j,op.GY)end\nif ui.wY>0.05 then ZW='8.3'op.GY=az and AW()or 0\nN.DR:KW(D.j,op.GY)end else\nif yu.CT=='surface'then local zx=0.5*HJ\nif not op.iY then\nif qW()>\nzx and ui.nY*3.6 <500 and az then ZW='9'\nN.DR:KW(D.j,AW(500,ui.nY))else ZW='9.1'N.DR:KW(D.j,0)end else if\nqW()>zx and ui.nY*3.6 <500 and az and rt>qw.RU+200 then ZW='9.2'N.DR:KW(D.j,AW(500,ui.nY))else ZW='9.3'\nN.DR:KW(D.j,0)end end else if not op.LY then ZW='9.4'N.DR:KW(D.j,AW(XC))else ZW='9.5'\nif wW()>10 then\nN.DR:KW(D.j,AW(XC))HW=12.1\nM.JR=1 else N.DR:KW(D.j,AW(100,ui.nY))end end end end end\nif\n(yu.CT=='surface'and ui.QU.distance*1.4 >=kj and not PW)and we>1000 then op.LY=true\nHW=11.5\nM.JR=1 end\nif\n(\nPW and op.jT and op.DY~='Orbit'and op.DY~='Landing'and yu.CT~='space')or(op.DY=='reEntry')then\nlocal fd=(Mq.x<\n0.008 and Mq.y<0.008 and Mq.z<0.008)\nif(gf<5000 and not op.ZY)then ZW='10'\nlocal ds=R.P(A.e(gf/2),500)\nN.DR:KW(D.j,fd and AW(ds,ui.nY)or 0)\nif ui.nY*3.6 >R.P(A.e(gf/2),500)+100 and\nop.DY=='reEntry'then HW=13\nM.JR=1 end end\nif op.DY=='reEntry'then if gf<300 then op.ZY=true end end\nif\nop.jT and not yu.YU then ZW='11'\nlocal ds=R.P(((ui.UU or 0)*3.6)-120,1080)N.DR:KW(D.j,AW(ds))if we>100 and R.A(JW())>25 then HW=13.1\nM.JR=1 end\nif\nwe> ((ui.UU or 0)*3.6)-120 then HW=14\nM.JR=1 end\nif(we>50)and(\nui.QU.distance*1.5 >=gf or gf<300)then op.ZY=true end end end\nif op.DY=='reEntry'then\nif qW()>1 then\nif ui.SY*3.6 <-200 then ZW='12'\nN.DR:KW(D.j,AW(1000,ui.nY))else ZW='13'N.DR:KW(D.j,AW())end\nif we>= (ui.UU*3.6)-300 then HW=15\nM.JR=1 end else\nop.ZY=true end end\nif\nop.DY=='Orbit'and(PW and(not ty.vY or op.jT))then if R.A(JW())>5 then HW=15.1\nM.JR=1 end\nif\n(ui.QU.distance*1.4 >= (gf))then op.ZY=true end end\nif op.ZY and\n(op.DY=='reEntry'or(PW and rt<op.dY+2000))and yu.CT~='space'and\ngf<R.O(2000,((ty and ty.XT)or 0)+2000)then op.KY=false\nif gf>1000 then\nop.ZY=false end\nop.DY='Landing'op.ZY=true\nif op.IU>gf then op.IU=gf end\nZW='14'N.DR:KW(D.j,0)\nif((not op._Y)and\n(ui.QU.distance*1.4 >= (op.IU-150)))or\n(ui.SY*3.6 <-1000)then HW=16\nM.JR=1 end\nif er==0 or yu.KT==ty.ZT then er=ty.XT end\nif\nFG and yu.CT=='surface'then er=R.O(qw.cY,LZ+1000)else er=R.O(er,LZ+1000)end\nlocal BN=ui.AY\nif BN~=nil then local fd=rt-R.O(BN-JK,0)if fd~=nil then er=fd end end\nop.OU=(gf~=nil and gf<=25)\nif gf~=nil then\nlocal fd=ui.QU.distance or 0\nlocal ds=40\nif fd>=R.O(gf-ds,0)then HW=17.5\nM.JR=1 end end\nif gf~=nil then local fd=op.IU or gf\nif gf<fd then op.IU=gf end end\nif not op.OU then\nlocal fd=(Mq.x<0.008 and Mq.y<0.008 and Mq.z<0.008)local ds=fd or((gf or 9999)<=250)local zx=R.P(A.e(\n(gf or 0)/3),100)if zx<20 then zx=20 end\nlocal sa=(M.JR==1)\nlocal az=(ds and(not sa))and AW(zx,ui.nY)or 0\nN.DR:KW(D.j,0)if az~=0 then N.DR:FW(D.j,az)end else\nN.DR:KW(D.j,0)end\nif op._Y then\nlocal fd=(gf~=nil)and(op.IU~=nil)and(gf<= (op.IU+5))local sa=R.A(qW())local ds=sa<5 or sa>175\nif fd and\n(gf~=nil and gf<=60)or\n(ui.SY*3.6 <-100 and(rt-er)<400)or we>1050 then\nHW=17\nM.JR=1 end\nif\n(rt<er+500 or(BN~=nil and\nBN<100))and ui.SY*3.6 <-50 then HW=18\nM.JR=1 end\nif\nds and((rt-er)<200 or(BN~=nil and\nBN<100))and(\nrt-er)>20 and ui.SY*3.6 >- (4*3.6)then N.DR:KW(D.j,0.1)end end\nif op.OU and\n((BN~=nil)or(rt<=er and ui.SY>=0))then yu:xY()end\nif\nop._Y and gf>300 then op.PU=true end end\nif yu.CT=='space'then\nif OW.dist(yu.KT,ui.UY)<=1500 then yu:xY()end end\nif op.CY then ZW='turn'\nif op.jT then local fd=R.A(eW())\nlocal zx=R.A((op.AU or\n0)- (ui.SU.FR or 0))local az=(ui.SY*3.6)<-10\nlocal ds=(ui.nY*3.6)<-30\nif PW and\nyu.CT=='surface'then op.ZY=false\nop.LY=false\nM.JR=1\nop.DY='Atmo Travel'end\nlocal sa=fd<=30\nlocal xc=true\nif\nnot(PW and yu.CT=='surface')then xc=(zx<=15)or(R.A(ui.SY)<=5)else op.AU=0 end\nif sa and xc and not az and not ds then op.CY=false else N.DR:KW(D.j,0)end else local fd=R.A(eW())\nlocal ds=((SD/1000)>=1000)and 1.5 or 1.0\nlocal az=0.008*HJ\nlocal sa=\n(Mq.x<az and Mq.y<az and Mq.z<az)or(we<500)if\nfd<= (30*ds)or sa then op.CY=false else N.DR:KW(D.j,0)end end end end\nif op.DU and rt<0 and op.jT then if M.FR~=0 or op.ET then op.FU=rt end\nif not\nop.ET and not yu.MY then\nif(rt<op.FU and ui.SY*3.6 <5)or(\nui.SY*3.6 <-5)then op.GU=true\nN.DR:WW()\nN.DR:ZW(D.g)N.DR:FW(D.g,1.0)else op.GU=false\nN.DR:ZW(D.g)N.DR:QW()N.DR:UW(\n-1)end else N.DR:WW()end end\nif yu.MY then N.DR:JW(D.j,0)N.DR:KW(D.j,0)\nif not M.KR then M.LR=true end\nif op.HU and not M.KR then M.JR=1 end\nif FG then local kj=qw.cY\nlocal lk=100\nif\nrt< (kj-lk)then op.JU=false end\nif\nui.PY.n=='Thades'and(LZ or 0)>0 and kj< (LZ+100)then op.JU=false end end\nif\nop.JU and FG then local cv=qw.cY\nN.DR:UW(-1)local bn=R.A(rt-cv)local az=bn\nlocal fd=ui.QU.distance or 0\nlocal nm=NM\nlocal vb=100\nif bn>vb then N.DR:WW()else N.DR:QW()end\nlocal ds=nil\nif BN~=nil then ds=R.O(BN-JK,0)end\nif ds~=nil then\nnm=R.P(nm,DF(NM,ds))elseif bn<=vb and rt<cv then nm=0 else nm=R.P(nm,DF(NM,bn))if\nLZ>cv and rt>cv and rt<=LZ then nm=R.P(nm,PA(NM,fd,bn))end end\nif BN==nil and CV~=nil and R.A(CV)<=1000 then\nnm=R.P(nm,50/3.6)end\nlocal gf=0\nif ZX>nm then\ngf=A.t((ZX-nm)/NM,0,1)end\nlocal sa=0\nif bn<=500 and az>0 and fd>0 then local m_=0.8\nsa=A.t((fd-\n(az*m_))/R.O((az*m_),1),0,1)end\nlocal kj=1\nif bn<=vb then\nlocal m_=A.t(bn/vb,0,1)kj=1+ (1-m_)*1.0 end\nlocal xc=0\nif\nbn<=vb and rt<cv then local m_=R.O(ui.SY,0)local _1=4/3.6\nif m_>_1 then\nxc=A.t((m_-_1)/_1,0,1)end end\nlocal zx=R.O(A.t(\ngf*kj,0,1),sa,xc)if\nui.SY>=0 and bn<=100 and qw.fR then zx=zx*0.3 end\nif az<5 and ZX< (5/3.6)then zx=1 end\nlocal jh=op.KU or 0\nlocal hg=0.5\nif bn<=vb then hg=0.7 end\nlocal lk=jh+ (zx-jh)*hg\nop.KU=lk\nN.DR:ZW(D.g)\nif ZX>nm then local W4=(ZX-nm)/R.O(NM,0.1)local Q3=\nop.KU or 0\nlocal _1=Q3+ (A.t(W4,0,1)-Q3)*0.35\nlocal m_=A.t(_1,0.2,0.85)N.DR:KW(D.g,m_)op.ET=true\nop.LU=W4 >0\nif\nop.LU then op.ZU=not op.ZU\nop.XU=op.ZU and 1 or 0 end elseif xc>0 then local m_=-A.t(xc,0.2,1.0)N.DR:KW(D.g,m_)op.ET=true elseif\nsa>0 then local m_=A.t(sa,0.2,0.8)N.DR:KW(D.g,m_)op.ET=true end\nif not M.KR then if bn<=10 then op.CU=true\nM.LR=true else op.CU=false end end else local kj=ui.AY\nlocal KL=I(p.zR.fT)or 300\nKL=R.O(R.A(KL),50)\nlocal NM=KL/3.6\nlocal ZX=R.O(-ui.SY,0)\nlocal lk=(CV~=nil)and R.A(CV)or nil\nif(kj==nil)and(lk~=nil)and(lk<=1000)then\nNM=R.P(NM,50/3.6)end\nif kj~=nil then NM=DF(NM,kj)end\nif(ZX>NM)or\n(\nkj==nil and CV~=nil and R.A(CV)<=1000 and(ZX*3.6)>50)then N.DR:UW(0)N.DR:QW()\nN.DR:ZW(D.g)local jh=(ZX-NM)/R.O(NM,0.1)local fd=A.t(jh,0,1)\nlocal sa=op.VU or 0\nlocal hg=0.35\nlocal ds=sa+ (fd-sa)*hg\nop.VU=ds\nlocal gf=A.t(ds,0.15,0.85)N.DR:KW(D.g,gf)op.ET=true\nif fd>0 then op.ZU=not op.ZU\nop.XU=op.ZU and 1 or 0\nop.LU=true\nif not M.KR then M.JR=op.XU end else op.LU=false end elseif(ui.SY*3.6 <-20)and\n(((kj~=nil)and(kj<=500))or(\n(CV~=nil)and(CV>0)and(CV<=1000)))then local JK=I(p.zR.dT)or 0\nif\nkj~=nil then er=rt-kj-R.O(JK,0)end\nN.DR:UW(JK)\nN.DR:QW()N.DR:ZW(D.g)N.DR:FW(D.g,1.0)op.ET=true else\nN.DR:ZW(D.g)N.DR:WW()N.DR:UW(-1)op.ET=false\nop.LU=false end end\nlocal pl=(R.A(ui.nY)+R.A(ui.mY))*3.6\nif not M.KR then\nif op.CU then M.LR=true else if yu.MY and not op.OU and not op.HU then M.LR=false else M.LR=(\npl>5)end end end\nif not M.KR then\nlocal lk=\nyu.MY and\nop.jT and(not op.JU)and BN==nil and CV~=nil and R.A(CV)<=1000\nif lk then if op.LU then M.JR=op.XU or 0 else M.JR=0 end else\nif op.JU then M.JR=op.KU or 0 else M.JR=\nop.LU and(op.XU or 0)or 0 end end end\nif BN~=nil then local lk=R.O(BN-JK,0)if lk<1 then N.DR:ZW(D.g)N.DR:WW()\nN.DR:UW(-1)\nif yu.MY and p._R and(op.OU==true)then p:wR(false)end end end end\nif M.LR then M.JR=1 end end\nfunction rW()tW()end\nfunction yW()end\nfunction uW()local PA=j\nif PA.VT then\niW=\n[[<div class=\"debugInfo\" style=\"font-size: 0.9vh; color: ivory; text-shadow: 0.2vh 0.2vh 1vh black;\">\n        SAGA's BASIC DEBUG CRAP DONT JUDGE ME =) <br>\n\n        Last Dist  = ]]..T(oW.IU)..[[<br>\n        Proj Distance = ]]..T(MW(oW.KT))..[[<br>\n        T Distance = ]]..T(OW.dist(oW.KT,h.UY))..[[<br><br>\n\n        targetLocation = ]]..T(oW.CT)..[[<br>\n        targetAlt = ]]..T(pW(oW.KT))..[[<br>\n        atmo? = ]]..T((\noW.LT.oY-oW.LT.pY))..[[<br>\n        Target Angle = ]]..eW()..[[<br>\n        Aim Target   = ]]..PA.BU..[[<br>\n        SpcVector   = ]]..T(lW)..[[<br>\n        AP Mode      = ]]..T(PA.DY)..[[<br>\n        BrakeCtrl = ]]..T(HW)..[[<br>\n        Spd Control =]]..T(ZW)..[[<br>\n        Brake Trig   = ]]..T(PA.ZY)..[[<br><br>\n\n        Samebody   = ]]..T(PW)..[[<br>\n        Vel World Angle = ]]..kW()..[[<br>\n        Vel to T Angle = ]]..JW()..[[<br>\n        Spc to T Angle = ]]..wW()..[[<br>\n        world T Angle = ]]..qW()..[[<br>\n        Target Altitude = ]]..T(PA.yR)..[[<br><br>\n\n        atmo = ]]..h.wY..[[<br>\n\n        Target Pitch = ]]..T(A.e(PA.AU))..[[<br>\n        Speed = ]]..T(A.e(h.IY),0.01)..[[<br>\n        Max S = ]]..T(A.e(h.OY*3.6),0.01)..[[<br>\n        Vert Speed = ]]..T(A.e(h.SY),0.01)..[[<br>\n        Forward Speed = ]]..T(A.e(h.nY),0.01)..[[<br>\n        Lateral Speed = ]]..T(A.e(h.mY),0.01)..[[<br><br>\n\n        Burn Spd = ]]..T(A.e(\nh.UU*3.6))..[[<br><br>\n\n        gravity = ]]..T(h.TU)..[[<br>\n        Altitude = ]]..T(A.e(h.uR))..[[<br>\n        ClosestBody = ]]..T(jW(h.UY).n)..[[<br>\n        TargetBody = ]]..T(oW.LT.n)..[[<br>\n        atmoAlt = ]]..T(jW(h.UY).oY-\njW(h.UY).pY)..[[<br><br>\n\n        OrbitSpd = ]]..T((h.TY.YY*3.6))..[[<br>\n        targetOrbit = ]]..T(PA.dY)..[[<br>\n        Orbit Status = ]]..T(PA.XY)..[[<br>\n        Apoapsis = ]]..T(hW().jY.uR)..[[<br>\n        Periapsis = ]]..T(hW().hY.uR)..[[<br>\n        T to Periapsis = ]]..T(hW().fY)..[[<br>\n        T to Apoapsis = ]]..T(hW().gY)..[[<br>\n        hold = ]]..I(gW())..[[<br><br>\n\n        aggAlt = ]]..T(x.cY)..[[<br>\n        aggTarget = ]]..T(x.RU)..[[<br>\n        aggStr = ]]..T(x.NU)..[[<br><br>\n        </div>]]end end\nfunction onUnitStart(PA,DF,SD,AS,FG)J=PA\nZ=DF\nV=SD\nK=AS\nH=FG\nP()J.RQ(false)fW()\nif B.gW==nil then\nO(\"Core not found, did you link it to this control unit?\")else dW()C()sW()h=hQ(V,B.gW)_Q=bQ()x=QW()WW=EW()\nc:MU(B.oE,'SagaConf','SagaActiveConf')aQ:MU(B.oE,'SagaRoutes','SagaActiveRoutes')\nvQ:MU(B.xE)p:MU()aW:MU()nQ()zW()pQ()xW()o:MU()B.qU:wU()\nN.DR.axisCommands[D.j].throttleMouseStepScale=1\nN.eU={1000,5000,10000,20000,30000}N.DR:TW(D.j,N.eU)\nN.DR:UW(0)Z.bQ('DEBUGHUD',0.1)Z.bQ('FUELUPDATE',0.1)end end\nfunction dW()h={}x={}WW={}_Q={}N=L.new(J,B.gW,Z)OW=vec3()GW=vec3()local PA,AS=pcall(require,\n\"autoconf/custom/\"..customAtlas)if not\nPA then AS=require(\"atlas\")end\ncW=AS\nvW()bW=0\nIW()end\nfunction xW()\nJ._('HUD/Autopilot by Sagacious, Mayumi and CodeInfused')J._('v'..nW())\nJ._('Customized by tobitege (2025-09-20)')aW:QQ(mW.rU)end\nfunction zW()local FG=j\nlocal AS='primary'local DF='secondary'local PA='thrust analog longitudinal'\nlocal SD='off'\nFG.tU=V.wW(AS,{vec3(V.CW()):unpack()})\nFG.yU=V.wW(DF,{vec3(V.CW()):unpack()})\nFG.uU=V.wW(DF,{vec3(V.CW()):unpack()})\nFG.iU=V.wW(PA,{vec3(V.CW()):unpack()})\nif p.zR.eT==false then if FG.iU[3]>0 then FG.pR=true else FG.pR=false\nO('longitudinal Space Thrust not detected - space transfers/orbit disabled')end else\nFG.pR=p.zR.eT end\nif SD=='off'then\nif(FG.tU[1]>0 and FG.yU[1]>0)then FG.oU=true\nFG.gR='hybrid'\nO('Atmo Engine tags detected, advanced Atmo engine control enabled')else FG.oU=false\nO('Atmo Engine tags not detected, advanced Atmo engine control disabled')end\nif(FG.tU[3]>0 and FG.yU[3]>0)then FG.pU=true\nFG.gR='hybrid'\nO('Space Engine tags detected, advanced Space engine control enabled')else FG.pU=false\nO('Space Engine tags not detected, advanced Space engine control disabled')end else FG.gR=SD end end\nfunction _W()if B.qU~=nil then B.qU:lU()end end\np=(function()local PA={}\nPA._R=false\nPA.zR={BT=maxSpaceSpeed,MT=maxPitch,qT=maxRoll,sY=wingStallAngle,tT=hoverHeight,eT=spaceCapableOverride,wT=shieldManage,uT=throttleBurnProtection,aR=autoAGGAdjust,cR=true,MY=true,gT=supportTTV,fT=\nmaxVBrakeSpeed or 300,dT=agl or 0}\nfunction PA:MU()PA:kU(V.sa())PA.jU=true\nc.hU[v.BT]=PA.zR.BT\nc.hU[v.MT]=PA.zR.MT\nc.hU[v.qT]=PA.zR.qT\nc.hU[v.sY]=PA.zR.sY\nc.hU[v.tT]=PA.zR.tT\nc.hU[v.eT]=PA.zR.eT\nc.hU[v.wT]=PA.zR.wT\nc.hU[v.uT]=PA.zR.uT\nc.hU[v.cR]=PA.zR.cR\nc.hU[v.aR]=PA.zR.aR\nc.hU[v.MY]=PA.zR.MY\nc.hU[v.gU]=PA._R\nc.hU[v.gT]=PA.zR.gT\nc.hU[v.fT]=PA.zR.fT\nc.hU[v.dT]=PA.zR.dT\nQE:fU('ConfigDBChanged',PA.NT,PA)PA:NT()PA:dU()PA:QT(PA.zR.MY)end\nfunction PA:NT()PA.zR.BT=c:hT(v.BT)PA.zR.MT=c:hT(v.MT)\nPA.zR.qT=c:hT(v.qT)PA.zR.sY=c:hT(v.sY)PA.zR.tT=c:hT(v.tT)\nPA.zR.eT=c:hT(v.eT)PA.zR.wT=c:hT(v.wT)PA.zR.uT=c:hT(v.uT)\nPA.zR.cR=c:hT(v.cR)PA.zR.aR=c:hT(v.aR)PA.zR.MY=c:hT(v.MY)\nPA.zR.gT=c:hT(v.gT)PA.zR.fT=c:hT(v.fT,PA.zR.fT)\nPA.zR.dT=c:hT(v.dT,PA.zR.dT)PA:rT(PA.zR.tT)PA:sU()end\nfunction PA:dU()local AS=c:aU(v.gU)if AS then PA:wR(AS)end\nlocal SD=c:aU(v.zU)\nif W(SD)==\n'table'then if SD.x~=nil then PA:HT(SD)else if aQ:xU()==SD[3]then\nPA:cU(SD[1],SD[2])end end end end\nfunction PA:wR(AS)if AS==nil then AS=not PA._R end\nPA._R=AS\nif PA._R then PA:QT(false)\naW:QQ(mW.vU)PA:sU()pQ()if SW()=='cruise'then DW()end\nlocal SD='::pos{0,0,'..T(PA.KT.x)..','..T(PA.KT.y)..','..T(PA.KT.z)..'}'J._(\n'Target: '..SD)if j.oR and PA.CT=='surface'then j.oR=false\nj.KY=false end else f()aW:QQ(mW.bU)end\nc:nU(v.gU,PA._R)end\nfunction PA:mU(AS)if AS==nil then AS=not PA.zR.wT end\nPA.zR.wT=AS\nc:sR(v.wT,AS)end\nfunction PA:yT(AS)\nif AS==nil then AS=not PA.zR.uT end\nPA.zR.uT=AS\nc:sR(v.uT,AS)end\nfunction PA:_U(AS)if\nAS==nil then AS=not PA.zR.eT end\nPA.zR.eT=AS\nc:sR(v.eT,AS)zW()end\nfunction PA:xR(AS)if AS==nil then\nAS=not PA.zR.cR end\nPA.zR.cR=AS\nc:sR(v.cR,AS)end\nfunction PA:cU(AS,SD)if SD==nil then SD=1 end\nPA.QI=AS\nPA.WI=SD\nlocal DF=aQ:EI(AS,SD)if DF~=nil then\nPA:kU(DF)c:nU(v.zU,{PA.QI,PA.WI,aQ.RI.n})PA.zY=PA.WI==\naQ:TI(AS)end end\nfunction PA:HT(AS)PA:kU(AS)PA.zY=true\nc:nU(v.zU,AS)end\nfunction PA:sU()\nlocal SD=PA.zR.BT\nlocal AS=h.OY\nif SD==0 then PA.BT=(AS*3.6)-1 else PA.BT=SD end end\nfunction PA:xY()if not PA.zY then\nif PA.WI~=nil then PA.WI=PA.WI+1\nPA:cU(PA.QI,PA.WI)end\naW:QQ(mW.YI)pQ()else PA:wR(false)PA:QT(true)\naW:QQ(mW.UI)end end\nfunction PA:II()PA.QI=nil\nPA.WI=nil\nPA:wR(false)end\nfunction PA:kU(AS)\nPA.KT=vec3(AS)PA.LT=jW(PA.KT)PA.JT=pW(PA.KT)PA.CT=WE(PA.LT,PA.JT)\nPA.zY=false end\nfunction PA:rT(AS)PA.zR.tT=AS\nif\nnot PA.MY then N.DR:UW(PA.zR.tT)end end\nfunction PA:QT(AS)if AS==nil then AS=not PA.MY end\nPA.MY=AS\nlocal SD=j\nc:sR(v.MY,AS)\nif\nPA.MY then SD.rR=false\nSD.oR=false\nSD.bR=true\nM.LR=false\nM.JR=1\nSD.DY='Landing'\nSD.HU=true\nZ.hQ()if SW()=='cruise'then DW()end\nN.DR:KW(D.j,0)\nN.DR:JW(D.j,0)N.DR:UW(-1)B.qU:OI()\nif SD.jT then local _p=h.SU.FR or 0\nlocal _r=h.SU.GR or 0\nif R.A(_p)>5 then SD.AU=0 end\nif R.A(_r)>5 then SD.PI=0 end end\nPA:eY(true)else N.DR:ZW(D.j)N.DR:ZW(D.g)\nN.DR:UW(p.zR.tT)N.DR:QW()Z.gQ()B.qU:AI()M.JR=0\nM.LR=false\nSD.HU=false\nSD.CU=false\nSD.LU=false\nSD.ZU=false\nSD.VU=nil\nSD.ET=false end end\nfunction PA:eY(AS)local JK=j\nlocal FG=(B.XE~=nil and x.fR==true)\nlocal SD=(JK.DY==\n'Landing'and JK.jT and FG)local GH=(h.uR-x.cY)local DF=R.A(GH)local HJ=MW(PA.KT)if SD and not PA.MY and not\nJK.JU then local KL=R.A(h.SY*3.6)\nif(GH>=-100)and KL<10 and\nHJ~=nil and HJ<=600 then PA:QT(true)return end end\nif\n(not FG)and(JK.DY=='Landing')and(not PA.MY)then local KL=R.A(h.SY*3.6)local LZ=(h.AY~=nil)\nlocal ZX=(HJ~=nil and HJ<=35)if LZ and ZX and KL<15 then PA:QT(true)return end end\nif(PA.MY or AS==true or SD)and FG then\nlocal XC=R.A(h.SY*3.6)local ZX=(GH>=-100)\nlocal LZ=(AS==true)or(((DF>0.5)and ZX)and\n(XC>=1 or JK.dR))local KL=(JK.JU==true)JK.JU=LZ\nif\n\n(not KL)and LZ and PA._R and PA.MY and(XC<10)and ZX and(DF<=500)and(HJ~=nil and HJ<=300)then PA:wR(false)end else\nJK.JU=false end end\nreturn PA end)()\nfunction WE(AS,PA)local SD=\n(AS.vY and((AS.oY or 0)- (AS.pY or 0)))or 0\nlocal FG=AS.XT or 0\nlocal DF=R.O(SD,FG)if AS.vY and PA<DF then return'surface'elseif not AS.vY and PA< (FG+5000)then\nreturn'surface'else return'space'end end\nfunction gW()d()local SD=j\nlocal PA=(SD.dY-h.TY.lY)local AS=20000+h.IY\nlocal DF=(\nA.yu(PA,-AS,AS)-0.5)*2*p.zR.MT\nif SD.jT then DF=p.zR.MT end\nreturn DF end\nfunction FW()local gC=j\nlocal PA=p\nlocal AS=h\nif\nPA._R or gC.rR or gC.oR or gC.DY=='Orbit'then local JK=AS.PY\nlocal KL=p.LT\nlocal FG=\n(JK~=nil and KL~=nil)and(JK.b==KL.b)or false\nlocal SD=(\np._R and gC.jT and gC.CY and FG and PA.CT=='surface')if SD then gC.AU=0\nEE=0\nreturn end\nlocal HJ=AS.SU.FR\nlocal GH=0.1\nlocal DF=(gC.yR-AS.uR)local LZ=500+AS.IY\ngC.AU=(A.yu(DF,-LZ,LZ)-0.5)*2*p.zR.MT\nif gC.jT then\nlocal ZX=R.O(5,R.P(p.zR.MT,p.zR.sY-5))gC.AU=A.t(gC.AU,-ZX,ZX)end\nif R.A(\ngC.AU-HJ)>GH then\nif(RE==nil)then RE=pid.new(0.02,0,0.1)end\nRE:inject(gC.AU-HJ)local ZX=RE:get()EE=ZX end end end\nfunction SW()if Z.aQ()==0 then return'travel'else return'cruise'end end\nfunction DW()Z.zQ()end\nfunction pQ()local PA=j\nPA.BU='none'PA.KY=false\nPA.ZY=false\nPA.LY=false\nPA.aY=false\nPA.IU=10000000\nPA.PU=false\nPA._Y=false\nPA.DY='standby'PA.CY=true\nM.LR=false end\nfunction f()local AS=j\nlocal PA=p\nPA._R=false\npQ()AS.rR=false\nAS.oR=false\nAS.tR=false\nAS.kR=false\nAS.lR=false\nAS.jR=false\nTE='none'end\nfunction d()local DF=j\nlocal FG=h.PY\nlocal SD=p.LT\nlocal AS=h.SI/2500\nif FG==nil then DF.dY=3000\nreturn end\nif SD==nil then if FG.vY then DF.dY=(FG.oY-FG.pY)+3000+AS else DF.dY=FG.XT+\n3000+AS end\nreturn end\nlocal PA=(FG~=nil and SD~=nil)and(FG.b==SD.b)or false\nif DF.DY=='Orbit'then\nif PA and SD.vY then\nlocal GH=(SD.oY or 0)- (SD.pY or 0)local HJ=SD.XT or 0\nDF.dY=R.O(GH,HJ)+1500+AS elseif\nnot PA and FG.vY then local GH=(FG.oY or 0)- (FG.pY or 0)\nlocal HJ=FG.XT or 0\nDF.dY=R.O(GH,HJ)+5000+AS elseif\n(not PA and not FG.vY)or(PA and not SD.vY)then DF.dY=\n(FG.XT or 0)+3000+AS end elseif DF.eR~=nil and DF.eR>5000 then DF.dY=DF.eR else if FG.vY and DF.eR==0 then local GH=\n(FG.oY or 0)- (FG.pY or 0)local HJ=FG.XT or 0\nDF.dY=\nR.O(GH,HJ)+3000+AS else\nDF.dY=(FG.XT or 0)+3000+AS end end end\nRW=(function()local PA={}PA.DI={}PA.FI={}PA.GI={}PA.HI={}function PA:uQ(AS,SD)while#PA.HI>0 do\nE.U(PA.HI)()end end\nfunction PA:JI(SD,AS)if SD==nil then SD=true end\nfor DF,FG in\npairs(AS)do\nif SD then FG.deactivate()E.W(PA.HI,FG.activate)else\nFG.activate()E.W(PA.HI,FG.deactivate)end end end\nfunction PA:OI()PA:JI(true,PA.DI)end\nfunction PA:AI()\nPA:JI(false,PA.DI)end\nfunction PA:KI()PA:JI(true,PA.FI)end\nfunction PA:LI()\nPA:JI(false,PA.FI)end\nfunction PA:wU()PA:JI(true,PA.GI)end\nfunction PA:lU()\nPA:JI(false,PA.GI)end\nreturn PA end)()\nfunction YE(SD,AS,PA)local JK=j\nlocal HJ=p\nlocal KL=h\nlocal aimStrength=0.3 --export: Aim Strength -- 0.05 to ~3 (no real limit but beyond these values has less/no effect or may cause problems) if your ship often swings past where it's trying to aim and wobbles back and forth, reduce this. if you want it to snap at a point faster/stronger(smaller nimble ships) increase it.\nlocal FG=\nSD*pitchSpeedFactor*KL.ZI+AS*rollSpeedFactor*KL.XI+PA*yawSpeedFactor*KL.CI\nUE=0\nlocal GH=KL.VI:cross(KL.XI):normalize()local DF=KL.VI:cross(\n-KL.ZI):normalize()if\n(IE==nil)then IE=pid.new(0.02,0,0.2)OE=pid.new(0.1,0,0.1)\nPE=pid.new(0.1,0,0.1)end\nif HJ.MY or\n(\nKL.IY*3.6 <100 and\n(JK.jT or(\nnot KL.PY.vY and KL.uR<KL.PY.XT+1000))and not HJ._R and HJ.zR.cR and R.A(SD)<0.001)then JK.BU='Flat'GW=\nKL.VI:cross(KL.CI)+FG else GW=FG end\nif KL.VI:len()>0.01 and Z.xQ()>0.0 then local LZ=1.0\nif autoRoll==true and KL.BI>\nLZ and AS==0 then\nlocal XC=A.t(0,KL.BI-30,KL.BI+30)if(AE==nil)then\nAE=pid.new(autoRollFactor*0.01,0,autoRollFactor*0.1)end\nAE:inject(XC-KL.NI)\nlocal CV=AE:get()GW=GW+CV*KL.XI end\nlocal ZX=20.0\nif\nturnAssist==true and KL.BI>ZX and SD==0 and PA==0 then local XC=turnAssistFactor*0.1\nlocal BN=turnAssistFactor*0.025\nlocal NM=((KL.BI-\nZX)/ (180-ZX))*180\nlocal Mq=0\nif NM<90 then Mq=NM/90 elseif NM<180 then Mq=(180-NM)/90 end\nMq=\nMq*Mq\nlocal CV=-KL.MI*BN*(1.0-Mq)local VB=XC*Mq\nGW=GW+\nVB*KL.ZI+CV*KL.CI end end\nif HJ._R or JK.rR or JK.oR then\nlocal LZ=A.i(A.t(KL.IY,80,150),80,150,0,1)\nif HJ._R and KL.IY>80 then if not JK.jT or JK.rR then UE=0 elseif R.A(JW())<2 or\nR.A(JW())>170 then UE=0 else\nUE=A.t(JW()*2,-p.zR.qT,p.zR.qT)*LZ end end end\nif JK.oR or JK.DY=='Orbit'then\naimStrength=A.t(aimStrength-0.1,0.2,0.4)JK.BU='Orbit Hold'\nif not JK.XY then\nif\nKL.uR<JK.yR and KL.SY<0 and JK.jT then JK.BU='Orbit Atmo Pitch'GW=-\nDF:rotate((JK.AU)*S.k,GH):cross(KL.XI)if JK.DY=='Orbit'then\nGW=((SE(HJ.KT)):rotate(\n(JK.AU)*S.k,GH)):cross(KL.XI)end elseif KL.TY.lY< (JK.dY-100)or\nKL.TY.lY> (JK.dY+100)then JK.BU='Orbit Pitch'\nGW=-DF:rotate(\n(gW())*S.k,GH):cross(KL.XI)\nif JK.DY=='Orbit'then\nGW=(SE(HJ.KT)):rotate((gW())*S.k,GH):cross(KL.XI)if R.A(JW())<30 and R.A(JW())>1 and KL.IY>50 then\nJK.BU='Orbit T2'\nGW=((DE((SE(HJ.KT))).qI)):rotate(((gW())*S.k)*1.5,GH):cross(KL.XI)end end else JK.BU='Orbit Flat'GW=KL.VI:cross(KL.CI)FE=GW+\nKL.wI:cross(-KL.XI)if JK.DY=='Orbit'then\nGW=(SE(HJ.KT)):cross(KL.XI)\nif R.A(JW())<30 and R.A(JW())>1 then GW=\n((DE((SE(HJ.KT))).qI)):cross(KL.XI)+EE*KL.ZI end end end\nif\n(R.A(JW())>80 or KL.IY<10)and JK.DY=='Orbit'then GW=\n((SE(HJ.KT)):project_on_plane(KL.XI)):cross(KL.XI)+FG\nGW=GW+\nKL.VI:cross(KL.CI)end else GW=KL.wI:cross(-KL.XI)+FG\nif JK.DY=='Orbit'then\nGW=(SE(HJ.KT)):cross(KL.XI)end end\nGW=GW+\n-GH:rotate(UE*S.k,KL.XI):cross(KL.ZI)+FG\nGW=vec3{A.t(GW.x,-\naimStrength,aimStrength),A.t(GW.y,-aimStrength,aimStrength),A.t(GW.z,-\naimStrength,aimStrength)}end\nif JK.rR then JK.BU='Alt Hold'GW=-\nDF:rotate((JK.AU)*S.k,GH):cross(KL.XI)+FG\nGW=GW+-GH:rotate(UE*S.k,KL.XI):cross(KL.ZI)end\nif HJ._R then if\nJK.DY=='agg'then GW=(SE(HJ.KT)):cross(KL.XI)GW=GW+\nKL.VI:cross(KL.CI)end\nif\nJK.DY=='reEntry'or JK.DY=='Space Braking'then JK.BU='Target'\nGW=((SE(HJ.KT))):cross(KL.XI)GW=GW+KL.VI:cross(KL.CI)end\nif JK.DY=='Atmo Travel'then\nif R.A(eW())>90 then GE=0 else GE=(JK.AU)*S.k end\nif\n(R.A(JW())>90 and KL.IY>50)or KL.IY<20 then JK.BU='TargetFlat'\nGW=((SE(HJ.KT)):project_on_plane(KL.XI)):cross(KL.XI)GW=GW+KL.VI:cross(KL.CI)elseif R.A(JW())<30 and\nR.A(JW())>1 and KL.IY>50 then JK.BU='T2'\nGW=\n((DE((SE(HJ.KT))).qI)):rotate(R.P(\nGE*1.5,90),GH):cross(KL.XI)+EE*KL.ZI else JK.BU='Pitch Target'\nGW=((SE(HJ.KT)):rotate(GE,GH)):cross(KL.XI)end\nGW=GW+\n-GH:rotate(UE*S.k,KL.XI):cross(KL.ZI)end\nif PW and HJ.CT=='surface'then\nif JK.ZY and JK.IU<600 then JK.BU='Brake Landing'\nGW=(SE(HJ.KT)):cross(KL.XI)GW=(GW/3)+HE(HJ.KT):cross(-KL.CI)\nif(\nKL.uR-pW(HJ.KT))<200 or R.A(eW())>90 then\nJK.BU='Flat'GW=(SE(HJ.KT)):cross(KL.XI)GW=GW+\nKL.VI:cross(KL.CI)end\nif(KL.uR-pW(HJ.KT))<100 then HJ:wR(false)HJ:QT(true)end end end\nif\nJK.DY=='Transfer'or(HJ.CT=='space'and not JK.jT)or\n(JK.DY=='Space Braking'and(KL.PY.b~=HJ.LT.b or\nOW.dist(KL.UY,HJ.LT.ZT)>200000))then\nif R.A(wW())>\n60 or\n(KL.IY*3.6 <=3000 and HJ.CT=='surface')or\n(KL.IY*3.6 <500 and HJ.CT=='space')then JK.BU='Target'\nGW=HE(HJ.KT):cross(KL.XI)else JK.BU='TCross'\nGW=DE(HE(HJ.KT)).qI:cross(KL.XI)end\nif JK.jT then GW=GW+\n-GH:rotate(UE*S.k,KL.XI):cross(KL.ZI)end end\nif lW~='ninety'then\nGW=\nvec3{A.t(GW.x,-aimStrength,aimStrength),A.t(GW.y,-aimStrength,aimStrength),A.t(GW.z,\n-aimStrength,aimStrength)}+FG else GW=GW+FG end end\nif JK.aY and KL.IY>55 and not JK.ZY then JK.BU='Stall Protect'GW=-\nKL.wI:cross(KL.XI)+FG\nGW=GW+-\nGH:rotate(UE*S.k,KL.XI):cross(KL.ZI)end\nif JK.lR then GW=KL.VI:cross(KL.XI)\nGW=\nvec3{A.t(GW.x,-aimStrength,aimStrength),A.t(GW.y,\n-aimStrength,aimStrength),A.t(GW.z,-aimStrength,aimStrength)}+FG end\nif JK.kR then GW=KL.VI:cross(-KL.XI)\nGW=\nvec3{A.t(GW.x,-aimStrength,aimStrength),A.t(GW.y,\n-aimStrength,aimStrength),A.t(GW.z,-aimStrength,aimStrength)}+FG end\nif JK.jR then\nif JK.jT then GW=vec3(J.rQ()):cross(-KL.XI)GW=GW+-\nGH:rotate(UE*S.k,KL.XI):cross(KL.ZI)\nGW=vec3{A.t(GW.x,-aimStrength,aimStrength),A.t(GW.y,\n-aimStrength,aimStrength),A.t(GW.z,-aimStrength,aimStrength)}else GW=vec3(J.rQ()):cross(-KL.XI)\nGW=vec3{A.t(GW.x,-aimStrength,aimStrength),A.t(GW.y,\n-aimStrength,aimStrength),A.t(GW.z,-aimStrength,aimStrength)}end end\nif JK.tR then GW=(SE(_Q.VY)):cross(KL.XI)GW=GW+-\nGH:rotate(UE*S.k,KL.XI):cross(KL.ZI)end\nif HJ._R and JK.jT and JK.CY then\nif not HJ.MY then local LZ=R.A(eW())if LZ>=170 then GW=GW+\n(0.12*KL.CI)end end\nif p.CT=='surface'then local LZ=KL.NI or 0\nlocal ZX=A.t(-LZ*0.02,-aimStrength,aimStrength)GW=GW+ZX*KL.XI end end\nreturn GW end\nfunction JE(PA,AS,SD)local yu=j\nlocal CV=YW\nlocal LZ=p\nlocal ty=1\nlocal VB=0\nlocal er=1\nN:iQ('torque',AS,ty,'airfoil','','',er)N:oQ('brake',SD)local rt=''local we=vec3()local ZX=false\nlocal DF='primary'\nlocal KL='secondary'local XC='tertiary'local NM='thrust analog longitudinal'local BN='thrust analog lateral'\nlocal Mq='thrust analog vertical'local qw='vertical airfoil'local FG='lateral airfoil'\nlocal GH=N.DR:OW(D.j)==G.f\nlocal HJ=N.DR:OW(D.h)==G.f\nlocal JK=N.DR:OW(D.g)==G.f\nif\n(GH)then rt=rt..' , '..NM\nwe=we+N.DR:PW(D.j)else if CV.nT~=0 then\nN.DR:KW(D.j,CV.nT)end\nlocal ui=N.DR:AW(NM,D.j)\nif\n(\n(h.wY>=0.1 and yu.oU)or(not yu.jT and yu.pU)or\n(yu.pU and yu.oU))and h.eI>0 then\nif yu.gR=='primary'then N:oQ(KL..' , '..XC,vec3(),ty)if yu.jT then Z.cQ('primary',\nyu.tU[1]*h.eI)else\nZ.cQ('primary',yu.tU[3]*h.eI)end elseif yu.gR=='all'then N:oQ(NM,ui,ty)elseif\nyu.gR=='locked'then N:oQ(KL..' , '..XC,ui,ty)if yu.jT then\nZ.cQ('primary',yu.tU[1])else Z.cQ('primary',yu.tU[3])end elseif\nyu.gR=='hybrid'then local jh=0\nlocal hg=0\nlocal pl=0\nlocal gf=0\nlocal lk=0\nlocal kj=0\nlocal op=0\nif\nyu.jT and yu.uU[1]>0 or not yu.jT and yu.uU[3]>0 then gf=h.eI*3.9\nlk=\n(A.i(A.t(gf,300,330),300,330,0,30))/100\nkj=\n(A.i(A.t(gf,330,360),330,360,0,30))/100\nop=\n(A.i(A.t(gf,360,390),360,390,0,30))/100\njh=(\n(A.i(A.t(gf,0,100),0,100,0,70))/100)+lk\nhg=\n((A.i(A.t(gf,100,200),100,200,0,70))/100)+kj\npl=(\n(A.i(A.t(gf,200,300),200,300,0,100))/100)+op else gf=h.eI*2.6\nlk=(A.i(A.t(gf,200,230),200,230,0,30))/100\nkj=(A.i(A.t(gf,230,260),230,260,0,30))/100\njh=\n((A.i(A.t(gf,0,100),0,100,0,70))/100)+lk\nhg=(\n(A.i(A.t(gf,100,200),100,200,0,70))/100)+kj end\nif yu.jT then Z.cQ('primary',yu.tU[1]*jh)\nZ.cQ('secondary',yu.yU[1]*hg)Z.cQ('tertiary',yu.uU[1]*pl)else\nZ.cQ('primary',yu.tU[3]*jh)Z.cQ('secondary',yu.yU[3]*hg)\nZ.cQ('tertiary',yu.uU[3]*pl)end end else N:oQ(NM,ui,ty)end end\nif(HJ)then\nif yu.RT then rt=rt..' , '..BN else N:oQ(BN,vec3(),VB,'','','',er)we=\nwe+N.DR:PW(D.h)end else local ui=N.DR:AW(BN,D.h)if not yu.RT then ui=vec3()end\nN:oQ(BN,ui,ty)\nif LZ._R and yu.jT then\nlocal op=h.VI:cross(h.XI):normalize()local pl=vec3()if JW()<0 then pl=-op*20 end\nif JW()>0 then pl=op*20 end\nN:oQ(FG,pl,ty,'','','',er)end end\nif(JK)then if yu.ET or yu.GU then rt=rt..' , '..Mq else rt=rt\nN:oQ(Mq,vec3(),VB,'','','',er)end\nwe=we+N.DR:PW(D.g)else\nlocal ui=N.DR:AW(Mq,D.g)if not yu.ET and not yu.GU then ui=vec3()end\nN:oQ(Mq,ui,ty,'airfoil','ground','',er)\nif\n(LZ._R and yu.jT)or(yu.rR)or(yu.oR and yu.jT)then\nif yu.DY=='Landing'then N:oQ(qw,h.VI*20,ty,'airfoil','','',er)elseif(\nh.uR<yu.yR or h.SY<-10)then\nN:oQ(qw,-h.VI*20,ty,'airfoil','','',er)elseif(yu.oR and yu.jT)then\nN:oQ(qw,-h.VI*20,ty,'airfoil','','',er)else local op=(h.uR-yu.yR)\nif R.A(op)<2 and R.A(h.SY)<0.3 then\nN:oQ(qw,vec3(),ty,'airfoil','','',er)else local pl=op>0 and 1 or-1\nlocal lk=A.t(R.A(op)/20,0.25,2.0)local kj=pl*(5+15*lk)\nN:oQ(qw,h.VI*kj,ty,'airfoil','','',er)end end end end\nif\n(N.DR:YW(D.j)==0 or N.DR:YW(D.j)< (h.IY*3.6)-10)then ZX=true end\nif(we:len()>S.o)then if\n(\nM.JR~=0 or ZX or R.A(h.wI:dot(h.XI))<0.95)then rt=rt..', brake'end\nN.DR:GW(D.j,0)N:oQ(rt,we,VB,'','','',er)end\nN:pQ('rocket_engine')end\nfunction gQ()local KL=j\nlocal HJ=YW\nlocal GH=p\npitchSpeedFactor=R.O(pitchSpeedFactor,0.01)\nyawSpeedFactor=R.O(yawSpeedFactor,0.01)rollSpeedFactor=R.O(rollSpeedFactor,0.01)\ntorqueFactor=R.O(torqueFactor,0.01)brakeSpeedFactor=R.O(brakeSpeedFactor,0.01)\nbrakeFlatFactor=R.O(brakeFlatFactor,0.01)autoRollFactor=R.O(autoRollFactor,0.01)\nturnAssistFactor=R.O(turnAssistFactor,0.01)local DF=M.FR+HJ.aT+J.DQ()\nlocal PA=M.GR+HJ.sT+J.FQ()local AS=M.HR+HJ.zT-J.GQ()local SD=M.JR+HJ.bT\nlocal FG=YE(DF,PA,AS)local JK=torqueFactor*(FG-h.rI)JK=JK-h.tI\nlocal LZ=-SD*(\nbrakeSpeedFactor*h.yI+brakeFlatFactor*h.wI)if not KL.bR then\nif M.FR==0 and M.HR==0 and M.GR==0 then JK=vec3()end end\nif KL.XY and KL.oR and not KL.ZY then\nlocal ZX=A.t(((\nh.TY.lY-KL.dY)*0.0001)*4,0.01,5)\nLZ=vec3(A.t(LZ.x,-ZX,ZX),A.t(LZ.y,-ZX,ZX),A.t(LZ.z,-ZX,ZX))end\nif\n\nGH._R and(HW==12.1 or HW==13.1 or\n((HW==0.1)and h.SY*3.6 >-100))and h.IY*3.6 <h.UU*3.6-50 then local ZX=2\nLZ=vec3(A.t(LZ.x,-ZX,ZX),A.t(LZ.y,-ZX,ZX),A.t(LZ.z,-ZX,ZX))end\nif GH.MY==true then local CV=5\nif KL.JU then CV=7 end\nLZ=LZ*CV\nlocal XC=h.NI or 0\nlocal ZX=A.t(-XC*0.02,-1,1)JK=JK+ (ZX*h.XI)end\nif KL.rR then\nLZ=-M.JR*h.XI*((h.nY+h.mY)*3.6)end\nJE(FG,JK,LZ)end\nfunction QW()\nif B.XE~=nil then local DF=B.XE\nlocal PA=false\nlocal AS=h.uR\nlocal SD=DF.CE()PA=\nDF.EE()and AS>=SD-100 and AS<=SD+110\nreturn\n{fR=DF.EE(),NU=DF.NE(),uI=DF.wE(),iI=DF.ME(),oI=DF.qE(),RU=DF.VE(),cY=SD,EU=PA}else return\n{fR=false,NU=0,uI=0,iI=5,oI=5,RU=9001,cY=9001,EU=false}end end\nc=(function()local PA={}PA.pI={}PA.lI='_'PA.hU={}PA.kI=nil\nPA.RI=nil\nPA.oE=nil\nfunction PA:MU(DF,SD,AS)PA.kI=SD\nPA.jI=AS\nPA.oE=DF\nlocal FG=0\nfor GH,HJ in ipairs(DF)do if PA.RI==nil then PA.RI=HJ end\nlocal JK=HJ.hE()\nif\nE.hI(PA.jI,JK)then PA.RI=HJ\nFG=2 elseif E.hI(PA.kI,JK)and FG<2 then PA.RI=HJ\nFG=1 end end\nPA:gI()PA:fI()end\nfunction PA:dI(AS)PA:sI()\nif PA.RI~=nil then PA.RI.lE(PA.jI)PA:aI(false)end\nPA.RI=AS\nPA.RI.dE(PA.jI,1)PA:fI()PA:zI()PA:aI()\nQE:xI('ConfigDBChanged')end\nfunction PA:hT(SD,AS)\nif SD==nil then O('Config:getValue(nil) error')return end\nif PA.pI[SD]~=nil then return PA.pI[SD]end\nif PA.hU[SD]~=nil then return\nPA.hU[SD]end\nreturn AS end\nfunction PA:aU(AS,SD)return PA:hT(PA.lI..AS,SD)end\nfunction PA:sR(AS,SD,DF)\nPA:cI(AS,SD,DF)end\nfunction PA:nU(AS,SD,DF)PA:cI(PA.lI..AS,SD,DF)end\nfunction PA:cI(SD,AS,DF)if DF==nil then DF=true end\nPA.pI[SD]=AS\nif DF then PA:aI()end\nQE:xI('ConfigChange')QE:xI('ConfigChange'..SD)end\nfunction PA:aI(AS)if PA.RI==nil then return end\nif AS==nil then AS=true end\nlocal DF={}for GH,FG in\npairs(PA.pI)do local HJ=GH:find(PA.lI)~=nil\nif not HJ or AS then DF[GH]=FG end end\nlocal SD=KE(DF)\nPA.RI.gE(PA.kI,SD)end\nfunction PA:fI()if PA.RI==nil then return end\nlocal DF=PA.RI.fE(PA.kI)\nif DF==''then return end\nlocal SD,AS=load('return '..DF)\nif SD==nil then\nO('Error loading config from databank, resetting to default!')O(DF)O(AS)PA.RI.lE(PA.kI)else PA.pI=SD()end end\nfunction PA:sI()local AS={}for DF,SD in pairs(PA.pI)do local FG=DF:find(PA.lI)~=nil\nif FG then AS[DF]=SD end end\nPA.vI=AS end\nfunction PA:zI()for AS,SD in pairs(PA.vI)do PA.pI[AS]=SD end end\nfunction PA:gI()\nfor AS,SD in pairs(PA.oE)do if SD~=PA.RI then SD.lE(PA.jI)end end end\nfunction PA:bI(AS)local SD=AS.hE()\nfor DF,FG in ipairs(SD)do if\nFG~=PA.kI and FG~=PA.jI then AS.lE(FG)end end end\nreturn PA end)()\nv={BT='ms',MT='mp',qT='mr',sY='ws',tT='hh',eT='sc',wT='sm',uT='bp',cR='sf',MY='lm',aR='ag',nI='se',mI='mu',_I='rb',QO='rw',WT='mv',WO='uv',FT='hs',EO='mk',RO='rd',TO='ud',gU='ap',zU='cd',YO='cw',gT='tt',fT='mvs',dT='al'}LE={ST=nil,UO=nil}function LE:new(PA)local AS={}setmetatable(AS,self)\nself.__index=self\nAS.ST=PA\nreturn AS end\nfunction LE:IO()local PA='dead'\nif\nself.UO~=nil then PA=coroutine.status(self.UO)end\nif PA=='suspended'then coroutine.resume(self.UO)elseif PA=='dead'then\nself.UO=coroutine.create(self.ST)coroutine.resume(self.UO)end end\nfunction hQ(AS,PA)\nlocal GH=getRoll(vec3(PA.fW()),vec3(AS.NW()),vec3(AS.qW()))local XC=vec3(AS.m())local JK=vec3(AS.NW())\nlocal SD=vec3(AS.MW())local DF=vec3(AS.qW())local HJ=vec3(PA.fW())\nlocal FG=vec3(AS.sa())\nlocal CV={VI=HJ,CI=SD,XI=JK,ZI=DF,yI=XC,wI=XC:normalize(),rI=vec3(AS.eW()),tI=vec3(AS.rW()),IY=XC:len(),NI=GH,BI=R.A(GH),MI=A.r(GH),nY=XC:dot(JK),mY=XC:dot(\n-DF),SY=XC:dot(-HJ),SI=AS.kW(),UY=FG,wY=Z.xQ(),UU=AS.tW(),OY=AS.pW(),TU=PA.bW(),maxBrake=AS.iW(),SO=AS.oW(),eI=Z.vQ(),DO=AS.jW(),rY=AS.hW(),PY=jW(FG),uR=pW(FG),SU=ZE(JK,SD,DF,HJ,XC),OO=B.OO,FO=\n(\nB.OO~=nil and(W(B.OO[\"raycast\"])=='function'or\n(W(B.OO.export)=='table')))and true or false,GO=\nB.PO>0,HO=B.AO>0,PO=B.PO,AO=B.AO,JO=nil,KO=nil,AY=nil,LO=false}CV.jT=(CV.wY or 0)>0\nCV.ZO=CV.FO or CV.GO or CV.HO\nif CV.ZO then if CV.FO then local VB=CV.OO.raycast()\nif VB~=nil and VB.hit then CV.JO=VB.distance end end\nif\nCV.GO and(CV.wY or 0)>0.1 then\nfor VB,hv in ipairs(B.XO)do\nif W(hv[\"getMaxDistance\"])=='function'and\nW(hv[\"getDistance\"])=='function'then\nCV.KO=R.O(CV.KO or 0,hv[\"getMaxDistance\"](hv))local BN=hv[\"getDistance\"](hv)if BN>=0.01 and\n(CV.AY==nil or BN<CV.AY)then CV.AY=BN end end end end\nif CV.HO then\nfor VB,hv in ipairs(B.CO)do\nif W(hv[\"getMaxDistance\"])=='function'and\nW(hv[\"getDistance\"])=='function'then\nCV.KO=R.O(CV.KO or 0,hv[\"getMaxDistance\"](hv))local BN=hv[\"getDistance\"](hv)if BN>=0.01 and\n(CV.AY==nil or BN<CV.AY)then CV.AY=BN end end end end end\nlocal KL=CV.JO\nlocal LZ=CV.AY\nlocal ZX=nil\nif KL~=nil and KL>0 then ZX=KL end\nif LZ~=nil and\nLZ>0 then if ZX==nil or LZ<ZX then ZX=LZ end end\nif ZX~=nil then\nCV.LO=(KL~=nil and LZ~=nil and KL>LZ)or false\nCV.AY=A.e(ZX,0.01)else CV.AY=nil end\nCV.QU=XE(CV)CV.kY=CE(CV)CV.TY=VE(CV)return CV end\nfunction XE(PA)local AS=0\nlocal SD=j\nlocal FG=PA.maxBrake\nif(FG==nil)then FG=5000000 end\nif SD.jT then FG=FG/A.t(PA.IY/\n100,0.1,1)end\nlocal GH=50000*2000/\n3600\nlocal c2=GH*GH\nlocal DF=PA.IY\nif DF>0 then\nlocal bt=(FG*-1)/ (PA.SI+AS)local NM=0\nlocal Mq=0\nlocal k1=GH*R.GH(DF/GH)\nlocal k2=c2*R.D(k1/GH)/bt\nlocal VB=(GH*R.GH(0/GH)-k1)/bt\nlocal HJ=k2-c2*R.D(\n(bt*VB+k1)/GH)/bt\nNM=\nNM+HJ\nMq=Mq+VB\nlocal BN=R.Y(Mq/60)Mq=Mq-60*BN\nlocal XC=R.Y(Mq+0.5)local LZ='00'..XC\nlocal XC=LZ:sub(-2,-1)local KL='00'..BN\nlocal BN=KL:sub(-2,-1)local ZX=BN..':'..XC\nlocal su=R.Y(NM/200000)\nlocal CV=R.Y(NM)/1000\nlocal JK=R.Y(CV)/200\nreturn{distance=A.e(NM),VO=CV,BO=JK,NO=ZX}else return\n{distance=0,VO=0,BO=0,NO=\"00m:00s\"}end end\nfunction ZE(DF,up,SD,AS,PA)\nif PA:len()<20 then BE=0 else BE=-R.C(NE(up,PA,DF))end\nreturn{GR=getRoll(AS,DF,SD),FR=ME(AS,DF,SD),HR=BE}end\nfunction ME(PA,AS,SD)local DF=PA:cross(SD):normalize_inplace()local FG=R.J(A.t(DF:dot(-AS),\n-1,1))if\nDF:cross(-AS):dot(SD)<0 then FG=-FG end\nreturn FG*S.pl end\nfunction getRoll(PA,AS,SD)local DF=PA:cross(AS):normalize_inplace()local FG=R.J(A.t(DF:dot(SD),\n-1,1))if\nDF:cross(SD):dot(AS)<0 then FG=-FG end\nreturn FG*S.pl end\nfunction AW(AS,PA)local GH=h.IY*3.6\nif W(GH)~='number'or GH~=GH or GH==R.R or GH==-\nR.R then GH=0 end\nif AS==nil then AS=(\nh.UU*3.6)-120 end\nif\nW(AS)~='number'or AS~=AS or AS==R.R or AS==-R.R then AS=0 end\nif PA~=nil then GH=PA*3.6 end\nif\nW(GH)~='number'or GH~=GH or GH==R.R or GH==-R.R then GH=0 end\nlocal DF=(AS-GH)local FG=200\nif(h.wY or 0)>0.05 and AS>=1000 then FG=100 end\nlocal SD=A.t((A.yu(DF,-FG,FG)-0.5)*2,0,100)return SD end\nQE=(function()local PA={}PA.MO={}function PA:fU(DF,SD,AS)if PA.MO[DF]==nil then PA.MO[DF]={}end\nE.W(PA.MO[DF],{ST=SD,DT=AS})end\nfunction PA:xI(AS)\nif PA.MO[AS]~=nil then for SD,DF in\nipairs(PA.MO[AS])do DF.ST(DF.DT)end end end\nreturn PA end)()\nfunction fW()\nB={gW=nil,eE=nil,WE=nil,XE=nil,qO=nil,wO=nil,oE={},eO={},GI={},qU=nil,xE={},OO=nil,XO={},PO=0,rO=nil,CO={},AO=0,tO=nil}\nfor PA,AS in pairs(Z)do\nif\nW(AS)==\"table\"and W(AS.export)==\"table\"and AS.getClass then local SD=AS.getClass():lower()AS.yO=PA\nAS.uO=SD\nif\nSD:find(\"coreunit\")then B.gW=AS elseif SD:find(\"screen\")then B.rO=AS elseif SD:find(\"radar\")then E.W(B.xE,AS)elseif\nSD:find(\"warpdriveunit\")then B.eE=AS elseif SD:find(\"databankunit\")then E.W(B.oE,AS)elseif SD:find(\"shieldgenerator\")then\nB.WE=AS elseif SD:find(\"weapon\")then E.W(B.eO,AS)elseif SD:find(\"gyrounit\")then B.qO=AS elseif\nSD:find(\"antigravitygeneratorunit\")then B.XE=AS elseif SD:find(\"combatdefense\")then B.wO=AS elseif SD:find('manualswitchunit')then\nE.W(B.GI,AS)elseif SD:find(\"telemeter\")then B.OO=AS elseif SD:find(\"hover\")then E.W(B.XO,AS)B.PO=B.PO+1 elseif\nSD:find(\"verticalbooster\")then E.W(B.CO,AS)B.AO=B.AO+1 end end end end\nfunction sW()B.qU=RW\nfor PA,AS in ipairs(B.oE)do AS.iO=AS.getLocalId()\nAS.n=B.gW.sW(AS.iO)end\nE.I(B.oE,function(PA,AS)return PA.iO<AS.iO end)\nfor PA,AS in ipairs(B.GI)do local SD=B.gW.sW(AS.getLocalId())\nif\nSD:lower():find('door')then E.W(B.qU.DI,AS)elseif SD:lower():find('forcefield')then\nE.W(B.qU.FI,AS)else E.W(B.qU.GI,AS)end end\nfor PA,AS in ipairs(B.xE)do\nAS.oO=(AS.yO=='slot21'or AS.yO=='slot14')end end\nfunction bQ()\nreturn{VY=vec3(H.sa()),kT=H.cv(),pO=H.zx(),BY=vec3(H.m())}end\nvQ=(function()local PA={}PA.lO={}PA.kO={}PA.jO={}\nPA.hO=nil\nPA.xE={}PA.gO=nil\nPA.fO=nil\nPA.dO=nil\nfunction PA:MU(AS)PA.xE=AS\nPA:sO()\nc.hU[v._I]=true\nc.hU[v.QO]=radarOn\nPA.aO={[qE.zO]=0,[qE.xO]=0,[qE.cO]=0}\nPA.vO={[qE.zO]={},[qE.xO]={},[qE.cO]={}}PA.bO={}PA.nO={}PA.mO={}PA._O={}PA.QP={}PA.WP={}PA.EP={}\nQE:fU('ConfigDBChanged',PA.NT,PA)PA:NT()end\nfunction PA:NT()PA:oT(c:hT(v._I))PA:iT(c:hT(v.QO))end\nfunction PA:uQ()\nif PA.RP then for AS,SD in ipairs(PA.jO)do SD:IO()end end\nPA:TP()PA:sO()end\nfunction PA:sO()\nif PA.hO~=\nnil then if PA.hO.cE()then return else PA.hO=nil end end\nfor AS,SD in pairs(PA.xE)do if SD.cE()and SD~=PA.hO then PA.hO=SD\nif PA.fO~=nil then\nJ.PQ(PA.dO,PA.fO)PA.dO=PA.hO.vE()J.OQ(PA.dO,PA.fO)end end end end\nfunction PA:oT(AS)if AS==nil then AS=not PA.RP end\nPA.RP=AS\nc:sR(v._I,PA.RP)end\nfunction PA:iT(AS)if PA.hO==nil then return end\nif AS==nil then AS=PA.fO==nil end\nif PA.fO~=\nnil then J.AQ(PA.fO)J.SQ(PA.gO)PA.fO=nil end\nif AS then PA.gO=J.YQ(\"RADAR\")PA.fO=J.TQ(PA.gO,\"radar\")\nPA.dO=PA.hO.vE()J.OQ(PA.dO,PA.fO)end\nc:sR(v.QO,AS)end\nfunction PA:TP()if PA.hO==nil then return end\nPA.bO=PA.hO.SR(0,1,nil,nil,nil,nil,nil)PA.nO=PA.hO.SR(0,0,{['constructKind']=5})\nPA.mO=PA.hO.SR(0,0,{['constructKind']=6})PA._O=PA.hO.SR(0,0,{['constructKind']=4})\nPA.QP=PA.hO.SR(0,0,{['isAbandoned']=true})PA.WP=PA.hO.SR(0,0,{['isMatching']=true})\nPA.EP=PA.hO.SR(0,0,{['constructKind']=7})end\nfunction PA:YP()if PA.hO==nil then return end\nlocal AS=PA.hO.mE()local SD=0\nif#AS>2500 then return end\nfor DF,FG in ipairs(AS)do\nif PA.kO[FG]==nil then local GH={}GH.iO=FG\nGH.n=PA.hO.OR(FG)\nGH.UP=PA.hO.PR(FG)GH.IP=PA.hO.AR(FG)GH.distance=PA.hO.TR(FG)\nGH.OP=PA.hO.RR(FG)GH.PP=PA.hO.YR(FG)GH.UR=PA.hO.UR(FG)\nPA.lO[#PA.lO+1]=GH\nPA.kO[GH.iO]=GH\nSD=SD+1\nif SD%10 ==0 then coroutine.yield()end end\nif DF%50 ==0 then coroutine.yield()end end end\nreturn PA end)()qE={cO='static',xO='dynamic',zO='abandoned'}\naQ=(function()local PA={}PA.kI=nil\nPA.RI=\nnil\nPA.oE=nil\nPA.AP=nil\nPA.SP={}PA.GT=nil\nfunction PA:MU(AS,SD)PA.kI=SD\nPA.oE=AS\nQE:fU('ConfigDBChanged',PA.NT,PA)PA:NT()end\nfunction PA:NT()for FG,GH in pairs(PA.oE)do\nGH.n=B.gW.sW(GH.iO)end\nPA.RI=nil\nlocal DF=0\nlocal SD=c:hT(v.RO)if SD~=nil then\nfor FG,GH in\npairs(PA.oE)do if GH.n==SD then PA.RI=GH\nDF=3\nbreak end end end\nif PA.RI==nil then\nfor FG,GH in pairs(PA.oE)do if\nPA.RI==nil then PA.RI=GH end\nlocal HJ=GH.hE()if E.hI(PA.kI,HJ)and DF<=1 then\nPA.RI=GH\nDF=1 end end end\nlocal AS=c:hT(v.TO)if AS~=nil then\nfor FG,GH in pairs(PA.oE)do if GH.n==AS then PA.AP=GH\nbreak end end end\nPA:fI()end\nfunction PA:dI(AS)PA.RI=AS\nlocal SD=B.gW.sW(PA.RI.iO)c:sR(v.RO,SD)\nPA:fI()end\nfunction PA:DP(AS)PA.AP=AS\nlocal SD=B.gW.sW(PA.AP.iO)c:sR(v.TO,SD)end\nfunction PA:aI()\nQE:xI('RoutesUpdated')if PA.RI==nil then return end\nPA.RI.gE(PA.kI,KE(PA.SP))end\nfunction PA:fI()if PA.RI==nil then return end\nPA.SP={}local AS=PA.RI.fE(PA.kI)\nif AS~=''then local DF,SD=load(\n'return '..AS)\nif DF==nil then\nO('Error loading routes from databank')O(AS)O(SD)else local FG=DF()if FG~=nil then PA.SP=FG\nE.I(PA.SP,function(GH,HJ)return GH.n<HJ.n end)end end end\nQE:xI('RoutesUpdated')end\nfunction PA:FP()\nif PA.GT~=nil then PA.GP=true\nPA.SP[PA.GT].HP=true end\nif p.QI~=nil then PA.JP=true\nPA.SP[p.QI].KP=true end end\nfunction PA:LP()local AS=false\nlocal SD=false\nE.I(PA.SP,function(DF,FG)return DF.n<FG.n end)\nfor DF,FG in ipairs(PA.SP)do if FG.ZP==true then FG.ZP=nil\nPA.GT=DF end\nif FG.HP==true then FG.HP=\nnil\nPA.GT=DF\nAS=true end\nif FG.KP==true then FG.KP=nil\np.QI=DF\nSD=true\nc:nU(v.zU,{p.QI,p.WI,PA.RI.n})end end\nif PA.GP and not AS then PA.GT=nil end\nif PA.JP and not SD then p:II()end\nPA.GP=false\nPA.JP=false\nPA:aI()end\nfunction PA:XP()\nlocal AS={n='Route '..(#PA.SP+1),p={},ZP=true}PA:FP()E.W(PA.SP,AS)PA:LP()return AS end\nfunction PA:CP(AS,SD)E.W(PA.SP[AS].p,SD)PA:aI()end\nfunction PA:VP(AS)PA:FP()E.U(PA.SP,AS)PA:LP()end\nfunction PA:BP(SD,AS)if\nPA.SP[SD]==nil then return end\nif PA.SP[SD].p==nil then return end\nif\nPA.SP[SD].p[AS]==nil then return end\nif p.QI==SD and p.WI>=AS then p.WI=p.WI-1 end\nE.U(PA.SP[SD].p,AS)PA:aI()end\nfunction PA:NP(SD,AS)if PA.SP[SD]==nil then return end\nPA:FP()PA.SP[SD].n=AS\nPA:LP()end\nfunction PA:MP(DF,SD,AS)\nif PA.SP[DF]==nil then return end\nif PA.SP[DF].p==nil then return end\nif\nPA.SP[DF].p[SD]==nil then return end\nPA.SP[DF].p[SD].n=AS\nPA:aI()end\nfunction PA:qP(SD,AS,DF)if PA.SP[SD]==nil then return end\nif PA.SP[SD].p==nil then return end\nlocal GH=#PA.SP[SD].p\nlocal FG=E.U(PA.SP[SD].p,AS)if\nDF>GH then DF=GH end\nif DF<1 then DF=1 end\nE.W(PA.SP[SD].p,DF,FG)\nif\np.QI==SD then if p.WI==AS then p.WI=DF elseif p.WI==DF then p.WI=AS end end\nPA:aI()return DF end\nfunction PA:TI(AS)if PA.SP[AS]==nil then return 0 end\nif PA.SP[AS].p==nil then return 0 end\nreturn#PA.SP[AS].p end\nfunction PA:EI(SD,AS)if PA.SP[SD]==nil then return end\nif PA.SP[SD].p==nil then return end\nif PA.SP[SD].p[AS]==nil then return end\nlocal HJ=PA.SP[SD].p[AS]local GH=0\nlocal FG=0\nif HJ.s~=nil and HJ.s~=0 then GH=HJ.s end\nif HJ.b~=nil and\nHJ.b~=0 then FG=HJ.b end\nlocal DF=wE({wP=HJ.c.x,eP=HJ.c.y,uR=HJ.c.z,b=FG,s=GH})return DF end\nfunction PA:rP(SD,AS)if PA.SP[SD]==nil then return end\nif PA.SP[SD].p==nil then return end\nif PA.SP[SD].p[AS]==nil then return end\nlocal JK=PA.SP[SD].p[AS]local HJ=0\nlocal GH=0\nif JK.s~=nil then HJ=JK.s end\nif JK.b~=nil then GH=JK.b end\nlocal FG=E.E({HJ,GH,JK.c.x,JK.c.y,JK.c.z},',')local DF='::pos{'..FG..'}'return DF end\nfunction PA:xU()if PA.RI==nil then return end\nreturn PA.RI.n end\nreturn PA end)()\naW=(function()local PA={}PA._R=false\nPA.tP=nil\nPA.yP={}\nfunction PA:MU()c.hU[v.nI]=PA._R\nc.hU[v.mI]={}QE:fU('ConfigDBChanged',PA.NT,PA)PA:NT()end\nfunction PA:NT()PA._R=c:hT(v.nI)PA.yP={}local AS=c:hT(v.mI)for SD,DF in pairs(AS)do\nPA.yP[DF]=true end end\nfunction PA:QQ(SD,AS)if\nnot PA._R then return end\nif SD.uP~=nil and PA.yP[SD.uP]then return end\nif SD.iP==nil then O('Invalid sound file')return end\nif\nJ.EQ()==0 then J.QQ(SD.iP)PA.tP=SD elseif AS or\n(PA.tP~=nil and PA.tP.oP<=SD.oP)then J.QQ(SD.iP)PA.tP=SD end end\nfunction PA:pP(AS,SD)if SD==nil then SD=PA.yP[AS]==true end\nPA.yP[AS]=eE(SD,nil,true)c:sR(v.mI,E.lP(PA.yP))end\nreturn PA end)()\nrE={kP='ms',jP='mb',hP='ud',vU='ae',bU='ad',rU='st',UI='dr',YI='wr'}\nmW={kP={iP='SagaHUD/UI_Select.mp3',oP=0,uP=rE.kP},jP={iP='SagaHUD/UI_Back.mp3',oP=0,uP=rE.jP},hP={iP='SagaHUD/UI_Switch.mp3',oP=0,uP=rE.hP},vU={iP='SagaHUD/AutopilotEnabled.mp3',oP=1},bU={iP='SagaHUD/AutopilotDisabled.mp3',oP=1},rU={iP='SagaHUD/Startup.mp3',oP=1},UI={iP='SagaHUD/DestinationReached.mp3',oP=2},YI={iP='SagaHUD/WaypointReached.mp3',oP=1}}local RT=supportTTV or _G.gT or false\nlocal TY={['atmo']={['xs']={35.03,100},['s']={182.67,400},['m']={988.67,1600},['l']={5480,12800}},['space']={['xs']={35.03,100},['s']={182.67,400},['m']={988.67,1600},['l']={5480,12800}},['rocket']={['xs']={173.42,400},['s']={886.72,800},['m']={4720,6400},['l']={25740,50000}}}\nlocal YU={['atmo']={['xs']=50,['s']=163,['m']=1315,['l']=10461},['space']={['xs']=50,['s']=187,['m']=1496,['l']=15933},['rocket']={['xs']=366,['s']=736,['m']=6231,['l']=68824}}\nlocal UI={['atmospheric fuel tank']='atmo',['space fuel tank']='space',['rocket fuel tank']='rocket'}\nif RT then\ntE={[\"34191163\"]=130,[\"590217537\"]=170,[\"590217536\"]=220,[\"590217543\"]=290,[\"3510956948\"]=520,[\"4068567109\"]=680,[\"4068567110\"]=880,[\"4068567111\"]=1140,[\"103319202\"]=2080,[\"801882806\"]=2700,[\"801882807\"]=3510,[\"801882804\"]=4560,[\"681896062\"]=16640,[\"4181605365\"]=21632,[\"4181605362\"]=28120,[\"4181605363\"]=36560,[\"1663412227\"]=400,[\"3126840739\"]=800,[\"2477859329\"]=6400,[\"4180073139\"]=50000,[\"2723679405\"]=130,[\"4270367994\"]=170,[\"4270367989\"]=220,[\"4270367988\"]=290,[\"3660622849\"]=520,[\"3135113517\"]=680,[\"3135113516\"]=880,[\"3135113519\"]=1140,[\"2717114417\"]=2080,[\"3797917193\"]=2700,[\"3797917192\"]=3510,[\"3797917195\"]=4560,[\"1567224122\"]=16640,[\"1298642304\"]=21632,[\"1298642305\"]=28120,[\"1298642310\"]=36560,[\"xs\"]=100,[\"s\"]=400,[\"m\"]=1600,[\"l\"]=12800}\nyE={[\"2078334942\"]=0.9,[\"2216300178\"]=0.9,[\"2199218873\"]=0.9,[\"2268129307\"]=0.9,[\"4106743733\"]=0.9,[\"637265250\"]=0.9,[\"3580444026\"]=0.9,[\"319251893\"]=0.9,[\"3464984253\"]=0.81,[\"1104915586\"]=0.81,[\"121825379\"]=0.81,[\"185422505\"]=0.81,[\"4188179628\"]=0.81,[\"55848614\"]=0.81,[\"4169669296\"]=0.81,[\"2010490156\"]=0.81,[\"3464984250\"]=0.729,[\"1104915587\"]=0.729,[\"121825378\"]=0.729,[\"185422504\"]=0.729,[\"4188179631\"]=0.729,[\"55848615\"]=0.729,[\"4169669297\"]=0.729,[\"2010490159\"]=0.729,[\"3464984251\"]=0.6561,[\"1104915584\"]=0.6561,[\"121825381\"]=0.6561,[\"185422511\"]=0.6561,[\"4188179630\"]=0.6561,[\"55848612\"]=0.6561,[\"4169669302\"]=0.6561,[\"2010490158\"]=0.6561}else tE={gP='Loading',fP=TY,dP=YU,sP=UI}end\nfunction nQ()local HJ=J.HQ()local PA=J.isItemInClass\nlocal supportTTV=p and p.zR and p.zR.gT or(\nsupportTTV or _G.gT or false)local JK=B.gW\nlocal function DF(ZX,HJ,LZ)ZX.aP=0\nZX.zP=LZ\nZX.xP=0\nZX.cP=0\nZX.vP=HJ\nZX.bP=0 end\nuE={['atmo']={},['space']={},['rocket']={}}\nlocal atmoTankHandling=_G.nP or 0\nlocal spaceTankHandling=_G.mP or 0\nlocal rocketTankHandling=_G._P or 0\nlocal fuelTankOptimization=_G.QA or 0\nlocal containerOptimization=_G.WA or 0\nlocal GH=((\n(100- (5*fuelTankOptimization))/100))-1\nlocal FG=\n(((100- (5*containerOptimization))/100))-1\niE={['atmo']=(4- (4*(R.A(GH)+R.A(FG)))),['space']=(6- (6*(R.A(GH)+R.A(FG)))),['rocket']=(0.8- (0.8*(R.A(GH)+R.A(FG))))}local KL=tE\nif KL.fP==nil then KL={fP=TY,dP=YU,sP=UI}end\nKL.EA={['atmo']=atmoTankHandling,['space']=spaceTankHandling,['rocket']=rocketTankHandling}KL.RA={['atmo']=0.2,['space']=0.2,['rocket']=0.2}\nlocal function SD(ZX,XC,LZ)return\nZX.fP[XC][LZ][2]*(1+ (ZX.RA[XC]*ZX.EA[XC]))*iE[XC]end\nlocal function AS()local LZ=JK.getElementIdList()\nfor ZX=1,#LZ,1 do\nlocal CV={TA=LZ[ZX],n=JK.sW(LZ[ZX]),IP=JK.aW(LZ[ZX]),YA=JK.xW(LZ[ZX]),UA=JK.cW(LZ[ZX])}local XC=(CV.IP or\"\"):lower()CV.IA=KL.sP[XC]\nif\nCV.IA==nil then\nif XC:find(\"fuel tank\")then\nif\nXC:find(\"atmo\")or XC:find(\"atmospheric\")then CV.IA='atmo'elseif XC:find(\"rocket\")then CV.IA='rocket'elseif XC:find(\"space\")then CV.IA='space'end end end\nif CV.IA~=nil then\nif CV.UA>=KL.dP[CV.IA]['l']then CV.UP='l'elseif CV.UA>=\nKL.dP[CV.IA]['m']then CV.UP='m'elseif CV.UA>=KL.dP[CV.IA]['s']then CV.UP='s'elseif CV.UA>=\nKL.dP[CV.IA]['xs']then CV.UP='xs'end end\nif CV.UP and CV.IA then DF(CV,HJ,1)CV.OA=SD(KL,CV.IA,CV.UP)\nCV.PA=KL.fP[CV.IA][CV.UP][1]E.W(uE[CV.IA],CV)elseif CV.IA~=nil then local hp=KL.dP[CV.IA]\nif hp then\nif\nCV.UA>=hp['l']then CV.UP='l'elseif CV.UA>=hp['m']then CV.UP='m'elseif CV.UA>=hp['s']then CV.UP='s'elseif\nCV.UA>=hp['xs']then CV.UP='xs'end end\nif CV.UP then DF(CV,HJ,1)CV.OA=SD(KL,CV.IA,CV.UP)\nCV.PA=KL.fP[CV.IA][CV.UP][1]E.W(uE[CV.IA],CV)end end end end\nAS()\nif supportTTV then\nlocal function LZ(CV,BN,VB)local NM=0\nif W(tE)==\"table\"and tE.fP==nil then if CV~=nil then NM=\nI(tE[T(CV)])or 0 end\nif NM==0 and BN~=nil then\nNM=I(tE[T(BN)])or 0 end end\nif NM==0 and KL and KL.fP and VB and BN then\nlocal Mq=KL.fP[VB]if Mq and Mq[BN]then NM=Mq[BN][2]or 0 end end\nreturn NM end\nlocal function ZX(CV)if W(yE)==\"table\"then return yE[T(CV)]or 1 end\nreturn 1 end\nlocal XC={{\"Optimized\",\"Opt.\"},{\"Uncommon\",\"Unc.\"},{\"Advanced\",\"Adv.\"},{\"Exotic\",\"Exo.\"},{\"Atmospheric\",\"Atmo.\"}}\nfor VB,CV in pairs(uE)do\nfor BN,NM in ipairs(CV)do local we=JK.getElementItemIdById(NM.TA)local qw=we and\nJ.getItem(we)or nil\nlocal Mq=LZ(we,NM.UP,VB)if\nMq and Mq>0 then\nNM.OA=\nMq*(1+ (KL.RA[VB]*KL.EA[VB]))*iE[VB]*ZX(we)end\nif qw and qw.AA then NM.SA=qw.AA end\nif NM.n then NM.n=NM.n:gsub(\"[Ff]uel [Tt]ank\",\"\")for er=1,#XC do\nNM.n=NM.n:gsub(XC[er][1],XC[er][2])end\nNM.n=NM.n:gsub(\"%s+\",\" \")end end end\nfor CV,VB in pairs(uE)do\nfor BN,NM in ipairs(VB)do local Mq=JK.xW(NM.TA)local qw=\n(supportTTV and NM.SA)and NM.SA or(NM.PA or 0)if Mq and qw and\nMq<qw then qw=Mq end\nlocal we=(Mq-qw)if we<0 then we=0 end\nNM.YA=we\nif\nNM.OA and NM.OA>0 then NM.aP=A.e((we/NM.OA)*100,0.1)end\nNM.xP=nil end end end\ndo local LZ={}\nfor ZX,XC in pairs(Z)do\nif\nW(XC)==\"table\"and W(XC.getLocalId)==\"function\"then local ok,id=pcall(XC.getLocalId)if ok and W(id)==\"number\"then\nLZ[id]=true end end end\nfor ZX,XC in pairs(uE)do\nfor CV,VB in ipairs(XC)do VB.DA=LZ[VB.TA]or false end\nE.I(XC,function(CV,VB)\nif CV.DA~=VB.DA then return CV.DA and not VB.DA end\nif CV.TA and VB.TA and CV.TA~=VB.TA then return CV.TA<VB.TA end\nreturn(CV.n or\"\")< (VB.n or\"\")end)end end end\nfunction oE()local PA=tE\nlocal AS=J.HQ()local supportTTV=p and p.zR and p.zR.gT or\n(supportTTV or _G.gT or false)local ii=0\nfor SD,DF in\npairs(uE)do\nfor FG,GH in ipairs(DF)do GH.n=GH.n\nGH.zP=GH.YA or 0\nlocal HJ=B.gW.xW(GH.TA)\nif supportTTV and\nGH.SA~=nil then GH.YA=HJ-GH.SA else local JK=GH.PA or 0\nGH.YA=HJ-JK end\nif GH.OA and GH.OA>0 then\nGH.aP=A.e((GH.YA/GH.OA)*100,0.1)end\nlocal dt=AS- (GH.vP or AS)local dm=(GH.zP or\nGH.YA)-GH.YA\nif dt>0 then local JK=dm/dt\nif JK>0 then if not GH.bP or GH.bP<=\n0 then GH.bP=JK else\nGH.bP=(GH.bP*0.7)+ (JK*0.3)end end\nif GH.bP and GH.bP>0 then\nGH.xP=R.Y(R.O(0,GH.YA)/GH.bP)end\nGH.cP=GH.xP\nGH.vP=AS end\nii=ii+1\nif ii>5 then coroutine.yield()end end end end\nfunction tW()local PA=coroutine.status(pE)\nif PA~=\"dead\"then\nlocal AS,SD=coroutine.resume(pE)elseif PA==\"dead\"then pE=coroutine.create(oE)end end\npE=coroutine.create(oE)\nfunction EW()\nif B.eE~=nil then local FG=B.eE.tE()\nif FG==1 then FG='No Warpdrive'elseif FG==2 then FG='Broken'elseif FG==3 then\nFG='Warping'elseif FG==4 then FG='Parent Warping'elseif FG==5 then FG='Not Seated'elseif FG==6 then FG='Warp Cooldown'elseif FG==7 then\nFG='PvP Cooldown'elseif FG==8 then FG='Moving Docked Ship'elseif FG==9 then FG='No Container Linked'elseif FG==10 then\nFG='Planet Too Close'elseif FG==11 then FG='Destination Not Set'elseif FG==12 then FG='Destination Too Close'elseif FG==13 then\nFG='Destination Too Far'elseif FG==14 then FG='Not Enough Cells'elseif FG==15 then FG='Ready'end\nlocal AS=B.eE.getDistance()local DF=B.eE.yE()if\nFG=='Destination Not Set'then DF='No Destination'end\nlocal SD=B.eE.uE()\nlocal PA=B.eE.iE()return{HY=FG,FA=AS,GA=DF,HA=SD,JA=PA}else return\n{HY='Ready',FA=42000,GA='No Destination',HA=42,JA=42}end end\nfunction eE(PA,AS,SD)if PA then return AS else return SD end end\nfunction lE(PA)\nreturn PA and\n'<span style=\"color: springgreen;\">On</span>'or'Off'end\nfunction O(SD,PA,AS,DF)if\nPA~=nil and DF~=nil and DF>PA then return end\nif\nAS=='unit'or AS=='export'or AS=='__index'then return end\nif DF==nil then DF=0 end\nls=string.rep(' - ',DF)DF=DF+1\nif W(SD)==\"table\"then\nif AS==nil then J._(ls..'[table]')else J._(ls..'['..AS..'] [table]')end\nfor FG,GH in pairs(SD)do O(GH,PA,FG,DF)end else local FG=''\nif W(SD)==\"function\"then\nFG=\"[function]\"elseif W(SD)==\"thread\"then FG=\"[thread]\"elseif W(SD)==\"boolean\"then\nFG=eE(SD,\"TRUE\",\"FALSE\")elseif W(SD)==\"nil\"then FG=\"[nil]\"else FG=SD end\nif AS==nil then J._(ls..FG)else\nJ._(ls..'['..AS..'] '..T(FG))end end end\nfunction kE(AS,PA)if AS==nil then return'NaN'end\nif PA==nil then PA=false end\nlocal SD=R.A(AS)\nif SD<\neE(PA,1000,10000)then return A.e(AS)..' m'elseif SD<200000 then local km=AS/1000\nif km>10 then return\nA.e(km,1)..' km'else return A.e(km,0.1)..' km'end else local su=AS/200000\nif su>10 then return A.e(su,1)..' su'else\nreturn A.e(su,0.1)..' su'end end end\nfunction jE(PA)local AS=T(PA)if PA==nil then return PA end\nwhile true do\nAS,k=string.gsub(AS,\"^(-?%d+)(%d%d%d)\",'%1 %2')if(k==0)then break end end\nreturn AS end\nfunction dQ(AS,PA)if AS==nil then return AS end\nlocal FG={}local SD=\"(.-)\"..PA\nlocal HJ=1\nlocal GH,DF,JK=AS:find(SD,1)while GH do if GH~=1 or JK~=\"\"then E.W(FG,JK)end\nHJ=DF+1\nGH,DF,JK=AS:find(SD,HJ)end\nif HJ<=#AS then JK=AS:sub(HJ)\nE.W(FG,JK)end\nreturn FG end\nfunction hE(PA)return(PA:gsub(\"^%l\",string.upper))end\nfunction gE(PA)if W(PA)~='number'then return PA end\nlocal AS=R.Y(PA/86400)local SD=R.Y(\nPA/60/60%24)local DF=R.Y(PA/60%60)\nlocal PA=R.Y(PA%60)if PA<0 or SD<0 or DF<0 then return\"0s\"end\nif AS>0 then return\nAS..\"d \"..SD..\"h\"elseif SD>0 then return SD..\"h \"..DF..\"m\"elseif DF>0 then return\nDF..\"m \"..PA..\"s\"else return PA..\"s\"end end\nfunction fE(PA)local AS=jW(PA)return AS.b end\nfunction jW(PA)local AS=R.R\nlocal SD=nil\nfor DF,FG in pairs(cW[bW])do\nlocal GH=OW.dist(PA,FG.ZT)if GH<AS then AS=GH\nSD=FG end end\nif\nSD~=nil and SD.KA~=nil then local DF=cW[bW][SD.KA]\nif DF~=nil then\nlocal FG=OW.dist(PA,DF.ZT)-DF.pY\nlocal GH=DF.oY and(DF.oY-DF.pY)or 0\nlocal HJ=\nR.O(GH,DF.XT or 0)+20000\nif DF.vY and FG<=HJ then\nreturn DF,OW.dist(PA,DF.ZT)end end end\nreturn SD,AS end\nfunction dE(PA)local HJ=' *([+-]?%d+%.?%d*e?[+-]?%d*)'\nlocal GH,FG,SD,DF,AS=string.match(PA,'::pos{'..HJ..','..HJ..','..HJ..','..HJ..','..HJ..'}')GH=I(GH)FG=I(FG)SD=I(SD)DF=I(DF)AS=I(AS)\nreturn{wP=SD,eP=DF,uR=AS,b=FG,s=GH}end\nfunction xQ(PA)local AS=dE(PA)return wE(AS)end\nfunction wE(PA)\nif PA.uR==nil then return nil end\nif PA.b==nil or PA.b==0 then return vec3(PA.wP,PA.eP,PA.uR)end\nlocal AS=S.k*A.t(PA.wP,-90,90)\nlocal DF=S.k*(PA.eP%360)local SD=R.D(AS)local FG=cW[PA.s][PA.b]return\nvec3(FG.ZT)+ (FG.pY+PA.uR)*vec3(\nSD*R.D(DF),SD*R.S(DF),R.S(AS))end\nfunction vW()\nfor PA,AS in pairs(cW)do\nfor SD,DF in pairs(AS)do DF.b=SD\nDF.ZT=vec3(DF['center'])\nDF.TU=DF['gravity']DF.LA=DF['GM']DF.n=DF['name'][1]DF.ZA=DF['type'][1]\nDF.pY=DF['radius']DF.oY=DF['atmosphereRadius']DF.XA=DF['satellites']\nDF.vY=DF['hasAtmosphere']DF.XT=DF[\"surfaceMaxAltitude\"]\nDF.CA=DF[\"surfaceMinAltitude\"]local FG={}for GH,HJ in ipairs(DF['ores'])do E.W(FG,HJ)end\nDF.VA=FG\nif\nDF['hasAtmosphere']then DF.bY=DF['atmosphereRadius']-DF.pY end end end\nfor PA,AS in pairs(cW)do\nfor SD,DF in pairs(AS)do if DF.XA~=nil then\nfor FG,GH in pairs(DF.XA)do cW[PA][GH].KA=SD end end end end end\nfunction UW()local PA=h.UY\nlocal AS=h.wI\nfor SD,DF in pairs(cW[bW])do local JK=200000\nif DF.vY then JK=DF.oY*1.2 else\nJK=DF.pY*1.4 end\nlocal GH=DF.ZT-PA\nlocal HJ=GH:dot(AS)local FG=HJ^2- (GH:len2()-\nJK^2)\nif FG>=0 then local KL=R.w(FG)local ZX=HJ+KL\nlocal LZ=HJ-\nKL\nif LZ>0 then return DF,ZX,LZ elseif ZX>0 then return DF,ZX,nil end end end\nreturn nil,nil,nil end\nfunction sE(PA)local DF=h.UY\nlocal JK=jW(DF)local GH=200000\nif JK==nil then return nil,nil end\nif JK.vY==1 then GH=\nJK.oY*1.05 else GH=JK.pY*1.2 end\nlocal AS,HJ,SD=UW(DF,PA,GH)local FG=HJ\nif SD~=nil and HJ~=nil then FG=R.P(SD,HJ)end\nif FG~=nil then\nreturn AS,FG else return nil,nil end end\nfunction pW(PA)local AS=0\nif PA==nil then\nif B.gW.dW()==0 then PA=h.UY\nlocal SD=jW(PA)AS=\nOW.dist(vec3(SD.ZT),PA)-SD.pY else AS=B.gW.dW()end else PA=vec3(PA)local SD=jW(PA)\nAS=OW.dist(vec3(SD.ZT),PA)-SD.pY end\nreturn A.e(AS)end\nfunction CE(PA)local Mq=jW(PA.UY)local GH=PA.UY\nlocal VB=PA.yI\nlocal BN=GH-Mq.ZT\nlocal v2=VB:len2()\nlocal KL=BN:len()local mu=Mq.LA\nlocal ZX=\n((v2-mu/KL)*BN-BN:dot(VB)*VB)/mu\nlocal XC=mu/ (2*mu/KL-v2)local rt=ZX:len()local SD=ZX:normalize()local pd=XC*(1-rt)\nlocal ad=XC*(1+rt)local AS=pd*SD+Mq.ZT\nlocal FG=rt<=1 and-ad*SD+Mq.ZT or nil\nlocal HJ=R.w(XC*mu*(1-rt*rt))local er=FG and\n2*R.N*R.w(XC^3/mu)\nlocal we=R.J((ZX:dot(BN))/ (rt*KL))if BN:dot(VB)<0 then we=- (we-2*R.N)end\nlocal JK=R.J(\n(R.D(we)+rt)/ (1+rt*R.D(we)))local NM=JK\nif NM<0 then NM=NM+2*R.N end\nlocal DF=NM-rt*R.S(NM)\nlocal LZ=0\nlocal CV=0\nlocal qw=0\nif er~=nil then LZ=DF/ (2*R.N/er)CV=er-LZ\nqw=CV+er/2\nif we-\nR.N>0 then CV=LZ\nqw=CV+er/2 end\nif qw>er then qw=qw-er end end\nreturn\n{hY={BA=AS,NA=HJ/pd,MA=A.e(R.w(mu/pd)),uR=A.e(pd-Mq.pY)},jY={BA=FG,NA=HJ/ad,MA=A.e(R.w(\nmu/ad)),uR=A.e(ad-Mq.pY)},qA=VB,wA=GH,eA=rt,rA=er,tA=JK,yA=DF,fY=A.e(CV),gY=A.e(qw),uA=we}end\nfunction aE(PA,AS)local SD=PA+AS.pY\nif SD>0 then local DF=R.w(AS.LA/SD)return DF end\nreturn nil end\nfunction VE(PA)\nlocal AS=PA.kY.jY.uR\nlocal FG=PA.kY.hY.uR\nlocal DF=PA.kY.gY\nlocal SD=PA.kY.fY\nlocal GH=0\nif DF<=SD then zE=AS\nGH=PA.kY.jY.MA else zE=FG\nGH=PA.kY.hY.MA end\nreturn{lY=zE,YY=GH}end\nE=_G['table']\nfunction E.iA(PA)local AS={}if PA==nil then O(\"table.copy received NIL\")\nreturn AS end\nfor SD,DF in pairs(PA)do if W(DF)=='table'then AS[SD]=E.iA(DF)else\nAS[SD]=DF end end\nreturn\nsetmetatable(AS,getmetatable(PA))end\nfunction E.oA(PA)local AS=W(PA)local SD\nif AS=='table'then SD={}for FG,DF in pairs(PA)do if FG~='__index'then\nSD[E.oA(FG)]=E.oA(DF)end end else SD=PA end\nreturn SD end\nfunction E.pA(AS,PA)if PA==nil then return AS end\nfor SD,DF in pairs(PA)do E.W(AS,DF)end\nreturn AS end\nfunction E.hI(AS,PA,SD)if SD==nil then SD=false end\nlocal GH=false\nlocal DF=nil\nlocal FG=nil\nfor HJ,JK in pairs(PA)do\nif\nW(JK)==\"table\"then GH=E.hI(AS,JK)if GH then break end elseif JK==AS then GH=true\nDF=JK\nFG=HJ\nbreak end end\nreturn\neE(SD,FG,GH)end\nfunction E.find(PA,AS)return E.hI(PA,AS,true)end\nfunction E.lP(PA)local AS={}for DF,SD in pairs(PA)do\nE.W(AS,DF)end\nreturn AS end\nfunction E.lA(PA)local AS=0\nfor SD,DF in\npairs(PA)do AS=AS+1 end\nreturn AS end\nfunction E.kA(PA)\nlocal AS=0\nfor SD,DF in ipairs(PA)do AS=AS+DF end\nreturn AS end\nfunction E.jA(PA)return E.kA(PA)/#PA end\nfunction E.hA(AS,PA)\nif W(AS)=='table'then\nfor DF,SD in pairs(PA)do\nif\nAS[DF]==nil then\nif W(SD)=='table'then if W(PA[DF])=='table'then AS[DF]={}end\nAS[DF]=E.hA(AS[DF],PA[DF])elseif PA[DF]~=nil then AS[DF]=PA[DF]end end end else\nO('Error: table.join received ['..W(AS)..'] instead of a table')O(AS)end\nreturn AS end\nfunction E.O(PA)local AS=-R.R\nfor SD,DF in pairs(PA)do if DF>AS then AS=DF end end\nreturn AS end\nfunction E.P(PA)local AS=R.R\nfor SD,DF in pairs(PA)do if DF<AS then AS=DF end end\nreturn AS end\nfunction E.gA(PA)local AS=0\nfor SD in pairs(PA)do AS=AS+1\nif PA[AS]==nil then return false end end\nreturn true end\nfunction NE(PA,AS,SD)\nAS=AS:project_on_plane(PA)SD=SD:project_on_plane(PA)return\nR.K(AS:cross(SD):dot(PA),AS:dot(SD))end\nfunction xE(PA,AS)return vec3(PA):cross(vec3(AS))end\nfunction MW(PA,AS)if AS==nil then AS=h.UY end\nlocal AS=AS:project_on_plane(h.VI)return\nA.e(vec3(AS-\n(PA:project_on_plane(h.VI))):len())end\nfunction HE(PA,AS)local AS=AS\nif AS==nil then AS=h.UY end\nreturn vec3(AS-PA):normalize()end\nfunction cE(PA,AS)local AS=AS\nif AS==nil then AS=h.UY end\nreturn vec3(PA-AS):normalize()end\nfunction SE(PA)local SD=jW(h.UY)local AS=HE(PA,h.UY)local HJ=SD.ZT\nlocal GH=h.UY-HJ\nlocal DF=PA-HJ\nlocal FG=DF:cross(GH):normalize()return(FG:cross(GH)):normalize()end\nfunction DE(PA)local DF=j\nlocal FG=p\nlocal AS=-h.wI:angle_between(PA)*S.pl\nlocal HJ=(PA- (-h.wI))local SD=(HJ+PA):normalize()local GH=\nHJ+PA+HJ\nif DF.DY=='Transfer'or DF.DY=='standby'then\nif h.IY*3.6 >=\nFG.BT then lW='ninety'\nGH=(PA:normalize()- (-h.wI:normalize()))elseif h.IY*3.6 > (FG.BT/3)and h.IY*3.6 <FG.BT then\nlW='main'\nGH=HJ+ (PA+\n(HJ*(20*(1-A.t(wW()/45,0,1)))))else lW='main2'GH=HJ+PA+HJ+HJ end else lW='none'GH=HJ+PA+HJ end\nreturn{fA=AS,dA=HJ,sA=SD,qI=GH}end\nfunction NW()if h.IY<1 then return 0 else return\nA.e(((h.XI):angle_between(h.wI))*S.pl)end end\nfunction kW()if h.IY<1 then return 0 else\nreturn A.e(\n((h.wI:project_on_plane(h.VI)):angle_between(h.wI))*S.pl)end end\nfunction vE()if j.DY=='Transfer'and h.IY>1 then\nreturn A.e(\nHE(DE(p.KT).qI):angle_between(HE(h.XI))*S.pl,0.01)else return 0 end end\nfunction qW()local PA=j\nlocal AS=p\nlocal SD=h\nif PW then\nreturn A.e(\nHE(AS.LT.ZT,AS.KT):angle_between(HE(AS.LT.ZT,SD.UY))*S.pl,0.01)else\nreturn A.e(\nHE(AS.KT,SD.PY.ZT):angle_between(HE(SD.UY,SD.PY.ZT))*S.pl,0.01)end end\nfunction eW()\nreturn A.e(-\nR.C(NE(h.CI,-h.XI,HE(p.KT):project_on_plane(h.VI))),0.01)end\nfunction JW()return\nA.e(-\nR.C(NE(h.CI,-\nh.wI:project_on_plane(h.VI),SE(p.KT):project_on_plane(h.VI))),0.01)end\nfunction wW()if h.IY<1 then return 0 else return\nA.e(h.wI:angle_between(-HE(p.KT))*S.pl,0.01)end end\nfunction bE(PA)\nreturn{h.UY.x+PA.x,h.UY.y+PA.y,h.UY.z+PA.z}end\nfunction nE(PA)return{PA.x,PA.y,PA.z}end\nfunction mE()local AS=(jW(h.UY).ZT)\nlocal LZ=vec3(13771471,7435803,-128971)local ZX=LZ\nlocal FG=18000000\nlocal SD=400000\nlocal JK=OW.dist(LZ,h.UY)-FG\nlocal HJ=\nOW.dist(AS,h.UY)-SD\nlocal DF=false\nlocal PA=vec3()local GH=0\nlocal XC=0\nlocal KL=vec3()\nif\nJK<HJ then ZX=LZ\nGH=FG\nXC=R.A(JK)else ZX=AS\nGH=SD\nXC=R.A(HJ)end\nif JK<0 or HJ<0 then DF=true end\nif DF then KL=\n(HE(ZX,h.UY):normalize())*XC else KL=-\n(HE(ZX,h.UY):normalize())*XC end\nreturn{aA=K.tQ(bE(KL)),zA=XC}end\no={}\no.nR={WO=false,WT=false,mR=false,xA=240,cA=245,vA=235,bA=0,nA=nil,mA=nil,YO=false}\nfunction o:MU()c.hU[v.FT]=1\nc.hU[v.WO]=self.nR.WO\nc.hU[v.WT]=self.nR.WT\nc.hU[v.YO]=self.nR.YO\nQE:fU('ConfigDBChanged',self.NT,self)J.MQ(1)self._A()self:NT()sQ={}\nsQ.QS=_E:new{WS='aggInfo',ES=x}\nfunction sQ.QS:RS()self.ES=x\nlocal PA='orangered'local AS='Offline'local SD='orangered'if self.ES.fR then\nPA='springgreen'AS='Online'end\nif self.ES.EU then SD='springgreen'end\nlocal FG={}local DF=''\nif\nR.A((self.ES.RU or 0)- (self.ES.cY or 0))>20 then DF=' style=\"color: orangered;\"'end\nFG[#FG+1]='<span'..DF..'>AGG INFO</span>'\nFG[#FG+\n1]='Status : <span style=\"color: '..PA..';\">'..AS..'</span>'FG[#FG+1]='Target Alt : '..self.ES.RU\nFG[#FG+1]=\n'Current Alt : '..self.ES.cY\nif self.ES.fR then FG[#FG+1]='Strength : '..A.e(self.ES.NU,0.01)..' %'\nFG[#FG+1]=\n'Rate : '..A.e(self.ES.uI*100,0.01)..' %'\nFG[#FG+1]='Power : '..A.e(self.ES.iI*100,0.01)..' %'end\nif(self.ES.oI or 0)%6 ~=0 then FG[#FG+1]='Pulsors : '..self.ES.oI end\nif\nself.ES.EU then\nFG[#FG+1]='In Bubble : <span style=\"color: '..SD..';\">'..lE(self.ES.EU)..'</span>'end\nself.TS=#FG\nreturn\nE.E(FG,'<br>')end\nsQ.YS=_E:new{WS='controlsBox',US=p,IS=j}\nfunction sQ.YS:RS()\nlocal PA={}\nPA[#PA+1]='Alt-1| Toggle AP - '..lE(self.US._R)\nPA[#PA+1]='Alt-2| Altitude Hold - '..lE(self.IS.rR)\nPA[#PA+1]='Alt-3| Orbital Hold - '..lE(self.IS.oR)\nPA[#PA+1]='Alt-4| Radial Hold - '..T(self.IS.hR)\nPA[#PA+1]='Alt-5| Engine Mode - '..T(self.IS.gR)\nPA[#PA+1]='Alt-6| Slow Flat - '..lE(self.US.zR.cR)\nPA[#PA+1]='Alt-7| AR Mode - '..T(self.IS.vR)\nPA[#PA+1]='Alt-8| Rotation Damp. - '..lE(self.IS.bR)PA[#PA+1]='Alt-9| Instructions'PA[#PA+1]=''\nPA[#PA+1]='Alt-Shift-1| Toggle Main Menu'\nPA[#PA+1]='Alt-Shift-2| Follow Mode - '..lE(self.IS.tR)\nPA[#PA+1]='Alt-Shift-6| AGG Hold Travel - '..lE(self.IS.dR)PA[#PA+1]=''\nPA[#PA+1]='G| Parking - '..lE(self.US.MY)PA[#PA+1]='Alt + Ctrl| Brake Lock - '..lE(M.KR)self.TS=\n#PA\nreturn E.E(PA,'<br>')end\nsQ.gW=_E:new{WS='coreInfo',gW=B.gW,WE=B.WE,OS=''}\nfunction sQ.gW:RS()if not o.nR.YO then return''end\nlocal SD=j\nif not SD.PS then return self.OS end\nSD.PS=false\nlocal DF=R.A((self.gW.mW()*100)-100)local PA=self.gW.nW()local AS=self.gW._W()if h.rY then\nself.WS='coreInfo alert'end\nlocal FG='springgreen'\nif DF<=20 then FG='orangered'elseif DF<=50 then FG='goldenrod'end\nlocal GH={}\nGH[#GH+1]='Core : <span style=\"color:'..FG..';\">%'..DF..'</span>'\nGH[#GH+1]='Core Stress: <span style=\"color:'..FG..';\">'..(AS-PA)..'</span> / '..AS\nif self.WE~=nil then local ZX=self.WE.RE()local XC=self.WE.TE()local CV=((ZX/XC)*100)local LZ='orangered'local VB='springgreen'if CV<=20 then\nVB='orangered'elseif CV<=50 then VB='goldenrod'end\nif self.WE.EE()then\nLZ='springgreen'end\nlocal JK='<span style=\"color:'..LZ..';\">Shield</span>'\nlocal KL='<span style=\"color: '..VB..';\">'..CV..'%</span>'\nlocal HJ='<span style=\"color: '..VB..';\">'..ZX..'</span> / '..XC\nGH[#GH+1]=JK..': '..KL\nGH[#GH+1]='Shield Health: '..HJ end\nGH[#GH+1]='PvP Timer: '..h.DO\nself.TS=#GH\nself.OS=E.E(GH,' | ')return self.OS end\nsQ.AS=_E:new{WS='debugInfo',IS=j,SS=h,US=h,ES=p}\nfunction sQ.AS:RS()local BN={}self.SS=h\nself.ES=x\nself.US=p\nself.IS=j\nBN[#BN+1]='DEBUG'BN[#BN+1]='Last Dist = '..T(self.IS.IU)BN[#BN+1]=\n'Proj Dist = '..T(MW(self.US.KT))\nBN[#BN+1]=\n'T Dist = '..T(OW.dist(self.US.KT,h.UY))BN[#BN+1]=''\nBN[#BN+1]='targetLocation = '..T(self.US.CT)BN[#BN+1]='targetAlt = '..T(self.US.JT)BN[#BN+1]=\n'atmo = '..T((self.US.LT.oY-self.US.LT.pY))\nBN[#BN+1]='Target Angle = '..eW()BN[#BN+1]='Aim Target = '..j.BU\nBN[#BN+1]='SpcVector = '..T(lW)BN[#BN+1]='AP Mode = '..T(j.DY)\nBN[#BN+1]='BrakeCtrl = '..T(HW)BN[#BN+1]='SpeedCtrl ='..T(ZW)\nBN[#BN+1]='Brake Trig = '..lE(j.ZY)BN[#BN+1]='SpaceBrakeTrig = '..lE(j.LY)BN[#BN+1]=\n'OrbitLock = '..lE(j.KY)\nBN[#BN+1]='AGG AP = '..lE(j.iY)BN[#BN+1]='SpaceCapable = '..lE(j.pR)\nBN[#BN+1]=''local HJ=OW.dist(self.US.KT,h.UY)or 0\nlocal ZX=\n(\nnot self.IS.jT and(HJ/1000)>=1000)and 1.5 or 1.0\nlocal VB=0.008*ZX\nlocal FG=R.A(GW.x)local AS=R.A(GW.y)local SD=R.A(GW.z)\nlocal LZ=(FG<VB and AS<VB and SD<VB)local CV=h.IY*3.6\nlocal KL=(p.BT==nil or p.BT<=0)and(\n((h.OY or 0)*3.6)-1)or p.BT\nlocal JK=(h.PY and p.LT)and(h.PY.b==p.LT.b)or false\nlocal XC=false\nif p.CT=='surface'then XC=LZ or CV<4000 or\n(h.TU>0.5 and not JK and CV<KL)end\nif p.CT=='space'then XC=LZ or CV<500 or\n(h.TU>0.5 and not JK and CV<KL)end\nlocal GH=50*ZX\nlocal DF=(N.DR:OW(D.j)==G.f)BN[#BN+1]=\n'InitTurn = '..lE(self.IS.CY)BN[#BN+1]='FarAllow = '..T(A.e(ZX,0.01))BN[#BN+1]='tavCutoff = '..T(A.e(VB,0.0001))\nBN[#BN+1]='Aligned(calc) = '..lE(XC)BN[#BN+1]='Spc->T Angle = '..T(wW())BN[#BN+1]=\n'Vel->T Gate = '..T(A.e(GH,0.01))BN[#BN+1]=\n'LongCruise = '..lE(DF)\nBN[#BN+1]='Brake Input = '..T(M.JR)BN[#BN+1]='XferTick = '..lE(self.IS.FY)BN[#BN+1]=\n'ThrottleCmd = '..T(self.IS.GY)BN[#BN+1]='TAV.x = '..T(GW.x)BN[#BN+1]='TAV.y = '..T(GW.y)BN[\n#BN+1]='TAV.z = '..T(GW.z)BN[#BN+1]=''\nlocal PA=\n(h.PY and p.LT)and(h.PY.b==p.LT.b)or false\nBN[#BN+1]='Samebody = '..lE(PA)\nBN[#BN+1]='Vel World Angle = '..kW()BN[#BN+1]='Vel to T Angle = '..JW()BN[#BN+1]='Spc to T Angle = '..wW()\nBN[#BN+1]='world T Angle = '..qW()BN[#BN+1]='Target Altitude = '..T(j.yR)\nBN[#BN+1]=\n'BelowOrbitBand = '..lE(h.uR< (j.dY+2000))BN[#BN+1]=''BN[#BN+1]='atmo = '..h.wY\nBN[#BN+1]=\n'Target Pitch = '..T(A.e(j.AU))BN[#BN+1]='Speed = '..T(A.e(h.IY,0.01))BN[#BN+1]='Max S = '..T(A.e(h.OY*3.6,0.01))BN[#BN+1]='Vert Speed = '..T(A.e(h.SY,0.01))BN[#BN+1]='Forward Speed = '..T(A.e(h.nY,0.01))BN[#BN+1]='Lateral Speed = '..T(A.e(h.mY,0.01))BN[#BN+1]=''BN[#BN+1]=\n'Burn Spd = '..T(A.e(h.UU*3.6))\nBN[#BN+1]=''BN[#BN+1]='gravity = '..T(h.TU)BN[#BN+1]='Altitude = '..T(A.e(h.uR))\nBN[#BN+1]='ClosestBody = '..T(h.PY.n)\nBN[#BN+1]='TargetBody = '..T(self.US.LT.n)\nBN[#BN+1]='atmoAlt = '..T(h.PY.oY-h.PY.pY)BN[#BN+1]=''\nBN[#BN+1]='OrbitSpd = '..T(h.TY.YY*3.6)BN[#BN+1]='targetOrbit = '..T(j.dY)BN[#BN+1]='Orbit Status = '..lE(j.XY)\nBN[#BN+1]='Apoapsis = '..T(h.kY.jY.uR)BN[#BN+1]='Periapsis = '..T(h.kY.hY.uR)BN[#BN+1]=\n'T to Periapsis = '..T(h.kY.fY)BN[#BN+1]='T to Apoapsis = '..T(h.kY.gY)\nBN[#BN+1]='hold = '..I(gW())BN[#BN+1]=''BN[#BN+1]='aggAlt = '..T(x.cY)BN[#BN+1]=\n'aggTarget = '..T(x.RU)\nBN[#BN+1]='aggStr = '..T(x.NU)self.TS=#BN\nreturn E.E(BN,'<br>')end\nsQ.DS=_E:new{WS='fuelInfo'}\nfunction sQ.DS:RS()local AS={}\nAS[#AS+1]='Fuel Tanks'local PA={'atmo','space','rocket'}\nfor oi=1,#PA do local BN=PA[oi]\nlocal VB=uE[BN]or{}if#VB>0 then AS[#AS+1]=''end\nlocal HJ=BN:upper()local sm=\n(o.nR.nA*0.75)or 1\nlocal GH=(self.FS or 200)*(o.nR.nA or 1)local DF=(o.nR.nA or 1)*5\nlocal CV=R.O(80,R.Y(GH- (2*DF)))local XC=R.Y(22*sm)local NM=R.O(1,R.Y(1*sm))\nlocal ZX=R.O(2,XC- (2*NM))local LZ=R.O(2,R.Y(4*sm))local KL=R.O(1,R.Y(2*sm))\nlocal JK=R.O(2,R.Y(4*sm))local FG=R.O(10,R.Y(14*sm))local SD=R.Y(2*sm)\nfor Mq=1,#VB,1 do local kj=VB[Mq]local gf=\nkj.aP or 0\nif gf<0 then gf=0 end\nlocal hg=R.Y(gf*2.55)\nlocal pl='rgb('..R.Y((255-hg)*0.7)..','..R.Y(hg*0.6)..',0)'\nlocal op=R.O(50,R.P(100,R.Y((255-hg)/2.55)))local lk=R.O(0,R.P(50,R.Y(hg/2.55)))local yu='rgb('..op..','..lk..',50)'\nlocal ui=\n(BN=='atmo'and'rgb(0,188,255)')or(BN=='space'and'rgb(239,255,0)')or'rgb(196,0,255)'\nlocal we=R.Y(R.O(0,R.P(100,gf))*(CV- (2*NM))/100)\nlocal rt='<span style=\"display:inline-block; width:'..CV..'px; height:'..XC..'px; background:'..yu..'; border:'..NM..'px solid '..ui..'; box-sizing:border-box; position:relative; border-radius:'..LZ..'px; overflow:hidden; box-shadow:'..KL..'px '..KL..'px '..JK..'px rgba(0,0,0,0.35);\">'\nlocal ty='<span style=\"position:absolute; left:'..NM..'px; top:'..NM..'px; width:'..we..'px; height:'..ZX..'px; background:'..pl..'; border-radius:'..R.O(1,LZ-NM)..'px;\"></span>'local tl=kj.xP\nlocal jh=''\nif tl and tl>0 and gf>0 then if tl> (7*24*60*60)then\njh=' (&infin;)'else jh=' ('..gE(tl)..')'end end\nlocal er=HJ..' '..Mq..' ~ '..gf..'%'..jh\nlocal qw='<span style=\"position:absolute; left:'..SD..'px; top:'..NM..'px; color:white; text-shadow: 0 0 6px black; font-size:'..FG..'px; line-height:'..ZX..'px; font-weight:bold;\">'..er..'</span>'AS[#AS+1]=rt..ty..qw..'</span>'end end\nself.TS=#AS\nreturn E.E(AS,'<br>')end\nsQ.GS=_E:new{WS='infos',SS=h,US=p,IS=j}\nfunction sQ.GS:RS()\nself.IS=j\nself.SS=h\nself.US=p\nlocal AS={}local PA=self.SS.SU\nAS[#AS+1]='Yaw = '..A.e(PA.HR,0.1)\nAS[#AS+1]='Pitch = '..A.e(PA.FR,0.1)AS[#AS+1]='Roll = '..A.e(PA.GR)AS[#AS+1]=''\nAS[#AS+1]=\n'Mass = '..A.e(self.SS.SI/1000,0.001)..' T'\nAS[#AS+1]='Wing Stall Angle = '..self.US.zR.sY\nAS[#AS+1]='Velocity Angle = '..NW()AS[#AS+1]=''local agl=\nself.US.zR.dT or 0\nAS[#AS+1]='AGL = '..A.e(agl,0.01)..' m'\nif self.SS.AY~=nil then AS[#AS+1]='Grnd Dist = '..A.e(self.SS.AY-agl,0.01)..' m'end\nAS[#AS+1]='Burn Protection = '..(\nself.US.zR.uT and'<span style=\"color: springgreen;\">On</span>'or'Off')\nAS[#AS+1]='Altitude Hold = '..(self.IS.rR and\n('<span style=\"color: springgreen;\">On</span> ('..A.e(self.IS.yR)..' m)')or'Off')\nAS[#AS+1]='Max Speed = '..T(A.e(self.US.BT))\nAS[#AS+1]='Max VBrake = '..T(self.US.zR.fT)..' km/h'\nAS[#AS+1]='Brake Dist = '..kE(self.SS.QU.distance,true)\nif self.US.KT~=nil then local SD=self.SS.IY\nif SD>=1 then\nlocal DF=OW.dist(self.US.KT,self.SS.UY)local FG=DF/SD\nAS[#AS+1]=''AS[#AS+1]='ETA = '..gE(FG)..' ('..A.e(SD)..' m/s)'else\nAS[#AS+1]=''AS[#AS+1]='ETA =  (0 m/s)'end end\nif self.IS.JU then\nAS[#AS+1]='<br><span style=\"color: cyan;\">AGG LANDING</span>'end\nself.TS=#AS\nreturn E.E(AS,'<br>')end\nsQ.YT=_E:new{WS='mainMenu',JS=QR.HS,KS=4,LS=16,ZS=4,XS=20}\nWR={CS='RouteList',VS='RouteListAll',BS='RouteListByPlanet',NS='EditRoute',MS='Autopilot',qS='Settings',wS='AutopilotConfig',eS='Databanks',rS='DatabanksConfig',tS='DatabanksRoute',yS='DatabanksUSB',uS='Scale',iS='HUD',oS='Sounds'}\nfunction sQ.YT:MU()local AS=WR\nself.UT=ER\nself.pS={BT={'Maximum space travel speed','Set to 0 for automatic detection',maxSpaceSpeed..' Default'},MT={'How steep to pitch in atmo in degrees',\nmaxPitch..' Default'},qT={'How steep to roll in atmo in degrees',maxRoll..' Default'},sY={'Degrees from your trajectory your ship','stalls at, based on majority of airfoil','type used for lift (Ailerons 35,','Wings 50, Stabilizers 70)',\nwingStallAngle..' Default'},tT={'Hover height in meters',\nhoverHeight..' Default'},uT={'Will take over throttle/brakes to prevent','burning in atmosphere. Use brakes or','change throttle to take manual control again.'},wT={'Automatic shield state and resistance control'},_I={'Show radar contacts in the HUD'},QO={'Show the default radar widget'},cR={'levels the ship when','below 100km / hr and in atmo'},eT={'rarely used, only if engines are angled','in a way where space capability isnt','detected automatically correctly.'}}c.hU[v.EO]=self.UT.pI.lS\nQE:fU('ConfigDBChanged',self.NT,self)self:NT()self.UT.pI.kS=self.FS-self.KS*2\nself.UT.pI.jS=self.LS\nself.UT.pI.hS=self.ZS\nself.UT.pI.XS=self.XS\nself.UT:gS('Routes',AS.CS)self.UT:gS('All Routes',AS.VS,AS.CS)\nself.UT:gS('Autopilot Controls',AS.MS)self.UT:gS('Settings',AS.qS)\nself.UT:gS('Autopilot Configuration',AS.wS,AS.qS)self.UT:gS('Databanks',AS.eS,AS.qS)\nself.UT:gS('Visual',AS.iS,AS.qS)\nself.UT:gS('Scale',AS.uS,AS.iS,{hT={ST=function()return(c:hT(v.FT)*100)..'%'end},PT={ST=RR,DT=v.FT,AT=function(SD)return\nA.t(I(SD),30,300)/100 end}})\nself.UT:gS('Config DB',AS.rS,AS.eS,{hT={ST=TR,DT='config'}})\nself.UT:gS('Route DB',AS.tS,AS.eS,{hT={ST=TR,DT='routes'}})\nself.UT:fS('Toggle on/off',AS.MS,{dS={ST=p.wR},hT={ST=function()return p._R end}})self.UT:fS('New Route',AS.CS,{dS={ST=YR}})\nself.UT:gS('Route',AS.NS,AS.NS,{sS={ST=UR,DT=i}},true)\nself.UT:fS('Name',AS.NS,{PT={ST=IR},hT={ST=OR}},true)\nself.UT:fS('Add Current Position',AS.NS,{dS={ST=PR}},true)\nself.UT:fS('Add ::Pos Location',AS.NS,{PT={ST=zQ}},true)\nfor SD=0,27 do local FG=SD+3\nlocal DF=(FG*10)..'%'\nself.UT:fS(DF,AS.uS,{aS={ST=function(GH,FG)\nreturn c:hT(v.FT)==FG end,DT=FG/10},dS={ST=AR,DT={zS=v.FT,xS=FG/10}}})end\nQE:fU('ConfigChange'..v.FT,o._A)\nQE:fU('RoutesUpdated',self.cS,self)\nself.UT:fS('Unit Widget',AS.iS,{dS={ST=function()o.pT()end},hT={ST=function()return o.nR.WO end}})\nif#B.xE>0 then\nself.UT:fS('Radar Boxes',AS.iS,{dS={ST=function()vQ.oT()end},hT={ST=function()\nreturn vQ.RP==true end},vS=self.pS._I})\nself.UT:fS('Radar Widget',AS.iS,{dS={ST=function()vQ.iT()end},hT={ST=function()return vQ.fO~=nil end},vS=self.pS.QO})end\nself.UT:fS('Menu Action Legend',AS.iS,{dS={ST=function()self.UT:bS()end},hT={ST=function()return\nself.UT.pI.lS end}})local PA='MyDocuments/NQ/DualUniverse/audio/'\nself.UT:gS('Sounds',AS.oS,AS.qS)\nself.UT:fS('Enabled',AS.oS,{dS={ST=function()aW._R=not aW._R\nc:sR(v.nI,aW._R)end},hT={ST=function()return\naW._R end}})\nself.UT:fS('Startup',AS.oS,{dS={ST=function()aW:pP(rE.rU)end},hT={ST=function()return\naW.yP[rE.rU]==nil end},BR={ST=function()\naW:QQ(mW.rU,true)end,nS='Preview'},vS=PA..mW.rU.iP})\nself.UT:fS('Autopilot on',AS.oS,{dS={ST=function()aW:pP(rE.vU)end},hT={ST=function()return\naW.yP[rE.vU]==nil end},BR={ST=function()\naW:QQ(mW.vU,true)end,nS='Preview'},vS=PA..mW.vU.iP})\nself.UT:fS('Autopilot off',AS.oS,{dS={ST=function()aW:pP(rE.bU)end},hT={ST=function()return\naW.yP[rE.bU]==nil end},BR={ST=function()\naW:QQ(mW.bU,true)end,nS='Preview'},vS=PA..mW.bU.iP})\nself.UT:fS('Destination reached',AS.oS,{dS={ST=function()aW:pP(rE.UI)end},hT={ST=function()return\naW.yP[rE.UI]==nil end},BR={ST=function()\naW:QQ(mW.UI,true)end,nS='Preview'},vS=PA..mW.UI.iP})\nself.UT:fS('Waypoint reached',AS.oS,{dS={ST=function()aW:pP(rE.YI)end},hT={ST=function()return\naW.yP[rE.YI]==nil end},BR={ST=function()\naW:QQ(mW.YI,true)end,nS='Preview'},vS=PA..mW.YI.iP})\nself.UT:fS('Menu select',AS.oS,{dS={ST=function()aW:pP(rE.kP)end},hT={ST=function()return\naW.yP[rE.kP]==nil end},BR={ST=function()\naW:QQ(mW.kP,true)end,nS='Preview'},vS=PA..mW.kP.iP})\nself.UT:fS('Menu back',AS.oS,{dS={ST=function()aW:pP(rE.jP)end},hT={ST=function()return\naW.yP[rE.jP]==nil end},BR={ST=function()\naW:QQ(mW.jP,true)end,nS='Preview'},vS=PA..mW.jP.iP})\nself.UT:fS('Menu up/down',AS.oS,{dS={ST=function()aW:pP(rE.hP)end},hT={ST=function()return\naW.yP[rE.hP]==nil end},BR={ST=function()\naW:QQ(mW.hP,true)end,nS='Preview'},vS=PA..mW.hP.iP})\nself.UT:fS('Max Space Speed',AS.wS,{PT={ST=function(SD)c:sR(v.BT,I(SD))p:NT()end},hT={ST=function()return\np.zR.BT end},vS=self.pS.BT})\nself.UT:fS('Max Pitch',AS.wS,{PT={ST=function(SD)c:sR(v.MT,I(SD))p:NT()end},hT={ST=function()return\np.zR.MT end},vS=self.pS.MT})\nself.UT:fS('Max Roll',AS.wS,{PT={ST=function(SD)c:sR(v.qT,I(SD))p:NT()end},hT={ST=function()return\np.zR.qT end},vS=self.pS.qT})\nself.UT:fS('Wing Stall Angle',AS.wS,{PT={ST=function(SD)c:sR(v.sY,I(SD))p:NT()end},hT={ST=function()return\np.zR.sY end},vS=self.pS.sY})\nself.UT:fS('Hover Height',AS.wS,{PT={ST=function(SD)c:sR(v.tT,I(SD))p:NT()end},hT={ST=function()return\np.zR.tT end},vS=self.pS.tT})\nself.UT:fS('Shield Management',AS.wS,{dS={ST=p.mU},hT={ST=function()return p.zR.wT end},vS=self.pS.wT})\nself.UT:fS('Burn Protection',AS.wS,{dS={ST=p.yT},hT={ST=function()return p.zR.uT end},vS=self.pS.uT})\nself.UT:fS('Slow Flat',AS.wS,{dS={ST=p.xR},hT={ST=function()return p.zR.cR end},vS=self.pS.cR})\nself.UT:fS('Space Capable Override',AS.wS,{dS={ST=p._U},hT={ST=function()return p.zR.eT end},vS=self.pS.eT})self.UT.mS=function(self)o.nR.WT=false end\nself:_S()self:cS()end\nfunction sQ.YT:NT()self.UT.pI.lS=c:hT(v.EO)end\nfunction sQ.YT:uQ()\nself.UT:QD()end\nfunction sQ.YT:RS()local DF=''local PA=o.WD\nlocal AS=o.ED\nlocal SD=self.KS*o.nR.nA\nDF=DF..'<style>'..o.RD.TD..'></style>'\nDF=DF..'<svg style=\"position:absolute;top:'..SD..';left:'..SD..';\" height=\"100vh\" viewBox=\"0 0 '..PA..' '..AS..'\" preserveAspectRatio=\"xMidYMid\" overflow=\"visible\" xmlns=\"http://www.w3.org/2000/svg\">\\n'DF=DF..'<defs>'..o.RD.YD..'</defs>'\nDF=DF..'<g class=\"mainMenu\">'..self.UT:UD()..'</g>'DF=DF..'</svg>'self.TS=self.UT.TS\nreturn DF end\nfunction sQ.YT:_S()self.UT:ID(WR.rS)self.UT:ID(WR.tS)\nself.UT:ID(WR.yS)\nfor PA,AS in ipairs(B.oE)do\nself.UT:fS(AS.n,WR.rS,{dS={ST=SR,DT={ZA='config',RI=AS}},aS={ST=function(SD,AS)return c.RI==AS end,DT=AS}})\nself.UT:fS(AS.n,WR.tS,{dS={ST=SR,DT={ZA='route',RI=AS}},aS={ST=function(SD,AS)return aQ.RI==AS end,DT=AS}})\nself.UT:fS(AS.n,WR.yS,{dS={ST=SR,DT={ZA='usb',RI=AS}}})end end\nfunction sQ.YT:OD()self.UT:ID(WR.NS)local PA=aQ.SP[aQ.GT]==nil\nlocal AS=#\naQ.SP[aQ.GT].p==0\nif PA or AS then return end\nfor DF,SD in\npairs(aQ.SP[aQ.GT].p)do\nlocal FG={dS={ST=DR,DT=DF,nS='Set Destination'},NR={ST=FR,DT=DF,nS='Delete',PD=2},BR={ST=GR,DT=DF,nS='Print Coordinates'},AD={ST=HR,DT=DF,nS='Change point order'},PT={ST=JR,DT=DF},aS={ST=function(GH,HJ)return\np.WI==HJ end,DT=DF}}self.UT:fS(SD.n,WR.NS,FG)end end\nfunction sQ.YT:cS()self.UT:ID(WR.VS)\nfor AS,PA in ipairs(aQ.SP)do local DF=aQ:TI(AS)if DF==0 then\nDF='-'end\nlocal SD={dS={ST=KR,DT=AS,nS='Set Destination'},NR={ST=LR,DT=AS,nS='Delete',PD=2},BR={ST=ZR,DT=AS,nS='Open'},hT=\n'( '..DF..' )',aS={ST=function(FG,GH)return p.QI==GH end,DT=AS}}self.UT:fS(PA.n,WR.VS,SD)end end\nXR={WS='radar',JS=QR.SD,FS=280}\nsQ.nO=_E:new{WS=XR.WS,JS=XR.JS,FS=XR.FS}function sQ.nO:RS()return CR(self,'Dynamic',vQ.nO)end\nsQ._O=_E:new{WS=XR.WS,JS=XR.JS,FS=XR.FS}function sQ._O:RS()return CR(self,'Static',vQ._O)end\nsQ.QP=_E:new{WS=XR.WS,JS=XR.JS,FS=XR.FS}\nfunction sQ.QP:RS()return CR(self,'Abandoned',vQ.QP)end\nsQ.EP=_E:new{WS=XR.WS,JS=XR.JS,FS=XR.FS}function sQ.EP:RS()return\nCR(self,'Alien',vQ.EP)end\nsQ.mO=_E:new{WS=XR.WS,JS=XR.JS,FS=XR.FS}function sQ.mO:RS()return CR(self,'Space',vQ.mO)end\nsQ.WP=_E:new{WS=XR.WS,JS=XR.JS,FS=XR.FS}function sQ.WP:RS()return CR(self,'Friend',vQ.WP)end\nsQ.DD=_E:new{WS=XR.WS,JS=XR.JS,FS=XR.FS}function sQ.DD:RS()return CR(self,'Threat',vQ.nO)end\nfunction CR(self,AS,PA)\nlocal SD=AS\nlocal FG=PA\nself.TS=#FG+1\nlocal DF=0\nlocal GH={}\nGH[#GH+1]=AS..' - '..#FG\nfor HJ,JK in ipairs(FG)do if SD=='Threat'then\nif FG[HJ]['targetThreatState']==0 then goto continue end end\nlocal KL=JK['constructId']..' ['..JK['size']..'] '..JK['name']GH[#GH+1]='<div class=\"radarRow\">'\nGH[#GH+1]=\n'<div class=\"radarText\" style=\"left: 0.5vh; width: 5vh;\">'..JK['constructId']..'</div>'\nGH[#GH+1]='<div class=\"radarText\" style=\"left: 5.5vh; width: 2.5vh;\">['..JK['size']..']</div>'\nGH[#GH+1]='<div class=\"radarText\" style=\"left: 8vh; width: 15vh;\">'..JK['name']..'</div>'\nGH[#GH+1]='<div class=\"radarText\" style=\"right: 0.5vh;\">'..jE(R.T(JK['distance']))..'</div>'GH[#GH+1]='</div>'DF=DF+1\nif DF>=10 then break end::continue::end\nself.FD=DF>0\nreturn E.E(GH,'')end\nsQ.GD=_E:new{WS='warpInfo',HD=WW}\nfunction sQ.GD:RS()self.HD=WW\nlocal PA='ivory'\nif self.HD.HY~='Ready'then PA='orangered'else PA='springgreen'end\nlocal AS={}AS[#AS+1]='WARP DRIVE INFO'\nAS[#AS+1]='Status : <span style=\"color: '..PA..';\">'..self.HD.HY..'</span>'\nAS[#AS+1]='Distance : '..kE(self.HD.FA,true)AS[#AS+1]='Destination : '..self.HD.GA\nAS[#AS+1]=\n'Cells Available : '..self.HD.HA\nAS[#AS+1]='Cells Needed : '..self.HD.JA\nAS[#AS+1]='<span style=\"color: '..PA..';\">ENGAGE WARP - ALT-J</span>'\nself.TS=#AS\nreturn E.E(AS,'<br>')end\nfor PA,AS in pairs(sQ)do AS:MU()end end\nfunction o:NT()self.nR.WO=c:hT(v.WO)self.nR.WT=c:hT(v.WT)\nself.nR.YO=c:hT(v.YO)self.JD()end\nfunction o._A()\no.WD=J.VQ()o.ED=J.BQ()local AS=o.ED/1080*c:hT(v.FT)local PA=o.ED/1080\nif\nAS~=nil and o.nR.nA~=AS then o.nR.nA=AS\no.nR.mA=PA\no.KD()end end\nfunction o.uQ()o._A()local PA=''local AS=j\nif o.nR.mR then PA=PA..o.LD()else PA=PA..o.ZD()local GH={}if\nAS.VT then E.W(GH,sQ.AS)sQ.AS.JS=QR.XD end\nE.W(GH,sQ.YS)sQ.YS.JS=QR.HS\nsQ.YS.FS=180\nif o.nR.WT then E.W(GH,sQ.YT)end\nE.W(GH,sQ.DS)sQ.DS.JS=QR.XD\nsQ.DS.FS=220\nE.W(GH,sQ.GS)sQ.GS.FS=150\nsQ.GS.JS=QR.XD\nif o.nR.YO then E.W(GH,sQ.gW)sQ.gW.JS=QR.CD\nsQ.gW.FS=800 end\nif B.XE then E.W(GH,sQ.QS)sQ.QS.JS=QR.XD\nsQ.QS.FS=150 end\nif B.eE~=nil then E.W(GH,sQ.GD)sQ.GD.JS=QR.XD\nsQ.GD.FS=180 end\nAS.VD=# (vQ.nO or{})>0\nAS.BD=# (vQ._O or{})>0\nAS.ND=# (vQ.QP or{})>0\nAS.MD=# (vQ.EP or{})>0\nAS.qD=# (vQ.mO or{})>0\nAS.wD=# (vQ.WP or{})>0\nif vQ.hO~=nil and vQ.RP then if AS.ND then E.W(GH,sQ.QP)end\nif AS.BD then\nE.W(GH,sQ._O)end\nif AS.VD==true then E.W(GH,sQ.nO)end\nif AS.wD then\nE.W(GH,sQ.WP)end\nif AS.MD then E.W(GH,sQ.EP)end\nif AS.qD then\nE.W(GH,sQ.mO)end\nE.W(GH,sQ.DD)end\nlocal SD='width:'..o.WD..'px; height:'..o.ED..'px;'\nPA=PA..'<div style=\"position:fixed; top:0; left:0; '..SD..'\">'local DF={}local FG={}\nfor HJ,JK in ipairs(GH)do if FG[JK.JS]==nil then FG[JK.JS]=0 end\nif\nFG[JK.JS]>0 then FG[JK.JS]=FG[JK.JS]+JK.eD end\nFG[JK.JS]=\nFG[JK.JS]+JK.FS end\nfor HJ,JK in ipairs(GH)do if JK.uQ~=nil then JK:uQ()end\nif DF[JK.JS]==nil then\nDF[JK.JS]=0 end\nPA=PA..JK:UD(DF[JK.JS],FG[JK.JS])DF[JK.JS]=DF[JK.JS]+JK.FS+JK.eD end\nPA=PA..'</div>'end\nJ.qQ(PA)end\nfunction o.qR(PA)if PA==nil then PA=not o.nR.WT end\no.nR.WT=PA\nc:sR(v.WT,o.nR.WT)end\nfunction o.pT(PA)\nif PA==nil then PA=not o.nR.WO end\no.nR.WO=PA\nc:sR(v.WO,o.nR.WO)o.JD()end\nfunction o.lT(PA)if PA==nil then PA=not o.nR.YO end\no.nR.YO=PA\nc:sR(v.YO,o.nR.YO)end\nfunction o.JD()\nif o.nR.WO then Z.mQ()else Z.nQ()end end\nfunction o.ZD()local er=j\nlocal we=p\nlocal rt=h\nlocal Mq=rt.QU.distance\nlocal LZ=A.e(rt.SU.FR)local CV=1\nif rt.uR>100000 then er.rD=false else er.rD=true end\nlocal AS=A.e(Z.vQ())local ty={}\nty[#ty+1]=[[<div class=\"speedBar\" style=\"transform:translate(50vw,50vh)\">]]..o.tD.yD..[[\n    </div>]]\nty[#ty+1]=[[<div class=\"throttleBar\" style=\"transform:translate(50vw,50vh)\">]]..o.tD.uD..[[\n    </div>]]\nif er.rD then local ui=''local Mq=A.e(rt.QU.distance*1.1)local yu='ivory'\nif\nrt.PY.vY then\nlocal lk=A.e(OW.dist(rt.PY.ZT,rt.UY)- (rt.PY.oY))ui=[[Atmo Dist = ]]..kE(lk,true)..[[<br>]]local op=\nrt.PY.XT or 0\nlocal pl=A.e((rt.uR or 0)-op)if pl>0 then\nui=ui..[[Max Surf. Dist = ]]..kE(pl,true)..[[<br>]]end\nif Mq>lk and lk>0 then yu='orangered'end else\nlocal op=A.e(OW.dist(rt.PY.ZT,rt.UY)- (rt.PY.pY*1.05))ui=[[Surf Dist ~ ]]..kE(op,true)..[[<br>]]if Mq>\nop and op>0 then yu='orangered'end end\nty[#ty+1]=[[<div class=\"altBar\" style=\"transform:translate(50vw,50vh)\">]]..o.tD.iD..[[\n        </div>]]\nty[#ty+1]=[[<div class=\"atmoAlert\" style=\"font-size: ]]..CV..[[vh; color: ivory; text-shadow: 0.2vh 0.2vh 1vh black;\">\n        Brake Dist = <span style=\"color: ]]..yu..[[;\">]]..kE(Mq,true)..[[<br></span>]]..ui..[[\n        </div>]]end\nty[#ty+1]=[[<div class=\"atmoAlert\" style=\"transform:translate(27vw,1vh); font-size: ]]..CV..[[vh; color: ivory; text-align: right; text-shadow: 0.2vh 0.2vh 1vh black;\">\n    Vertical Speed: ]]..(A.e(rt.SY*3.6))..[[\n    </div>]]\nif we._R then\nty[#ty+1]=[[<div class=\"apAlert\" style=\"font-size: 2vh; color: ivory; text-align: center; text-shadow: 0.2vh 0.2vh 1vh black;\">\n    AUTOPILOT\n    </div>]]end\nif we.MY then\nty[#ty+1]=[[<div class=\"apAlert\" style=\"font-size: 2vh; color: ivory; text-align: center; text-shadow: 0.2vh 0.2vh 1vh black;\">\n        PARKING MODE\n        </div>]]end\nif er.TT and SW()~='cruise'then\nty[#ty+1]=[[<div class=\"apAlert\" style=\"font-size: 2vh; color: ivory; text-align: center; text-shadow: 0.2vh 0.2vh 1vh black;\">\n        BURN PROTECTION\n        </div>]]end\nif M.JR>0 then\nty[#ty+1]=[[<div class=\"brakeAlert\" style=\"font-size: 2vh; color: orangered; text-align: center; text-shadow: 0.2vh 0.2vh 1vh black;\">\n        BRAKE\n        </div>]]end\nlocal qw=false\nif er.QY~=nil then local yu=A.e(Mq*1.2)local ui=rt.SY*3.6\nif er.QY.vY then\nlocal op=A.e(\nOW.dist(rt.PY.ZT,rt.UY)- (er.QY.oY))\nif yu>op and op>0 and ui<0 and rt.IY>rt.UU then qw=true end else\nlocal op=A.e(OW.dist(rt.PY.ZT,rt.UY)- (er.QY.pY*1.1))if yu>op and op>0 and ui<0 then qw=true end end\nif qw then\nty[#ty+1]=\n[[<div class=\"collision\" style=\"font-size: 1.5vh; color: ivory; text-align: center; text-shadow: 0.2vh 0.2vh 1vh black;\">\n                Collision Alert : ]]..T(er.QY.n)..[[\n                </div>]]end\nif we.zR.uT then\nif not we._R and not we.MY and not er.oR then\nif qw then er.TT=true\nif\nSW()=='cruise'then DW()end\nif LZ<5 then N.DR:KW(D.j,0)end end\nif er.TT==true then if qw then er.oD=true\nHW=30\nM.JR=1 end end end end end\nif not qw and er.oD then HW=31\ner.oD=false\nif not er.pD then M.JR=0 end end\nty[#ty+1]='<style>'..o.RD.lD..'></style>'\nlocal NM=K.tQ(nE(we.KT))local KL=bE(rt.XI*rt.IY)local BN=K.tQ(KL)local DF=xE(GW,rt.XI)\nlocal SD=bE(DF*10)local XC=K.tQ(SD)local FG=bE(rt.wI*rt.IY)local ZX=K.tQ(FG)local HJ=bE(\n- (rt.wI)*rt.IY)local VB=K.tQ(HJ)\nlocal GH=xE((SE(we.KT)),rt.XI)local JK=bE(GH*10)local PA=K.tQ(JK)\nfor yu,ui in pairs(cW[bW])do\nlocal kj=K.tQ(nE(ui.ZT))\nlocal op=A.t(A.e((OW.dist(ui.ZT,rt.UY))/200000),10,500)\nlocal pl=(R.A(A.i(op,10,500,0.3,2)-2.4))local lk=o.kD.jD\nif\nrt.PY.n~=ui.n or(rt.PY.n~=ui.n and OW.dist(rt.PY.ZT,rt.UY)>\n100000)then\nif ui.ZA=='Planet'and\n(er.vR=='planets'or er.vR=='both')then lk=o.kD.jD\nty[#ty+1]=\n[[<div class=\"planets\" style=\"transform:translate(]]..(kj[1]*100)..[[vw,]]..(kj[2]*100)..[[vh) scale(]]..pl..[[)\">]]..lk..[[</div>]]\nty[#ty+1]=[[<div class=\"ptext\" style=\"transform:translate(]]..(kj[1]*100)..[[vw,]]..(kj[2]*100)..[[vh); font-size: 1vhx; text-shadow: 4px 4px 5px maroon;\">]]..T(ui.n)..[[</div>]]elseif\nui.ZA=='Moon'and(er.vR=='moons'or er.vR=='both')then lk=o.kD.hD\nty[#ty+1]=[[<div class=\"planets\" style=\"transform:translate(]]..(kj[1]*100)..[[vw,]]..(kj[2]*100)..[[vh) scale(]]..pl..[[)\">]]..lk..[[</div>]]\nty[#ty+1]=[[<div class=\"mtext\" style=\"transform:translate(]]..(kj[1]*100)..[[vw,]]..(kj[2]*100)..[[vh); font-size: 1vh; text-shadow: 4px 4px 5px midnightblue;\">]]..T(ui.n)..[[</div>]]end end end\nty[#ty+1]=[[<div class=\"dot\" style=\"transform:translate(]]..(NM[1]*100)..[[vw,]]..(NM[2]*100)..[[vh)\">]]..o.kD.gD..[[</div>]]\nty[#ty+1]=[[<div class=\"dottext\" style=\"transform:translate(]]..(NM[1]*100)..[[vw,]]..(NM[2]*100)..[[vh)\">]]..o.tD.fD..[[</div>]]\nty[#ty+1]=[[<div class=\"dot\" style=\"transform:translate(]]..(BN[1]*100)..[[vw,]]..(BN[2]*100)..[[vh)\">]]..o.kD.dD..[[</div>]]\nty[#ty+1]=[[<div class=\"dot\" style=\"transform:translate(]]..(XC[1]*100)..[[vw,]]..(XC[2]*100)..[[vh)\">]]..o.kD.sD..[[</div>]]\nty[#ty+1]=[[<div class=\"dot\" style=\"transform:translate(]]..(ZX[1]*100)..[[vw,]]..(ZX[2]*100)..[[vh)\">]]..o.kD.aD..[[</div>]]\nty[#ty+1]=[[<div class=\"dot\" style=\"transform:translate(]]..(VB[1]*100)..[[vw,]]..(VB[2]*100)..[[vh)\">]]..o.kD.zD..[[</div>]]\nty[#ty+1]=[[<div class=\"dot\" style=\"transform:translate(]]..((mE().aA)[1]*100)..[[vw,]]..(\n(mE().aA)[2]*100)..[[vh); font-size: 1vh\">]]..o.kD.xD..kE(mE().zA,true)..[[</div>]]mE()return E.E(ty)end\nQR={CD='top',XD='topLeft',HS='topRight',SD='bottom',cD='bottomLeft',vD='bottomRight'}_E={JS=nil,FS=200,bD=35,eD=10,XS=0,KS=0,TS=0,LS=0,ZS=0,FD=true}\nfunction _E:new(PA)PA=\nPA or{}setmetatable(PA,self)self.__index=self\nreturn PA end\nfunction _E:MU()end\nfunction _E:RS()end\nfunction _E:UD(AS,PA)\nif\nself.RS~=nil and W(self.RS)=='function'then if AS==nil then AS=0 end\nlocal VB=o.nR.nA\nlocal HJ=o.nR.mA\nlocal FG=self:RS()if\nnot self.FD then return''end\nlocal ZX={}if self.WS~=nil then ZX={self.WS}end\nE.W(ZX,'widget')local DF=' class=\"'..E.E(ZX,' ')..'\"'local GH=PA*VB\nlocal XC=self.FS*VB\nlocal SD=self.TS*(self.LS+self.ZS)-self.ZS+self.XS\nlocal JK=(SD+self.KS*2)*VB\nlocal CV=self.bD*VB\nlocal Mq=AS*VB\nlocal BN=CV\nlocal NM=''\nif self.JS==QR.CD then BN=4*VB\nMq=Mq+o.WD/2-XC/2\nNM='top: '..BN..'px; left: '..Mq..'px;'elseif\nself.JS==QR.XD then Mq=Mq+CV\nNM='top: '..BN..'px; left: '..Mq..'px;'elseif self.JS==QR.HS then Mq=Mq+CV\nMq=Mq+420*HJ\nNM='top: '..BN..'px; right: '..Mq..'px;'elseif self.JS==QR.SD then Mq=Mq+\no.WD/2-GH/2\nNM='bottom: '..BN..'px; left: '..Mq..'px;'elseif self.JS==QR.cD then Mq=Mq+CV\nNM='bottom: '..BN..'px; left: '..Mq..'px;'elseif self.JS==QR.vD then Mq=Mq+CV\nNM='bottom: '..BN..'px; right: '..Mq..'px;'else NM='top: 50%; left: '..Mq..'px;'end\nlocal LZ=2\nlocal KL='width:'..(XC+LZ)..'px;'if JK>0 then\nKL='width:'..(XC+LZ)..'px; height:'..(JK+LZ)..'px;'end\nreturn\n'<div'..DF..' style=\"'..NM..KL..'\">'..FG..'</div>'end end\nER={pI={kS=50,XS=20,jS=20,hS=0,PF=12,TF=0,YF=nil,lS=true},TS=0,RF={},WF={},iF=0,VF=0,tF={},MF={},gS=function(PA,FG,DF,AS,SD,GH)\nlocal HJ={nS=FG,zS=DF,nD=AS,OT=SD,mD={_D=false,KP=false},QF=GH}E.W(PA.WF,HJ)return HJ end,fS=function(PA,DF,SD,AS,FG)\nlocal GH={nS=DF,EF=SD,OT=AS,mD={_D=false,KP=false},QF=FG}E.W(PA.RF,GH)return GH end,ID=function(AS,PA)for SD=\n#AS.RF,1,-1 do local DF=AS.RF[SD]if DF.EF==PA and DF.QF~=true then\nE.U(AS.RF,SD)end end\nfor SD=#\nAS.WF,1,-1 do local DF=AS.WF[SD]if DF.nD==PA and DF.QF~=true then\nE.U(AS.WF,SD)end end end,mS=function(PA)\nend,bS=function(PA)PA.pI.lS=not PA.pI.lS\nc:sR(v.EO,PA.pI.lS)end,AF=function(PA,SD,AS)if\nSD.OT~=nil and SD.OT.aS~=nil then\nSD.mD.KP=SD.OT.aS.ST(SD,SD.OT.aS.DT)end\nSD.mD._D=AS end,uF=function(SD,AS,PA)\nSD.pI.TF=0\nSD.pI.YF=AS\nlocal DF=0\nfor FG,GH in ipairs(SD.WF)do\nif GH.nD==AS then if PA~=nil and GH.zS==PA.zS then\nSD.pI.TF=DF\nbreak end\nDF=DF+1 end end end,UD=function(PA)\nlocal AS={}PA.TS=0\nPA.UF=nil\nlocal SD=0\nfor DF,FG in ipairs(PA.WF)do if\nFG.nD==PA.pI.YF and FG.zS~=PA.pI.YF then SD=SD+1 end end\nfor DF,FG in ipairs(PA.RF)do if FG.EF==PA.pI.YF then SD=SD+1 end end\nif SD-1 <PA.pI.TF then PA.pI.TF=SD-1 elseif PA.pI.TF<0 then PA.pI.TF=0 end\nAS[#AS+1]=PA:IF(PA:OF(PA.pI.YF))return E.E(AS)end,oF=function(PA,AS)\nlocal GH=0\nlocal DF=0\nlocal FG=W(AS)=='table'and AS.zS~=nil\nlocal SD=\nW(AS)=='table'and AS.EF~=nil\nfor HJ,JK in ipairs(PA.WF)do\nif JK.nD==PA.pI.YF and\nJK.zS~=PA.pI.YF then GH=GH+1\nif FG and JK.zS==AS.zS then\nPA.pI.TF=GH\nreturn end end end\nif W(AS)==\n'number'then PA.pI.TF=GH+AS end end,IF=function(AS,PA)\nlocal op={}local XC={}if PA~=nil and PA.zS~=nil then local pl=AS:OF(PA.zS)E.W(XC,1,pl)\nwhile\npl.nD~=nil and pl.nD~=pl.zS do pl=AS:OF(pl.nD)E.W(XC,1,pl)end end\nlocal rt={}for pl,lk in\nipairs(XC)do E.W(rt,lk.nS)end\nif#rt==0 then E.W(rt,'Main Menu')end\nlocal HJ=E.E(rt,' > ')local yu=o.nR.nA\nlocal we=AS.pI.jS*yu\nlocal GH=AS.pI.hS*yu\nlocal CV=we+GH\nlocal JK=AS.pI.XS*yu\nlocal VB=4*yu\nlocal SD=R.Y(VB)\nlocal FG=R.Y(we/2)local DF=R.Y(we/2+we)local er=R.Y(JK-VB)\nop[#op+1]='<text class=\"outlined\" x=\"'..VB..'\" y=\"'..(FG)..'\">'..HJ..'</text>'\nop[#op+1]='<rect class=\"separator\" x='..VB..'\" y=\"'..(er)..'\" width=\"'..(AS.pI.kS*yu)..'\" height=\"1\" />'local Mq=0\nlocal qw=AS.pI.PF\nif AS.pI.TF>AS.pI.PF then\nMq=AS.pI.TF-AS.pI.PF\nqw=AS.pI.TF end\nlocal ui=0\nlocal ty=0\nfor pl,lk in ipairs(AS.WF)do\nif lk.nD==\nPA.zS and lk.zS~=PA.zS then if ui<=qw and ui>=Mq then\nlocal kj=ui==AS.pI.TF\nif kj then AS.UF=lk end\nAS:AF(lk,kj)op[#op+1]=AS:SF(lk,ty)\nty=ty+1 end\nui=ui+1 end end\nlocal BN=0\nlocal NM=0\nfor pl,lk in ipairs(AS.RF)do\nif lk.EF==PA.zS then local kj=BN+ui\nif kj<=qw and kj>=Mq then local jh=kj==\nAS.pI.TF\nif jh then AS.UF=lk end\nAS:AF(lk,jh)\nop[#op+1]=AS:SF(lk,NM+ty)NM=NM+1 end\nBN=BN+1 end end\nlocal LZ=BN+ui\nlocal KL=ty+NM\nAS.TS=AS.TS+KL\nif AS.pI.PF<LZ then\nop[#op+1]=AS:DF(er,LZ,KL,Mq,qw)end\nlocal ZX=0\nif AS.pI.lS then local kj=er+CV*AS.TS+CV\nlocal lk,pl=AS:FF(kj)ZX=kj+pl\nop[#op+1]=lk else ZX=er+CV*AS.TS+10*yu end\nif AS.UF~=nil then op[#op+1]=AS:GF(ZX,AS.pI.lS)end\nreturn E.E(op)end,DF=function(GH,SD,FG,DF,AS,PA)\nlocal ty={}local rt=o.nR.nA\nlocal JK=GH.pI.jS*rt\nlocal XC=GH.pI.hS*rt\nlocal KL=JK+XC\nlocal BN=10*rt\nlocal we=SD+XC/2+BN/2\nlocal Mq=-12*rt\nlocal qw=DF*KL-BN\nlocal NM=5*rt\nlocal VB=2*rt\nlocal CV=we+AS/FG*qw\nlocal HJ=we+ (PA+1)/FG*qw\nlocal LZ=HJ-CV\nlocal ZX=5*rt\nlocal er=10*rt\nty[#ty+1]='<svg viewBox=\"0 0 100 100\" x=\"'..(Mq-er/2)..'\" y=\"'..(we-er-ZX)..'\" width=\"'..er..'\" height=\"'..er..'\">'ty[#ty+1]=o.kD.HF\nty[#ty+1]='</svg>'\nty[#ty+1]=\n'<svg viewBox=\"0 0 100 100\" x=\"'..(Mq-er/2)..'\" y=\"'..(we+qw+ZX)..'\" width=\"'..er..'\" height=\"'..er..'\">'ty[#ty+1]=o.kD.JF\nty[#ty+1]='</svg>'\nty[#ty+1]='<rect class=\"separator\" x=\"'..(\nMq-VB/2)..'\" y=\"'..we..'\" width=\"'..VB..'\" height=\"'..qw..'\"/>'\nty[#ty+1]='<rect class=\"separator\" x=\"'..(Mq-NM/2)..'\" y=\"'..CV..'\" width=\"'..NM..'\" height=\"'..LZ..'\"/>'return E.E(ty)end,FF=function(AS,PA)\nlocal ZX=AS.UF\nlocal XC={}VR={}\nif ZX~=nil then VR.sS={}if ZX.zS~=nil then VR.dS={}end\nif ZX.OT~=nil then if\nZX.OT.sS~=nil then VR.sS=ZX.OT.sS end\nif ZX.OT.dS~=nil then\nVR.dS=ZX.OT.dS end\nif ZX.OT.BR~=nil then VR.BR=ZX.OT.BR end\nif\nZX.OT.NR~=nil then VR.NR=ZX.OT.NR end\nif ZX.OT.AD~=nil then\nVR.AD=ZX.OT.AD end\nif ZX.OT.PT~=nil then VR.PT=ZX.OT.PT end end end\nlocal LZ={{KF=VR.sS},{KF=VR.dS},{KF=VR.BR},{KF=VR.NR}}if VR.AD~=nil then LZ[#LZ+1]={KF=VR.AD}end\nif VR.PT~=nil then\nLZ[#LZ+1]={KF=VR.PT}end\nlocal KL=o.nR.nA\nlocal SD=AS.pI.jS*KL\nlocal DF=AS.pI.kS*KL\nlocal GH=AS.pI.hS*KL\nlocal HJ=10*KL\nlocal JK=50*KL\nlocal FG=JK+12*KL\nfor VB,CV in ipairs(LZ)do\nlocal Mq=false\nif VB==3 and M.BR then Mq=true elseif VB==5 and M.BR then Mq=true elseif VB==4 and M.NR and not M.BR then\nMq=true end\nXC[#XC+1]=\n'<g class=\"menuLegend\" data-active=\"'..T(Mq)..'\">'\nlocal NM=CV.KF\nlocal qw=PA+HJ*(VB-1)local BN=HJ*0.55\nif VB<=5 then\nXC[#XC+1]=\n'<svg class=\"menuLegendGlyph\" viewBox=\"0 0 100 100\" x=\"'..JK..'\" y=\"'..(qw- (HJ-BN))..'\" width=\"'..BN..'\" height=\"'..BN..'\">'local we=o.kD.LF\nif VB>1 then we=o.kD.ZF end\nif VB==5 and VR.AD~=nil then\nwe=o.kD.XF end\nXC[#XC+1]=we\nXC[#XC+1]='</svg>'end\nif VB==3 then\nXC[#XC+1]='<text class=\"menuLegendKey\" x=\"'..(JK-GH)..'\" y='..qw..'>alt +</text>'elseif VB==4 then\nXC[#XC+1]='<text class=\"menuLegendKey\" x=\"'..(JK-GH)..'\" y='..qw..'>shift +</text>'elseif VB==5 and VR.AD~=nil then\nXC[#XC+1]='<text class=\"menuLegendKey\" x=\"'..(JK-GH)..'\" y='..qw..'>alt +</text>'end\nif NM~=nil then local we='Open'if ZX.zS==nil then we='Select'end\nif VB==1 then we='Back'end\nif VB==#LZ then we='Lua chat input is active'end\nif NM.nS~=nil then\nwe=NM.nS end\nXC[#XC+1]='<text class=\"menuLegendText\" x=\"'..FG..'\" y='..qw..'>'..we..'</text>'end\nXC[#XC+1]='</g>'end\nreturn E.E(XC),#LZ*HJ end,SF=function(AS,SD,PA)\nlocal kj={}local op=o.nR.nA\nlocal rt=SD.mD._D\nlocal we=SD.mD.KP\nlocal qw={}if rt then\nE.W(qw,'data-hover=\"true\"')end\nif we then E.W(qw,'data-active=\"true\"')end\nlocal LZ=' '..E.E(qw,' ')local GH=BR('menuOption')\nlocal yu=AS.pI.kS*op\nlocal lk=AS.pI.jS*op\nlocal Mq=AS.pI.hS*op\nlocal KL=lk+Mq\nlocal CV=AS.pI.XS*op\nlocal NM=R.Y(5*op)local JK=1*op\nlocal ui=R.Y(KL*PA+CV)\nlocal BN=R.Y(ui+lk/2)local FG=R.Y(ui+lk)local VB=0\nlocal ZX=R.Y(Mq)local DF=R.Y(VB+yu/2)\nlocal er=R.Y(yu)local XC=R.Y(yu-Mq)kj[#kj+1]='<g'..GH..LZ..'>'local pl=0\nlocal ty=0\nif SD.EF==NR then pl=R.Y(lk)local hg=R.Y(lk*0.75)\nlocal jh=R.Y((lk-hg)/2)\nkj[#kj+1]='<svg viewBox=\"0 0 100 100\" x=\"'..(er-hg)..'\" y=\"'..(ui+jh)..'\" width=\"'..hg..'\" height=\"'..hg..'\">'..o.kD.CF..'</svg>'end\nif rt then local jh=0.2\nlocal fd=(J.HQ()-AS.VF)/jh\nfd=A.t(fd,0,1)ty=2*(1-fd)local gf=fd*lk\nlocal hg=BN-gf/2\nkj[#kj+1]='<rect x=\"0\" y=\"'..hg..'\" width=\"'..(yu-pl)..'\" height=\"'..gf..'\" />'\nif M.VR and AS.BF~=nil and not AS.NF then local ds=\n(J.HQ()-AS.MF.VR)/AS.BF.PD\nkj[#kj+1]='<rect class=\"inputHold\" x=\"0\" y=\"'..hg..'\" width=\"'..((yu-\npl)*ds)..'\" height=\"'..gf..'\" />'end end\nif we then NM=NM*2 end\nlocal HJ=MR(VB+ty,ui+ty,er-ty-pl,FG-ty,NM,JK)if we or rt then kj[#kj+1]=HJ end\nkj[#kj+1]='<text x=\"'..ZX..'\" y=\"'..BN..'\">'..SD.nS..'</text>'\nif SD.OT~=nil and SD.OT.PT~=nil and rt then\nlocal hg=R.Y(lk*0.6)local jh=R.Y((lk-hg)/2)\nkj[#kj+1]='<svg viewBox=\"0 0 100 100\" x=\"'..(er-pl-hg-jh)..'\" y=\"'..(ui+jh)..'\" width=\"'..hg..'\" height=\"'..hg..'\">'kj[#kj+1]=o.kD.qF\nif J.HQ()/0.75%1 >0.5 then\nkj[#kj+1]=o.kD.wF end\nkj[#kj+1]='</svg>'pl=pl+hg+jh end\nif SD.OT~=nil and SD.OT.hT~=nil then local jh=nil\nif W(SD.OT.hT)=='table'then\njh=SD.OT.hT.ST(SD,SD.OT.hT.DT)elseif W(SD.OT.hT)=='boolean'then jh=SD.OT.hT elseif W(SD.OT.hT)=='string'or\nW(SD.OT.hT)=='number'then jh=SD.OT.hT end\nif W(jh)=='boolean'then local gf=R.Y(lk*0.6)local hg=R.Y((lk-gf)/2)\nkj[\n#kj+1]='<svg viewBox=\"0 0 100 100\" x=\"'..(er-pl-gf-hg)..'\" y=\"'..(ui+hg)..'\" width=\"'..gf..'\" height=\"'..gf..'\">'kj[#kj+1]=eE(jh,o.kD.eF,o.kD.rF)\nkj[#kj+1]='</svg>'elseif jh~=nil then\nkj[#kj+1]='<text class=\"valueText\" x=\"'..(XC-pl)..'\" y=\"'..BN..'\">'..jh..'</text>'end end\nkj[#kj+1]='</g>'return E.E(kj)end,GF=function(SD,AS,PA)\nif\nSD.UF.OT==nil or SD.UF.OT.vS==nil then return end\nlocal DF=SD.UF\nlocal VB={}local CV=o.nR.nA\nlocal FG=SD.pI.jS*CV\nlocal KL=SD.pI.kS*CV\nlocal GH=SD.pI.hS*CV\nlocal HJ=11*CV\nlocal LZ=10*CV+AS\nlocal JK=10*CV\nlocal XC=5*CV\nVB[\n#VB+1]='<g class=\"menuTooltip\">'if PA then\nVB[#VB+1]='<rect class=\"separator\" x=\"'..XC..'\" y=\"'..AS..'\" width=\"'..(KL-XC*2)..'\" height=\"1\"/>'end\nlocal ZX=SD.UF.OT.vS\nif W(SD.UF.OT.vS)=='string'then ZX={SD.UF.OT.vS}end\nfor BN,NM in ipairs(ZX)do local Mq=LZ+HJ*(BN-1)\nVB[#VB+1]='<text class=\"menuTooltipText\" x=\"'..JK..'\" y=\"'..Mq..'\">'..NM..'</text>'end\nVB[#VB+1]='</g>'return E.E(VB)end,QD=function(PA)\nlocal JK=M\nlocal GH=J.HQ()local HJ=0.2\nlocal AS=(JK.ZR and not PA.tF.ZR)or(\nPA.BF==nil and JK.ZR and GH-PA.MF.ZR>HJ)\nlocal DF=(JK.XR and not PA.tF.XR)or(PA.BF==nil and JK.XR and\nGH-PA.MF.XR>HJ)\nlocal FG=(JK.VR and not PA.tF.VR)or(PA.BF==nil and JK.VR and\nGH-PA.MF.VR>HJ)\nlocal SD=(JK.CR and not PA.tF.CR)or(PA.BF==nil and JK.CR and\nGH-PA.MF.CR>HJ)PA.tF={ZR=JK.ZR,XR=JK.XR,CR=JK.CR,VR=JK.VR}local KL=PA.UF\nif AS then\nif JK.BR and\nKL~=nil and KL.OT~=nil and KL.OT.AD~=nil then\nKL.OT.AD.ST(true,KL.OT.AD.DT)else PA.pI.TF=PA.pI.TF-1 end\nPA.VF=J.HQ()PA.MF.ZR=J.HQ()aW:QQ(mW.hP)end\nif DF then if\nJK.BR and KL~=nil and KL.OT~=nil and KL.OT.AD~=nil then KL.OT.AD.ST(false,KL.OT.AD.DT)else\nPA.pI.TF=PA.pI.TF+1 end\nPA.VF=J.HQ()\nPA.MF.XR=J.HQ()aW:QQ(mW.hP)end\nif SD then PA.MF.CR=J.HQ()aW:QQ(mW.jP)local LZ=PA:OF(PA.pI.YF)if LZ.yF~=\nnil then PA:uF(LZ.yF,LZ)elseif LZ.nD~=nil then PA:uF(LZ.nD,LZ)else\nPA:uF(nil,LZ)end\nif KL~=nil and KL.OT~=nil and\nKL.OT.sS~=nil then\nLZ.OT.sS.ST(LZ,LZ.OT.sS.DT)KL.OT.sS.ST(KL,KL.OT.sS.DT)elseif LZ.OT~=nil and\nLZ.OT.sS~=nil then LZ.OT.sS.ST(LZ,LZ.OT.sS.DT)end end\nif FG then PA.MF.VR=J.HQ()aW:QQ(mW.kP)local KL=PA.UF\nif KL~=nil then\nif KL.OT==nil and\nKL.zS~=nil then PA:uF(KL.zS)else\nif JK.BR and KL.OT.BR~=nil then if KL.OT.BR.PD~=\nnil then PA.BF=KL.OT.BR\nPA.NF=false else\nKL.OT.BR.ST(KL,KL.OT.BR.DT)end elseif JK.NR and KL.OT.NR~=nil then if\nKL.OT.NR.PD~=nil then PA.BF=KL.OT.NR\nPA.NF=false else\nKL.OT.NR.ST(KL,KL.OT.NR.DT)end elseif KL.OT.dS~=nil then if\nKL.OT.dS.PD~=nil then PA.BF=KL.OT.dS\nPA.NF=false else\nKL.OT.dS.ST(KL,KL.OT.dS.DT)end elseif KL.zS~=nil then PA:uF(KL.zS)elseif\nKL.OT.PT~=nil then\nO('Enter any text here in chat to input a new value')end end end elseif JK.VR and PA.BF~=nil then local LZ=J.HQ()-PA.MF.VR\nif PA.BF.PD<LZ and\nnot PA.NF then PA.NF=true\nPA.BF.ST(PA.UF,PA.BF.DT)end elseif PA.BF~=nil then PA.BF=nil end end,pF=function(PA,AS,SD)\nlocal DF=PA:OF(AS)if DF~=nil then DF.yF=SD end end,OF=function(PA,AS)if AS==nil then return\n{zS=nil,nD=nil}end\nfor SD,DF in ipairs(PA.WF)do if DF.zS==AS then return DF end end end,IT=function(PA)local AS=0\nfor SD,DF in\nipairs(PA.WF)do if DF.nD==PA.pI.YF and DF.nD~=DF.zS then\nif PA.pI.TF==AS then return DF end\nAS=AS+1 end end\nfor SD,DF in ipairs(PA.RF)do if DF.EF==PA.pI.YF then if PA.pI.TF==AS then return DF end\nAS=AS+1 end end end}\nfunction MR(x1,y1,x2,y2,PA,AS)if AS==nil then AS=1 end\nlocal SD={}\nSD[#SD+1]='<rect class=\"separator\" x=\"'..x1..'\" y=\"'..y1..'\" width=\"'..PA..'\" height=\"'..AS..'\" />'\nSD[#SD+1]='<rect class=\"separator\" x=\"'..x1..'\" y=\"'..y1..'\" width=\"'..AS..'\" height=\"'..PA..'\" />'\nSD[#SD+1]='<rect class=\"separator\" x=\"'..x1..'\" y=\"'..(y2-AS)..'\" width=\"'..PA..'\" height=\"'..AS..'\" />'\nSD[#SD+1]='<rect class=\"separator\" x=\"'..x1..'\" y=\"'..(y2-PA)..'\" width=\"'..AS..'\" height=\"'..PA..'\" />'\nSD[#SD+1]='<rect class=\"separator\" x=\"'..(x2-PA)..'\" y=\"'..y1..'\" width=\"'..PA..'\" height=\"'..AS..'\" />'\nSD[#SD+1]='<rect class=\"separator\" x=\"'..(x2-AS)..'\" y=\"'..y1..'\" width=\"'..AS..'\" height=\"'..PA..'\" />'\nSD[#SD+1]='<rect class=\"separator\" x=\"'..(x2-PA)..'\" y=\"'..(y2-AS)..'\" width=\"'..PA..'\" height=\"'..AS..'\" />'\nSD[#SD+1]='<rect class=\"separator\" x=\"'..(x2-AS)..'\" y=\"'..(y2-PA)..'\" width=\"'..AS..'\" height=\"'..PA..'\" />'return E.E(SD)end\nfunction zQ(PA)local AS=dE(PA)if AS.uR==nil then O('Invalid ::pos{...} string')else\nqR(AS)end end\nfunction PR()\nlocal PA={wP=A.e(h.UY.x,0.01),eP=A.e(h.UY.y,0.01),uR=A.e(h.UY.z,0.01)}qR(PA)end\nfunction qR(PA)local JK=wE(PA)\nlocal LZ=PA.s\nlocal KL=PA.b\nlocal SD={x=PA.wP,y=PA.eP,z=PA.uR}local HJ=jW(JK)local GH=pW(JK)\nlocal FG=WE(HJ,GH)\nlocal DF=HJ.n..' '..FG..' ['..R.T(GH)..'m]'if LZ==0 then LZ=nil end\nif KL==0 then KL=nil end\nlocal AS={n=DF,c=SD,s=LZ,b=KL}\naQ:CP(aQ.GT,AS)sQ.YT:OD()end\nfunction GR(PA,AS)local SD=AS\nlocal DF=aQ.GT\nlocal FG=aQ:rP(DF,SD)O(FG)end\nfunction KR(PA,AS)local SD=AS\np:cU(SD)end\nfunction DR(PA,AS)local SD=AS\nlocal DF=aQ.GT\np:cU(DF,SD)end\nfunction YR(PA,AS)aQ:XP()sQ.YT:OD()sQ.YT.UT:pF(WR.NS,WR.CS)\nsQ.YT.UT:uF(WR.NS)end\nfunction IR(AS,PA)aQ:NP(aQ.GT,AS)end\nfunction JR(PA,AS)aQ:MP(aQ.GT,AS,PA)sQ.YT:OD()end\nfunction OR(PA,AS)if aQ.GT~=\nnil and aQ.SP[aQ.GT]~=nil then\nreturn aQ.SP[aQ.GT].n end\nreturn'Invalid route id'end\nfunction ZR(PA,AS)aQ.GT=AS\nsQ.YT:OD()sQ.YT.UT:pF(WR.NS,WR.VS)\nsQ.YT.UT:uF(WR.NS)end\nfunction UR(PA,AS)\nsQ.YT.UT:oF(aQ.GT-1)aQ.GT=nil end\nfunction LR(PA,AS)aQ:VP(AS)end\nfunction FR(PA,AS)\naQ:BP(aQ.GT,AS)sQ.YT:OD()end\nfunction HR(up,PA)\nlocal AS=aQ:qP(aQ.GT,PA,eE(up,PA-1,PA+1))sQ.YT.UT:oF(AS+2)sQ.YT:OD()end\nfunction SR(PA,AS)if AS.ZA=='config'then c:dI(AS.RI)elseif AS.ZA=='route'then aQ:dI(AS.RI)elseif\nAS.ZA=='usb'then aQ:DP(AS.RI)end end\nfunction AR(PA,AS)c:sR(AS.zS,AS.xS)end\nfunction RR(PA,AS)c:sR(AS,PA)end\nfunction TR(PA,AS)if AS=='config'and c.RI~=nil then return c.RI.n elseif\nAS=='routes'and aQ.RI~=nil then return aQ.RI.n end\nreturn'-'end\nfunction wR(PA,AS)end\nfunction o.LD()local PA=j\nlocal AS=eR\nlocal SD={}\nSD[#SD+1]='<style>'..o.RD.lF..'></style>'\nSD[#SD+1]=[[<div class=\"infoPanel\" style=\"transform:translate(2vw,2vh)\">]]..o.kD.kF..[[\n        </div>]]return E.E(SD)end\no.kD={CF='<path d=\"M0,0 L0,100 L100,50 Z\"/>',HF='<path class=\"menuLegendKey\" d=\"M50,0 L0,100 L100,100 Z\"/>',JF='<path class=\"menuLegendKey\" d=\"M0,0 L100,0 L50,100 Z\"/>',ZF='<path class=\"menuLegendKey\" d=\"M0,0 L0,100 L100,50 Z\"/>',LF='<path class=\"menuLegendKey\" d=\"M0,50 L100,100 L100,0 Z\"/>',XF='<path class=\"menuLegendKey\" d=\"M0,0 L50,100 L-50,100 Z\"/><path class=\"menuLegendKey\" d=\"M50,0 L150,0 L100,100 Z\"/>',eF='<rect class=\"checkBox checked\" width=\"100\" height=\"100\" y=\"0\"/>',rF='<rect class=\"checkBox\" width=\"100\" height=\"100\" y=\"0\"/>',qF='<rect class=\"editableBg\" width=\"100\" height=\"100\"/>',wF='<rect class=\"editableGlyph\" width=\"80\" height=\"15\" x=\"10\" y=\"75\"/>',aD=[[\n        <svg viewBox=\"0 0 100 100\">\n        <circle style=\"stroke-width: 4px; stroke: rgb(20, 220, 40); fill: none;\" cx=\"75\" cy=\"75\" r=\"33.333\" transform=\"matrix(1, 0, 0, 0.999999, -24.999976, -24.999961)\" bx:origin=\"0.331 0.224\"/>\n        <path style=\"fill: rgb(46, 139, 87); stroke-width: 4px; stroke: rgb(20, 220, 40);\" d=\"M 83.333 50 L 100 50\" bx:origin=\"-2.677 0\"/>\n        <path style=\"fill: rgb(46, 139, 87); stroke-width: 4px; stroke: rgb(20, 220, 40);\" d=\"M 60.767 50 L 77.433 50\" transform=\"matrix(-1, 0, 0, -1, 77.435763, 100.000003)\" bx:origin=\"-1.323 0\"/>\n        <path style=\"fill: rgb(46, 139, 87); stroke-width: 4px; stroke: rgb(20, 220, 40);\" d=\"M 101.733 31.6 L 118.4 31.6\" transform=\"matrix(0, 1, -1, 0, 81.598635, -18.398635)\" bx:origin=\"-3.104 0\"/>\n        <path style=\"fill: rgb(46, 139, 87); stroke-width: 4px; stroke: rgb(20, 220, 40);\" d=\"M 64.933 31.6 L 81.6 31.6\" transform=\"matrix(0, -1, 1, 0, 18.399367, 81.599368)\" bx:origin=\"-0.896 0\"/>\n        <circle style=\"fill: rgb(46, 139, 87); fill-opacity: 0; stroke: rgb(20, 220, 40); stroke-width: 2px;\" cx=\"50\" cy=\"50\" r=\"2.5\" bx:origin=\"0.5 0.5\"/>\n        </svg>\n    ]],zD=[[\n        <svg viewBox=\"125 125 150 150\">\n        <path style=\"fill: rgb(46, 139, 87); stroke-width: 4px; stroke: rgb(20, 220, 40);\" d=\"M 150 150 L 250 250\" bx:origin=\"0.5 0.5\"/>\n        <path style=\"fill: rgb(46, 139, 87); stroke-width: 4px; stroke: rgb(20, 220, 40);\" d=\"M 150 150 L 250 250\" transform=\"matrix(0, 1, -1, 0, 400.000012, 0)\" bx:origin=\"0.5 0.5\"/>\n        <circle style=\"stroke-width: 4px; stroke: rgb(20, 220, 40); fill: none;\" cx=\"200\" cy=\"200\" r=\"50\"/>\n        <path style=\"fill: rgb(46, 139, 87); stroke-width: 4px; stroke: rgb(20, 220, 40);\" d=\"M 250 200 L 275 200\"/>\n        <path style=\"fill: rgb(46, 139, 87); stroke-width: 4px; stroke: rgb(20, 220, 40);\" d=\"M 125 200 L 150 200\" transform=\"matrix(-1, 0, 0, -1, 275.000008, 400.000012)\"/>\n        <path style=\"fill: rgb(46, 139, 87); stroke-width: 4px; stroke: rgb(20, 220, 40);\" d=\"M 249.725 200.275 L 274.725 200.275\" transform=\"matrix(0, 1, -1, 0, 400.275006, 0.274988)\" bx:origin=\"-1.989 0\"/>\n        <path style=\"fill: rgb(46, 139, 87); stroke-width: 4px; stroke: rgb(20, 220, 40);\" d=\"M 250.275 200.275 L 275.275 200.275\" transform=\"matrix(0, -1, 1, 0, -0.275, 400.275006)\" bx:origin=\"-2.011 0\"/>\n        </svg>\n    ]],dD=[[\n        <svg viewBox=\"-0 0 100 100\">\n        <path style=\"fill: rgb(216, 216, 216); stroke-width: 4px; stroke: rgb(255, 255, 255);\" d=\"M 61.25 56.25 L 106.25 56.25\" transform=\"matrix(0, -1, 1, 0, -6.25036, 106.249645)\" bx:origin=\"-0.111119 0\"/>\n        <path style=\"fill: rgb(216, 216, 216); stroke-width: 4px; stroke: rgb(255, 255, 255);\" d=\"M 55 50 L 100 50\" bx:origin=\"-0.111119 0\"/>\n        <path style=\"fill: rgb(216, 216, 216); stroke-width: 4px; stroke: rgb(255, 255, 255);\" d=\"M 55 50 L 100 50\" transform=\"matrix(0, 1, -1, 0, 99.999644, 0.000355)\" bx:origin=\"-0.111119 0\"/>\n        <path style=\"fill: rgb(216, 216, 216); stroke-width: 4px; stroke: rgb(255, 255, 255);\" d=\"M 55 50 L 100 50\" transform=\"matrix(-1, 0, 0, -1, 99.999293, 100.000003)\" bx:origin=\"-0.111119 0\"/>\n        </svg>\n    ]],gD=[[\n        <svg viewBox=\"-62.5 -62.5 125 125\">\n        <path d=\"M 62.5 0 A 62.5 62.5 0 0 1 0 62.5 A 62.5 62.5 0 0 1 -62.5 0 A 62.5 62.5 0 0 1 0 -62.5 A 62.5 62.5 0 0 1 62.5 0 Z\" style=\"fill: none; stroke-dasharray: 65; stroke: rgb(246, 0, 254); stroke-width: 6px;\"/>\n        <path d=\"M 5 0 A 5 5 0 0 1 0 5 A 5 5 0 0 1 -5 0 A 5 5 0 0 1 0 -5 A 5 5 0 0 1 5 0 Z\" style=\"fill: rgb(246, 0, 254); stroke: rgb(246, 0, 254);\"/>\n        </svg>\n    ]],sD=[[\n        <svg viewBox=\"-3.175 0 106.391 103.181\">\n        <path style=\"fill: rgb(216, 216, 216); stroke-width: 5px; stroke: rgb(21, 0, 255);\" d=\"M 22.767 1.724 L 76.628 1.715\" transform=\"matrix(-1, 0, 0, -1, 99.718166, 3.439)\" bx:origin=\"0.5 -5363.962451\"/>\n        <path style=\"fill: rgb(216, 216, 216); stroke: rgb(21, 0, 255); stroke-width: 3px;\" d=\"M 34.86 15.167 L 65.007 15.161\" transform=\"matrix(0, 1, -1, 0, 65.187944, -34.859944)\" bx:origin=\"1.658538 1.046562\"/>\n        <path d=\"M 52.5 50 C 52.5 51.381 51.38 52.5 50 52.5 C 48.619 52.5 47.5 51.381 47.5 50 C 47.5 48.619 48.619 47.5 50 47.5 C 51.38 47.5 52.5 48.619 52.5 50 Z\" style=\"stroke: rgb(21, 0, 255); fill: rgb(21, 0, 255);\" bx:origin=\"0 0\"/>\n        <path style=\"fill: rgb(216, 216, 216); stroke-width: 5px; stroke: rgb(21, 0, 255);\" d=\"M 23.09 98.285 L 76.951 98.276\" transform=\"matrix(0.707107, -0.707107, 0.707107, 0.707107, -20.694729, 50.010377)\" bx:origin=\"0.5 -5363.962451\"/>\n        <path style=\"fill: rgb(216, 216, 216); stroke: rgb(21, 0, 255); stroke-width: 3px;\" d=\"M 0.021 50 L 30.168 49.994\" transform=\"matrix(-0.707107, -0.707107, 0.707107, -0.707107, 50.035558, 120.725971)\" bx:origin=\"1.658538 1.046562\"/>\n        <path style=\"fill: rgb(216, 216, 216); stroke-width: 5px; stroke: rgb(21, 0, 255);\" d=\"M 23.09 98.285 L 76.951 98.276\" transform=\"matrix(0.707107, 0.707107, -0.707107, 0.707107, 49.996057, -20.729293)\" bx:origin=\"0.5 -5363.962451\"/>\n        <path style=\"fill: rgb(216, 216, 216); stroke: rgb(21, 0, 255); stroke-width: 3px;\" d=\"M 0.021 50 L 30.168 49.994\" transform=\"matrix(0.707107, -0.707107, 0.707107, 0.707107, -20.704741, 50.014894)\" bx:origin=\"1.658538 1.046562\"/>\n        </svg>\n    ]],jF=[[\n        <svg viewBox=\"-74.652 -64 148.511 131.373\" >\n        <path style=\"fill: rgb(216, 216, 216); stroke-width: 5px; stroke: rgb(255, 60, 0);\" d=\"M -42.75 -62.99 L 42.25 -63\" transform=\"matrix(-1, 0, 0, -1, 0.01, -125.990009)\" bx:origin=\"0.503 0.5\"/>\n        <path style=\"fill: rgb(216, 216, 216); stroke: rgb(255, 60, 0); stroke-width: 3px;\" d=\"M -17.6 -46.39 L 17.4 -46.4\" transform=\"matrix(0, 1, -1, 0, -46.390001, -46.400003)\" bx:origin=\"0.503 0.5\"/>\n        <path style=\"fill: rgb(216, 216, 216); stroke-width: 5px; stroke: rgb(255, 60, 0);\" d=\"M 9.977 30.349 L 94.977 30.339\" transform=\"matrix(0.5, -0.866025, 0.866025, 0.5, 0.08732, 60.839247)\" bx:origin=\"0.503 0.5\"/>\n        <path style=\"fill: rgb(216, 216, 216); stroke: rgb(255, 60, 0); stroke-width: 3px;\" d=\"M 20.751 22.051 L 55.751 22.041\" transform=\"matrix(-0.866025, -0.5, 0.5, -0.866025, 60.550264, 60.316404)\" bx:origin=\"0.503 0.5\"/>\n        <path style=\"fill: rgb(216, 216, 216); stroke-width: 5px; stroke: rgb(255, 60, 0);\" d=\"M -96.025 30.583 L -11.025 30.573\" transform=\"matrix(0.5, 0.866025, -0.866025, 0.5, -0.153671, 61.422167)\" bx:origin=\"0.503 0.5\"/>\n        <path style=\"fill: rgb(216, 216, 216); stroke: rgb(255, 60, 0); stroke-width: 3px;\" d=\"M -56.499 22.283 L -21.499 22.273\" transform=\"matrix(0.866025, -0.5, 0.5, 0.866025, -16.349816, -16.462319)\" bx:origin=\"0.503 0.5\"/>\n        <path d=\"M 5 0 A 5 5 0 0 1 0 5 A 5 5 0 0 1 -5 0 A 5 5 0 0 1 0 -5 A 5 5 0 0 1 5 0 Z\" style=\"stroke: rgb(255, 60, 0); fill: rgb(255, 60, 0);\"/>\n        </svg>\n    ]],jD=[[\n        <svg viewBox=\"0 0 100 100\" >\n        <circle style=\"fill: none; stroke: rgb(204, 204, 204); stroke-width: 10px;\" cx=\"50\" cy=\"50\" r=\"45\"/>\n        </svg>\n    ]],hD=[[\n        <svg viewBox=\"15.439 0.929 83.246 97.528\">\n        <path style=\"stroke: rgb(0, 0, 0); stroke-opacity: 0; fill: rgb(204, 204, 204);\" d=\"M 15.439 15.212 A 48.764 48.764 0 1 1 15.439 84.174 A 38.005 38.005 0 1 0 15.439 15.212 Z\" bx:shape=\"crescent 49.92 49.693 48.764 270 0.7 1@2724855a\"/>\n        </svg>\n    ]],xD=[[\n        <svg viewBox=\"5 5 493 475\">\n        <path fill=\"#FFF\" stroke=\"#000\" stroke-width=\"12.5\" d=\"M335.4 412.27l63.28 32.9c14.98 13.03 11.24 21.9 21.65 29.96 10.26 9.43 16.8 10.96 22.9 2.08 4.85-10.1 3.88-20.2 5.4-31.2 7.08-6.8 12.9-10.2 18.74-17 6.38-7.1 6.1-14.1-3.75-19.1-8.2-3.3-15.96-5-25.8-2.1-6.26 2-12.92 3.1-21.24-.4l-68.28-31.7-194-67.3c-26.1-12.7-47.78-22.2-73.6-36.5-14.02-11.1-9.5-23.8-26.48-34.1-7.47-3.7-12.87-5.4-18.85 4.8-3.82 9-3.52 18.6-4.1 27.9-6.68 7.2-14.24 11.4-19.73 20.3-7.95 12.8 4.1 17 10.6 18.6 18.44 4.6 25.1-3.7 42.1-.3 33.05 15.4 66.4 31.4 98.3 47.1z\" stroke-linejoin=\"round\"/>\n        <path fill=\"#FFF\" stroke=\"#000\" stroke-width=\"12.5\" d=\"M349.56 354.82l94.5-44.54c17.9-7.08 20.4 2.9 36.2 0 12.08-.14 22.07-4.86 21.24-16.23-6.1-9.03-11.8-14.7-22.48-24.57.56-10.54-1.4-20.67-5.4-30.8-4.17-5.97-11.67-8.6-22.9 2.08-11.38 8.6-7.78 20.12-22.07 32.05-23.3 11.6-44.54 21.8-70.35 34.6l-196.5 67.9c-22.75 12.1-43.42 23.3-69.5 33.3-21.24 5.3-20.4-7.7-46.2.9-7.37 5.8-7.23 14.2-1.26 20.4 6.93 6.8 11.8 11.1 17.9 17.1 1.94 8.6 2.22 16 3.33 26.3 4.16 12.6 13.33 11.9 21.23 5.8 3.47-4.3 7.77-8.2 10.4-12.9 3.6-6.2 7.64-13.3 12.5-19.1l62.85-33.3z\" stroke-linejoin=\"round\"/>\n        <path fill=\"#FFF\" stroke=\"#000\" stroke-width=\"12.5\" d=\"M128.5 221.56c-19.14-18.6-32.5-50.9-34.37-85.75-2-38.4 18.22-76.5 48.54-98.3C176.64 13.6 233.43 7 268.75 8.8c23.92.02 77.2 12.42 96.02 26.43 33 24 50.68 58.04 51.9 96.85 1.82 38.98-14.6 68.68-34.7 87.2\"/>\n        <path fill=\"#FFF\" d=\"M130.4 215s-23.13 70.03 21.44 81.97l16.25 93.66c17.1 73.72 154.4 73.77 174.6 0l16.2-93.66c45.7-12.2 22.5-82 22.5-82z\"/>\n        <path fill=\"none\" stroke=\"#000\" stroke-width=\"12.5\" d=\"M129.66 112.27c-7.75 6.78-6.77 16.97-5.38 32.2 1.1 11.55 8.48 22.93 8.87 33.5 2.7 22.27-3.88 44.56-6.98 62.78-2.13 20.92 3.88 38.95 11.63 45.92 7.75 6.88 17.76 9.73 28.27 12.94 9.55 2.5 14.5 6.9 21.73 12.3 8.6 9.2 10.66 16.7 10.46 26m183.8-226.1c7.75 6.8 6.77 17 5.38 32.2-1.1 11.6-8.48 23-8.87 33.5-2.7 22.3 3.88 44.6 6.98 62.8 2.13 21-3.88 39-11.63 46-7.75 6.9-21.94 10.6-28.27 12.9-7.37 2.6-14.92 7.3-21.72 12.7-8.2 7.9-10.66 16.3-10.47 25.6\"/>\n        <path fill=\"none\" stroke=\"#000\" stroke-width=\"12.5\" d=\"M151.82 296.96c6.94 16.8 14.3 33.16 15 50.37-3.2 13.88-2.23 30.25 1.24 43.3 4.44 17.9 21.78 39.12 39.13 46.2 17.7 6.45 28.8 8.12 48.7 8.12\"/>\n        <path fill=\"none\" stroke=\"#000\" stroke-width=\"12.5\" d=\"M358.92 296.96c-6.94 16.8-14.3 33.16-14.98 50.37 3.2 13.87 2.22 30.25-1.25 43.3-4.5 17.9-22 38.5-39.4 45.58-17.4 7.1-28.5 8.8-48.3 8.8\"/>\n        <path stroke=\"#000\" stroke-width=\"1pt\" d=\"M251.9 245.7c-9.7 7.38-11.86 9.86-17.22 18.02-1.94 3.15-5.56 10.5-6.55 15.44-1 4.94-1.73 12.1-1.72 15.9.1 12.85 4.1 20.9 8.6 20.63 4-.5 9.1-4.7 16.8-14.1m7.1-55.7c9.7 7.3 11.9 9.8 17.2 18 2 3.1 5.6 10.5 6.6 15.4s1.8 12.1 1.7 15.9c0 12.8-4.1 20.9-8.5 20.6-4-.5-9.1-4.7-16.8-14.1m-89.5-112.3c13.5-2.4 26.5-3.9 40-5.4 17.6-4.5 26.5 15.6 21.7 30.8-6.1 13.4-14.7 25.2-24.5 36.6-7.6 8.6-16.7 9.9-25.4 7-7-2-13.4-6.3-20.4-16.3-3-8.6-5.6-13.1-9.5-23.7-3.02-9.9 1.7-24.6 18.3-29.2zm172.1 0c-13.4-2.4-26.5-3.9-39.9-5.4-17.6-4.5-26.5 15.6-21.6 30.8 6.1 13.4 14.7 25.2 24.6 36.6 7.7 8.6 16.8 9.9 25.4 7 7-2 13.5-6.3 20.4-16.3 3.1-8.6 5.7-13.1 9.6-23.7 3.1-9.9-1.7-24.6-18.3-29.2z\"/>\n        <path fill=\"none\" stroke=\"#000\" stroke-width=\"6.25\" d=\"M169.23 304.53c5.7 13.34 7.45 18.4 11.55 31.72 3.5 12.3 4.8 19.8 6.95 37.26m153.37-69.7c-5.7 13.4-7.46 18.4-11.57 31.7-3.5 12.3-4.78 19.8-6.94 37.3\"/>\n        <path fill=\"none\" stroke=\"#000\" stroke-width=\"5\" d=\"M193.52 335.73c14.7 9.03 40.16 10.42 62.95 10 25.4-.12 47.13-1.95 61.4-10.6m-119.2 24.15c16.23 10.2 35.33 13.7 57.32 12.88 22.8-.56 40.3-2.48 56-13.17\"/>\n        <path fill=\"none\" stroke=\"#000\" stroke-width=\"6.25\" d=\"M186.9 371.64c17.36 20.95 41.6 24.6 69.17 25.32 29.5 1.08 59.16-10.65 66.8-25.3\"/>\n        <path stroke=\"#000\" stroke-width=\"5\" d=\"M198.44 340.26l-.4 41.2m13.93-36.83l-.2 44.12m15.2-42.25l-.43 46.2m13.96-45.16l-.22 46.83m15.4-46.4v46.82m14.57-47.1l.2 46.8m12.92-48.1l.4 46m14.8-48.5l.2 44.1m13.53-49.6l.4 41.6\"/>\n      </svg>\n    ]],kF=[[\n        <svg viewBox=\"0 0 500 300\">\n        <rect width=\"500\" height=\"300\" style=\"stroke: rgb(0, 0, 0); fill: rgb(171, 171, 171);\"/>\n        <text style=\"fill: rgb(51, 51, 51); font-family: Arial, sans-serif; font-size: 14px; white-space: pre;\" x=\"195.012\" y=\"12.711\" bx:origin=\"-2.298804 0.000011\">INSTRUCTIONS</text>\n        <text style=\"white-space: pre; fill: rgb(51, 51, 51); font-family: Arial, sans-serif; font-size: 11.6px;\" x=\"58.856\" y=\"60.698\" transform=\"matrix(0.42815, 0, 0, 0.42815, -21.666808, -5.858888)\">Command List          <tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>   <tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/goto<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/convert<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/debug<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/setMaxSpaceSpeed /setMSP<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/setMaxPitch /setMP<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/setMaxRoll /setMR<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/shield <tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/space <tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/setHover<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/atp<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan><tspan x=\"58.85599899291992\" dy=\"1em\"></tspan><tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/alt /altitude<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan><tspan x=\"58.85599899291992\" dy=\"1em\"></tspan><tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/orbitAlt<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/radar<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/unit<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/agg<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/aggAlt<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan><tspan x=\"58.85599899291992\" dy=\"1em\"></tspan></text>\n        <text style=\"white-space: pre; fill: rgb(51, 51, 51); font-family: Arial, sans-serif; font-size: 11.6px;\" x=\"23.487\" y=\"213.779\" transform=\"matrix(0.549728, 0, 0, 0.549728, -9.379023, 53.990087)\">Alt-1 Toggle AP -- Toggle Autopilot<tspan x=\"23.48699951171875\" dy=\"1em\"></tspan>Alt-2 Altitude Hold -- Toggles Alt hold. /alt to set altitude or pressing w/s will set to surrent altitude. <tspan x=\"23.48699951171875\" dy=\"1em\"></tspan>Alt-3 Orbital Hold -- Toggle Orbital hold: Orbits in your current direction. /orbitAlt to set Altitude<tspan x=\"23.48699951171875\" dy=\"1em\"></tspan>Alt-4 Radial Hold -- Radial Out: Up, Radial In: Down, Camera Aim: aims where you look<tspan x=\"23.48699951171875\" dy=\"1em\"></tspan>Alt-5 Engine Mode -- All,Primary,Hybrid, Locked: See Advanced Engine control <tspan x=\"23.48699951171875\" dy=\"1em\"></tspan>Alt-6 Slow Flat -- Toggles auto leveling below 200km/h<tspan x=\"23.48699951171875\" dy=\"1em\"></tspan>Alt-7 AR Mode -- Planets,Moons,Vectors <tspan x=\"23.48699951171875\" dy=\"1em\"></tspan>Alt-8 Rotation Damp. -- Toggle rotation dampening (adjusters stop you from spinning or not) <tspan x=\"23.48699951171875\" dy=\"1em\"></tspan>Alt-9 Instructions -- toggle this Menu<tspan x=\"23.48699951171875\" dy=\"1em\"></tspan> <tspan x=\"23.48699951171875\" dy=\"1em\"></tspan>Alt-Shift-2 Follow Mode -- Remote use only. Ship will follow you when you are more then 200m away <tspan x=\"23.48699951171875\" dy=\"1em\"></tspan>    <tspan x=\"23.48699951171875\" dy=\"1em\"></tspan>G - Parking -- land/lock brakes. No throttle control when parked.<tspan x=\"23.48699951171875\" dy=\"1em\"></tspan></text>\n        <text style=\"white-space: pre; fill: rgb(51, 51, 51); font-family: Arial, sans-serif; font-size: 11.6px;\" x=\"339.597\" y=\"26.326\">Advanced Engine Setup</text>\n        <text style=\"fill: rgb(51, 51, 51); font-family: Arial, sans-serif; font-size: 10px; white-space: pre;\" x=\"343.189\" y=\"39.422\" transform=\"matrix(0.755404, 0, 0, 0.755404, 41.099927, 11.001836)\">You can have 3 groups of rear facing engines and the ship<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>will control the throttles to them independently.<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>You can do this with same engine rarity or different.<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>Significant fuel savings when using Freight/Military combo.<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan><tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>Also its separate from space and Atmo<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>so 3 Atmo groups, 3 space Groups<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan><tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>You must tag the engine groups(lowercase):<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>'primary' -- Main engine, largest or most fuel efficient.<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>'secondary' -- middle engines, next size down<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>'tertiary' -- least fuel efficient or smallest engines<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan><tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>If you have 6 L atmo engines you can just do 3 groups of 2<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>even if they are all same rarity/type. the fuel savings will be<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>minimal in this case but the performance will be the same.<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan><tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>If you only want 2 engine groups, just use:<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>'primary'<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>'secondary'<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan><tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>The ship will use your primary thrust to achieve the desired<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>speed first before kicking in the secondaries, and lastly the<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>tertiary engine group.<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan><tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>                               Engine Modes (Alt-5)<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>'All' - Use all engines equally, none of the above control.<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>'Primary' - use primary engines only, disables other groups<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>'Hybrid' - The above mentioned advanced control<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan>'Locked' - Locks primaries to 100%, throttle controls others.<tspan x=\"343.1889953613281\" dy=\"1em\"></tspan><tspan x=\"343.1889953613281\" dy=\"1em\"></tspan></text>\n        <rect x=\"294\" y=\"28\" width=\"3\" height=\"250\" style=\"stroke: rgb(0, 0, 0);\"/>\n        <text style=\"white-space: pre; fill: rgb(51, 51, 51); font-family: Arial, sans-serif; font-size: 11.6px;\" x=\"58.856\" y=\"60.698\" transform=\"matrix(0.42815, 0, 0, 0.42815, 50.255502, -5.858888)\">Description           <tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>   <tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>-- set target to temp point<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>-- converts a POS to world coords<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>-- toggles debug on and off <tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>-- set Max Space Speed in km/h <tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>-- set Max Pitch Degree <tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>--  set Max Roll Degree <tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>--enable or disable auto shield management<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>--toggle if ship is space capable<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>--set hover height when out of parking mode<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>-- enable or disable atmo Auto throttle <tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>protection. prevents accelerating<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>past atmo burn speed<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>--set specific altitude hold level. pressing <tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>any movement keys after entering this will<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>override this to your current altitude.<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>--set TargetOrbitAlt    <tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>--Toggle Radar Widget  <tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>--Toggle Control Unit Widget<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>--Toggle AGG on/off<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>--set Agg Altitude </text>\n        <text style=\"white-space: pre; fill: rgb(51, 51, 51); font-family: Arial, sans-serif; font-size: 11.6px;\" x=\"58.856\" y=\"60.698\" transform=\"matrix(0.42815, 0, 0, 0.42815, 155.591634, -5.858888)\">Usage Sample (commands not case sensitive)          <tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>   <tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/goto ::pos{0,2,8.6408,80.3893,22354.4102}<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/convert ::pos{0,2,8.6408,80.3893,22354.4102}<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/debug<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/setMSP 20000<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/setMP 45<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/setMR 35<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/shield<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/space<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/setHover 20<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/atp<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan><tspan x=\"58.85599899291992\" dy=\"1em\"></tspan><tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/alt 3000<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan><tspan x=\"58.85599899291992\" dy=\"1em\"></tspan><tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/orbitAlt 10000<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/radar<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/unit<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/aggalt 5000<tspan x=\"58.85599899291992\" dy=\"1em\"></tspan>/agg</text>\n      </svg>\n    ]]}\nfunction o.KD()local PA=o.nR\no.RD={YD=[[\n            ]]..rR('mainBg',{[0]='hsl('..PA.xA..','..(PA.bA*40)..'%,10%)',[100]='hsl('..PA.xA..','..(PA.bA*40)..'%,5%)'},true)..[[\n            ]]..rR('bg',{[0]='hsl('..PA.xA..','..(PA.bA*30)..'%,15%)',[100]='hsl('..PA.xA..','..(PA.bA*30)..'%,10%)'},true)..[[\n            ]]..rR('bgTransparent',{[0]={'hsl('..PA.xA..','..(PA.bA*40)..'%,15%)',0.5},[100]={'hsl('..PA.xA..','..(PA.bA*40)..'%,10%)',0.5}},true)..[[\n            ]]..rR('bgStroke',{[10]='hsl('..PA.xA..','..(PA.bA*50)..'%,50%)',[90]='hsl('..PA.xA..','..(PA.bA*40)..'%,40%)'},true)..[[\n            ]]..rR('fadeToBg',{[60]='hsl('..PA.xA..','..(PA.bA*40)..'%,20%)',[90]='hsl('..PA.xA..','..(PA.bA*40)..'%,15%)'},true)..[[\n            ]]..rR('fadeToBgStroke',{[60]='hsl('..PA.xA..','..(PA.bA*50)..'%,50%)',[90]='hsl('..PA.xA..','..(PA.bA*40)..'%,15%)'},true)..[[\n        ]],TD=\n[[\n            .mainMenu {\n                font-size: ]]..(PA.nA*11)..[[px;\n                font-family: Arial;\n            }\n            .mainMenu text {\n                alignment-baseline: middle;\n                text-shadow: none;\n                stroke-width: 0;\n                white-space: pre;\n                fill: hsl(0,0%,95%);\n                text-anchor: start;\n            }\n            .menuOption text {\n                alignment-baseline: central;\n            }\n            text.valueText {\n                text-anchor: end;\n            }\n            .mainMenu path {\n                fill: hsla(]]..PA.xA..[[,]]..(PA.bA*50)..[[%,80%,0.5);\n            }\n\n            /*hover */\n            [data-hover=true] text {\n                fill: hsl(]]..PA.xA..[[,]]..(PA.bA*50)..[[%,100%);\n            }\n            [data-hover=true] rect {\n                fill: hsla(]]..PA.xA..[[,]]..(\nPA.bA*50)..[[%,50%,0.5);\n            }\n            [data-hover=true] path {\n                fill: hsla(]]..PA.xA..[[,]]..(PA.bA*50)..[[%,100%,0.7);\n            }\n            [data-hover=true] rect.separator {\n                fill: hsl(0,0%,85%);\n            }\n            /*active */\n            [data-active=true] rect.separator {\n                fill: hsl(0,0%,100%);\n            }\n            /*active hover */\n            [data-active=true][data-hover=true] rect {\n            }\n\n            rect.inputHold {\n                fill: hsl(0,0%,75%)\n            }\n\n            text.outlined {\n                text-shadow: 0 0 1vh black;\n            }\n            rect.separator {\n                fill: hsl(0,0%,100%);\n            }\n\n            rect.checkBox {\n                fill: hsl(0,0%,70%);\n            }\n            rect.checkBox.checked {\n                fill: hsl(0,0%,100%);\n            }\n            rect.editableBg {\n                fill: hsla(0,0%,0%,0.3);\n            }\n            rect.editableGlyph {\n                fill: hsl(0,0%,95%);\n            }\n\n            .menuLegendGlyph {\n                overflow: visible;\n            }\n            text.menuLegendText {\n            }\n            text.menuLegendKey {\n                fill: hsl(0,0%,75%);\n                text-anchor: end;\n            }\n            path.menuLegendKey {\n                fill: hsl(0,0%,95%);\n            }\n            .menuLegend[data-active=true] text, .menuLegend[data-active=true] path {\n                fill: hsl(0,0%,100%);\n            }\n        ]],lD=\n[[\n            .widget {\n                position: absolute;\n                white-space: pre;\n                font-size: ]]..(PA.nA*11)..[[px;\n                font-family: Arial;\n                color: hsl(0,0%,95%);\n                background-color: hsla(0,0%,0%,0.2);\n                border:0.1vh;\n                border-style: solid;\n                border-color: hsl(0,0%,95%);\n                text-shadow: 0.2vh 0.2vh 1vh black;\n                padding: ]]..(PA.nA*5)..[[px;\n            }\n            .widget.alert {\n                border-color: hsl(16,100%,50%);\n            }\n            .radarRow {\n                display: relative;\n                height: 1.2vh;\n            }\n            .radarText {\n                position: absolute;\n                overflow: hidden;\n            }\n\n            .coreInfo {\n                text-align: center;\n            }\n\n            .dottext {\n                position:absolute; width:6vh; height:6vh; left:-6vh; top:-6vh; border-radius:1vh;\n            }\n            .dot {\n                position:absolute; width:3vh; height:3vh; left:-1.5vh; top:-1.5vh; border-radius:1vh;\n            }\n            .planets {\n                position:absolute; width:2vh; height:2vh; left:-1vh; top:-1vh; border-radius:1vh;\n            }\n            .ptext {\n                position:absolute; width:3vh; height:3vh; left:-1.5vh; top:-3vh; border-radius:1vh;\n            }\n            .mtext {\n                position:absolute; width:3vh; height:3vh; left:-1.5vh; top:3vh; border-radius:1vh;\n            }\n            .debugInfo {\n                position:absolute; top:17vh; right:76vw; width:10vw; padding-left: 0.5vh; padding-top: 0.5vh; padding-bottom: 0.5vh; padding-right: 0.5vh; border:0.1vh; border-style: solid; border-color: orangered; background-color: rgba(0,0,0, 0.2);\n            }\n            .collision {\n                position:absolute; top:94vh; right:80vw; width:18vw; padding-left: 1vh; padding-top: 1vh; padding-right: 1vh; padding-bottom: 1vh; border:0.1vh; border-style: solid; border-color: orangered;\n            }\n            .radar1 {\n                position:absolute; top:83vh; right:25vw; width:12vw; padding-left: 1vh; padding-right: 1vh; padding-top: 1vh; padding-bottom: 1vh; border:0.1vh; border-style: solid; border-color: ivory;\n            }\n            .radar2 {\n                position:absolute; top:83vh; right:38vw; width:12vw; padding-left: 1vh; padding-right: 1vh; padding-top: 1vh; padding-bottom: 1vh; border:0.1vh; border-style: solid; border-color: ivory;\n            }\n            .radar3 {\n                position:absolute; top:83vh; right:51vw; width:12vw; padding-left: 1vh; padding-right: 1vh; padding-top: 1vh; padding-bottom: 1vh; border:0.1vh; border-style: solid; border-color: ivory;\n            }\n            .speedBar {\n                position:absolute; width:11.5vh; height:11.5vh; left:30vh; top:-12vh; border-radius:1vh;\n            }\n            .throttleBar {\n                position:absolute; width:11.5vh; height:11.5vh; left:35vh; top:-8vh; border-radius:1vh;\n            }\n            .altBar {\n                position:absolute; width:11.5vh; height:11.5vh; left:-40vh; top:-12vh; border-radius:1vh;\n            }\n            .apAlert {\n                position:absolute; top:70vh; right:42vw; width:16vw; padding-left: 1vh; padding-top: 1vh; padding-right: 1vh; padding-bottom: 1vh; border:0.2vh; border-style: solid; border-color: orangered;\n            }\n            .atmoAlert {\n                position:absolute; top:71vh; right:58.5vw; width:10vw; padding-left: 0.2vh; padding-top: 0.2vh; padding-right: 0.2vh; padding-bottom: 0.2vh; border:0.1vh;\n            }\n            .brakeAlert {\n                position:absolute; top:75vh; right:45vw; width:10vw; padding-left: 1vh; padding-top: 1vh; padding-right: 1vh; padding-bottom: 1vh;\n            }\n        ]],lF=[[\n            .infoPanel{\n                position:absolute; width:140vh; height:140; left:0vh; top:0vh; border-radius:1vh;\n            }\n        ]]}end\nfunction IW()local XC=j\nlocal Mq=h\nlocal GH=p\nlocal CV=0\nlocal LZ=0\nlocal ZX=0\nlocal DF=150\nlocal AS=150\nlocal FG=150\nlocal NM=100\nlocal JK=A.e(Z.vQ())local HJ=0\nlocal BN=0\nlocal KL=0\nlocal VB=0\nlocal SD='Travel'local PA=0\nif Mq.UY~=nil and GH.KT~=nil then\nPA=kE((A.e(OW.dist(GH.KT,Mq.UY))),true)end\nif Mq.IY~=nil then\nCV=A.e(Mq.IY*3.6)\nif XC.jT then LZ=A.e(Mq.UU*3.6)else LZ=A.e(Mq.OY*3.6)end\nif CV~=0 and LZ~=0 then ZX=A.t(CV/LZ*200,0,200)\nDF=A.e(A.i(A.t(ZX,170,200),170,200,150,255))\nAS=A.e(A.i(A.t(ZX,170,200),170,200,150,40))\nFG=A.e(A.i(A.t(ZX,170,200),170,200,150,0))end\nif SW()=='travel'then HJ=200*(R.A(JK)/100)else local qw=0\nif\nN~=nil and N.DR~=nil then qw=R.A(N.DR:YW(D.j)or 0)end\nlocal we=R.O(CV,qw)\nif XC.jT then\nlocal er=R.P(1200,A.e((Mq.UU or 0)*3.6))NM=R.O(er,1000)elseif we<=1000 then NM=1000 elseif we<=5000 then NM=5000 elseif we<=10000 then NM=10000 elseif we<=20000 then\nNM=20000 else NM=30000 end\nJK=A.e(R.P(qw,NM))HJ=A.t((qw/NM)*200,0,200)end\nif XC.rD then VB=pW()\nif XC.jT then BN=A.e(Mq.PY.bY)\nKL=A.t(VB/BN*200,0,200)elseif Mq.PY.vY and XC.QY~=nil and VB<=100000 then BN=100000\nKL=A.t(((VB-\nMq.PY.bY)/BN)*200,0,200)elseif VB<=100000 then BN=100000\nKL=A.t((VB/BN)*200,0,200)end end\nif SW()=='cruise'then SD=''else SD=SW()end end\no.tD={fD=\n[[\n            <svg viewBox=\"-77.91 -57.847 135.41 86.458\">\n            <text style=\"fill: rgb(204, 204, 204); font-family: Arial, sans-serif; font-size: 30px; paint-order: fill; stroke: rgb(0, 0, 0); stroke-width: 2px; white-space: pre;\" transform=\"matrix(0.955784, 0, 0, 1.03899, -3.444869, 2.252162)\" x=\"-77.91\" y=\"-30.551\">]]..PA..[[</text>\n            <path style=\"fill: none; stroke: rgb(204, 204, 204);\" d=\"M -77.91 -22.808 L 0.342 -22.808 L 57.5 28.611\"/>\n            </svg>\n        ]],yD=\n[[\n            <svg viewBox=\"-29 -24 72 240\" >\n            <rect width=\"5\" height=\"200\" style=\"fill: rgb(255, 255, 255); fill-opacity: 0; paint-order: stroke; stroke: rgb(94, 94, 94);\" transform=\"matrix(-1, 0, 0, -1, 0, 0)\" x=\"-5\" y=\"-200\" bx:origin=\"0 0\"/>\n            <rect width=\"5\" height=\"]]..ZX..[[\" style=\"stroke: rgb(0, 0, 0); stroke-opacity: 0; fill: rgb(]]..I(DF)..[[, ]]..I(AS)..[[, ]]..I(FG)..[[);\" transform=\"matrix(-1, 0, 0, -1, 0, 0)\" x=\"-5\" y=\"-200\" bx:origin=\"0 0\"/>\n            <text style=\"white-space: pre; fill: #eee; font-family: Bank, sans-serif; font-size: 12px; paint-order: fill; stroke: #b80000; stroke-width: 3px; text-anchor: middle;\" x=\"1.4\" y=\"-2.6\" transform=\"matrix(1.1, 0, 0, 1, 1, 0)\">]]..CV..[[</text>\n            <text style=\"fill: rgb(200, 200, 200); font-family: Bank, sans-serif; font-size: 14px; paint-order: fill; stroke: rgb(0, 0, 0); stroke-width: 2px; white-space: pre;\" transform=\"matrix(0, -1, 1, 0, -102, 9.5)\" x=\"-100\" y=\"100\">Speed</text>\n            <text style=\"fill: rgb(200, 200, 200); font-family: Bank, sans-serif; font-size: 10px; paint-order: fill; stroke: rgb(0, 0, 0); stroke-width: 1px; white-space: pre;\" x=\"6\" y=\"5.5\">]]..LZ..[[</text>\n            </svg>\n        ]],uD=\n[[\n            <svg viewBox=\"-29 -24 72 240\">\n            <rect width=\"5\" height=\"200\" style=\"fill: rgb(255, 255, 255); fill-opacity: 0; paint-order: stroke; stroke: rgb(94, 94, 94);\" transform=\"matrix(-1, 0, 0, -1, 0, 0)\" x=\"-5\" y=\"-200\" bx:origin=\"0 0\"/>\n            <rect width=\"5\" height=\"]]..HJ..[[\" style=\"stroke: rgb(0, 0, 0); stroke-opacity: 0; fill: rgb(150, 150, 150);\" transform=\"matrix(-1, 0, 0, -1, 0, 0)\" x=\"-5\" y=\"-200\" bx:origin=\"0 0\"/>\n            <text style=\"white-space: pre; fill: #eee; font-family: Bank, sans-serif; font-size: 12px; paint-order: fill; stroke: #b80000; stroke-width: 2px; text-anchor: middle;\" x=\"1.4\" y=\"-2.6\" transform=\"matrix(1.1, 0, 0, 1, 1, 0)\">]]..JK..[[</text>\n            <text style=\"fill: rgb(200, 200, 200); font-family: Bank, sans-serif; font-size: 14px; paint-order: fill; stroke: rgb(0, 0, 0); stroke-width: 2px; white-space: pre;\" transform=\"matrix(0, -1, 1, 0, -102, 9.5)\" x=\"-100\" y=\"100\">]]..(SW()=='cruise'and'Cruise'or'Throttle')..[[</text>\n            <text style=\"fill: rgb(200, 200, 200); font-family: Bank, sans-serif; font-size: 10px; paint-order: fill; stroke: rgb(0, 0, 0); stroke-width: 1px; white-space: pre;\" x=\"6\" y=\"5.5\">]]..NM..[[</text>\n            </svg>\n        ]],iD=\n[[\n            <svg viewBox=\"-29 -24 72 240\">\n            <rect width=\"5\" height=\"200\" style=\"fill: rgb(255, 255, 255); fill-opacity: 0; paint-order: stroke; stroke: rgb(94, 94, 94);\" transform=\"matrix(-1, 0, 0, -1, 0, 0)\" x=\"-5\" y=\"-200\" bx:origin=\"0 0\"/>\n            <rect width=\"5\" height=\"]]..KL..[[\" style=\"stroke: rgb(0, 0, 0); stroke-opacity: 0; fill: rgb(150, 150, 150);\" transform=\"matrix(-1, 0, 0, -1, 0, 0)\" x=\"-5\" y=\"-200\" bx:origin=\"0 0\"/>\n            <text style=\"white-space: pre; fill: #eee; font-family: Bank, sans-serif; font-size: 12px; paint-order: fill; stroke: #b80000; stroke-width: 3px; text-anchor: middle;\" x=\"1.4\" y=\"-2.6\" transform=\"matrix(1.1, 0, 0, 1, 1, 0)\">]]..VB..[[</text>\n            <text style=\"fill: rgb(200, 200, 200); font-family: Bank, sans-serif; font-size: 14px; paint-order: fill; stroke: rgb(0, 0, 0); stroke-width: 2px; white-space: pre;\" transform=\"matrix(0, -1, 1, 0, -102, 9.5)\" x=\"-100\" y=\"100\">Altitude</text>\n            <text style=\"fill: rgb(200, 200, 200); font-family: Bank, sans-serif; font-size: 10px; paint-order: fill; stroke: rgb(0, 0, 0); stroke-width: 1px; white-space: pre;\" x=\"6\" y=\"5.5\">]]..BN..[[</text>\n            </svg>\n        ]]}end\nfunction KE(PA)\nif W(PA)=='table'then local AS='{'\nif E.gA(PA)then\nfor SD,PA in ipairs(PA)do AS=AS..tR(PA)..','end else local SD={}\nfor DF,PA in pairs(PA)do E.W(SD,DF..'='..tR(PA))end\nAS=AS..E.E(SD,',')end\nAS=AS..'}'return AS else return tR(PA)end end\nfunction tR(PA)\nif PA==nil then return'nil'elseif W(PA)=='table'then return KE(PA)elseif W(PA)=='string'then return'\"'..PA:format(\"%q\")..'\"'elseif W(PA)=='number'then return PA elseif W(PA)=='boolean'then return\neE(PA,'true','false')end end\neR={}yR={}yR.hF='middle'\nfunction eR.gF(PA)local XC=''if PA.FD==false then return XC end\nif\nPA.fF==nil then PA.fF=3 end\nif PA.FS==nil then PA.FS=3 end\nif PA.KS==nil then PA.KS=1 end\nif PA.x==nil then PA.x=0 end\nif PA.y==nil then PA.y=0 end\nPA.dF=PA.x\nPA.sF=PA.y\nlocal KL=PA.dF+PA.KS\nlocal FG=PA.sF+PA.KS\nif PA.aF~=nil then PA.KP=PA.aF(PA)end\nlocal ZX='uiButton'if PA.zF then ZX=ZX..' disabled'end\nif PA.WS then\nZX=ZX..' '..PA.WS end\nlocal LZ='text-anchor: start;'if PA.xF==yR.hF then\nKL=PA.dF+PA.FS/2\nLZ='text-anchor: middle;'end\nlocal JK=''if PA.cF~=nil then JK=\n'font-size: '..PA.cF..'%; 'end\nlocal DF=eE(PA.vF==nil,'',rx(PA.bF))\nlocal SD='data-active=\"'..eE(PA.KP,'true','false')..'\"'\nlocal GH='data-hover=\"'..eE(PA.nF,'true','false')..'\"'local HJ={}\nif PA.mF~=nil then for CV,VB in pairs(PA.mF)do\nE.W(HJ,'data-'..CV..'=\"'..eE(VB,'true','false')..'\"')end end\nlocal AS=E.E(HJ,' ')\nXC=XC..'<g class=\"'..ZX..'\" '..SD..' '..GH..' '..AS..'>'\nXC=XC..'<rect'..DF..' x=\"'..(PA.dF)..'vh\" y=\"'..(PA.sF)..'vh\" width=\"'..(PA.FS)..'vh\" height=\"'..(PA.fF)..'vh\" />'if PA.nS~=nil then\nXC=XC..'<text style=\"'..JK..LZ..'\" x=\"'..(KL*0.54)..'%\" y=\"'..(FG)..'%\">'..(PA.nS)..'</text>'end\nif PA._F~=nil then\nXC=XC..'<svg x=\"'..(PA.dF)..'vh\" y=\"'..(PA.sF)..'vh\">'..(PA._F)..'</svg>'end\nXC=XC..'</g>\\n'return XC end\nfunction uR(PA)if PA==nil then PA={}end\nif PA.x==nil then PA.x=0 end\nif PA.y==nil then PA.y=0 end\nlocal AS=iR(PA.QG)local DF=BR(PA.WS)\nlocal SD='<text'..DF..''..AS..' x=\"'..(PA.x)..'%\" y=\"'..(PA.y)..'%\">'..(PA.nS)..'</text>'if PA.WG then DF=DF('outlined')\nSD=SD..'<text'..DF..''..AS..' x=\"'..(PA.x)..'%\" y=\"'..(PA.y)..'%\">'..(PA.nS)..'</text>'end\nreturn SD end\nfunction oR(PA)if PA.x==nil then PA.x=0 end\nif PA.y==nil then PA.y=0 end\nif PA.FS==nil then\nPA.FS=3 end\nif PA.fF==nil then PA.fF=3 end\nlocal AS=iR(PA.QG)\nlocal SD=BR(PA.WS)\nreturn'<rect'..SD..''..AS..' x=\"'..(PA.x)..'vh\" y=\"'..(PA.y)..'vh\" width=\"'..(PA.FS)..'vh\" height=\"'..(PA.fF)..'vh\" />'end\nfunction BR(PA)local AS={}if PA~=nil then\nif W(PA)=='table'then E.pA(AS,PA)elseif W(PA)=='string'then E.W(AS,PA)end end\nlocal PA=''if#AS>0 then PA=' class=\"'..(E.E(AS,' '))..'\"'end\nreturn PA end\nfunction iR(PA)local AS={}\nif PA~=nil then for SD,DF in pairs(PA)do local FG=DF\nif W(DF)=='boolean'then\nFG=eE(DF,'true','false')end\nE.W(AS,' data-'..SD..'=\"'..FG..'\"')end\nreturn E.E(AS,' ')else return''end end\nfunction rR(id,AS,PA)if PA==nil then PA=false end\nlocal SD=eE(PA,'x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\"','x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\"')\nlocal FG='<linearGradient id=\"'..id..'\"'..SD..'>'local DF=E.lP(AS)E.I(DF)\nfor GH,HJ in ipairs(DF)do local JK=HJ\nlocal KL=AS[HJ]\nif W(KL)=='table'then\nKL=AS[HJ][1]local LZ=AS[HJ][2]\nFG=FG..'<stop offset=\"'..JK..'%\" stop-color=\"'..KL..'\" stop-opacity=\"'..LZ..'\" />'else FG=FG..'<stop offset=\"'..JK..'%\" stop-color=\"'..KL..'\" />'end end\nFG=FG..'</linearGradient>'return FG end\nfunction rx(PA)if PA==nil then return''else\nreturn' rx=\"'..PA..'\" ry=\"'..PA..'\"'end end\npR={EG='Alpha',RG='Beta',TG='Release'}\nlR={YG=4,UG=2,IG=pR.RG}\nfunction nW()return lR.YG..'.'..lR.UG..' '..lR.IG end\nfunction kR()return lR.YG*1000+lR.UG end","filter":{"args":[],"signature":"onStart()","slotKey":"-3"},"key":"3"},{"code":"fQ()","filter":{"args":[],"signature":"onFlush()","slotKey":"-2"},"key":"1"},{"code":"mQ()","filter":{"args":[],"signature":"onUpdate()","slotKey":"-2"},"key":"2"},{"code":"\nj={OG=false,eR=0,dY=100000,pR=jR,TT=false,oD=false,ET=false,pD=false,iY=false,dR=false,FU=-10000000,DU=true,GU=false,aR=false,tR=false,NY=false,jT=false,rR=false,oR=false,XY=false,lR=false,kR=false,AU=0,PG=0,yR=2500,iR=nil,BU='none',gR='all',KY=false,ZY=false,LY=false,aY=false,WU=false,AG=0,SG=0,DG=0,YU=false,IU=10000000,PU=false,_Y=false,DY='standby',bR=true,vR='none',hR='none',jR=false,VT=false,QY=\nnil,CY=nil,WY=nil,EY=nil,RY=false,FG=0,oU=false,pU=false,rD=true,GG=tE,tU={0,0,0,0},yU={0,0,0,0},uU={0,0,0,0},iU={0,0,0,0},ND=false,BD=false,VD=false,wD=false,MD=false,qD=false,OU=false,KT=vec3()}","filter":{"args":[],"signature":"onStart()","slotKey":"-1"},"key":"1"},{"code":"onUnitStart(system, unit, construct, library, player)","filter":{"args":[],"signature":"onStart()","slotKey":"-1"},"key":"2"},{"code":"_W()","filter":{"args":[],"signature":"onStop()","slotKey":"-1"},"key":"3"},{"code":"rW()","filter":{"args":[{"value":"FUELUPDATE"}],"signature":"onTimer(timerId)","slotKey":"-1"},"key":"4"},{"code":"hR()","filter":{"args":[{"value":"RADARUPDATE"}],"signature":"onTimer(timerId)","slotKey":"-1"},"key":"5"},{"code":"yW()","filter":{"args":[{"value":"DEBUGHUD"}],"signature":"onTimer(timerId)","slotKey":"-1"},"key":"6"},{"code":"gR()","filter":{"args":[{"value":"APU"}],"signature":"onTimer(timerId)","slotKey":"-1"},"key":"7"},{"code":"onInput(text)","filter":{"args":[{"variable":"*"}],"signature":"onInputText(text)","slotKey":"-2"},"key":"3"},{"code":"y()","filter":{"args":[{"value":"leftmouse"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"4"},{"code":"t()","filter":{"args":[{"value":"leftmouse"}],"signature":"onActionStop(action)","slotKey":"-2"},"key":"5"},{"code":"q()","filter":{"args":[{"value":"lshift"}],"signature":"onActionStop(action)","slotKey":"-2"},"key":"6"},{"code":"w()","filter":{"args":[{"value":"lshift"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"7"},{"code":"e()","filter":{"args":[{"value":"lalt"}],"signature":"onActionStop(action)","slotKey":"-2"},"key":"8"},{"code":"r()","filter":{"args":[{"value":"lalt"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"9"},{"code":"u()","filter":{"args":[{"value":"option1"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"10"},{"code":"l()","filter":{"args":[{"value":"option2"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"11"},{"code":"g()","filter":{"args":[{"value":"option3"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"12"},{"code":"s()","filter":{"args":[{"value":"option4"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"13"},{"code":"a()","filter":{"args":[{"value":"option5"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"14"},{"code":"z()","filter":{"args":[{"value":"option6"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"15"},{"code":"b()","filter":{"args":[{"value":"option7"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"16"},{"code":"n()","filter":{"args":[{"value":"option8"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"17"},{"code":"m()","filter":{"args":[{"value":"option9"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"18"},{"code":"_()","filter":{"args":[{"value":"warp"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"19"},{"code":"QQ()","filter":{"args":[{"value":"antigravity"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"20"},{"code":"TQ()","filter":{"args":[{"value":"stopengines"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"21"},{"code":"YQ()","filter":{"args":[{"value":"stopengines"}],"signature":"onActionStop(action)","slotKey":"-2"},"key":"22"},{"code":"WQ()","filter":{"args":[{"value":"gear"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"23"},{"code":"EQ()","filter":{"args":[{"value":"booster"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"24"},{"code":"OQ()","filter":{"args":[{"value":"down"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"25"},{"code":"PQ()","filter":{"args":[{"value":"down"}],"signature":"onActionStop(action)","slotKey":"-2"},"key":"26"},{"code":"UQ()","filter":{"args":[{"value":"up"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"27"},{"code":"IQ()","filter":{"args":[{"value":"up"}],"signature":"onActionStop(action)","slotKey":"-2"},"key":"28"},{"code":"AQ()","filter":{"args":[{"value":"strafeleft"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"29"},{"code":"SQ()","filter":{"args":[{"value":"strafeleft"}],"signature":"onActionStop(action)","slotKey":"-2"},"key":"30"},{"code":"DQ()","filter":{"args":[{"value":"straferight"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"31"},{"code":"FQ()","filter":{"args":[{"value":"straferight"}],"signature":"onActionStop(action)","slotKey":"-2"},"key":"32"},{"code":"XQ()","filter":{"args":[{"value":"right"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"33"},{"code":"CQ()","filter":{"args":[{"value":"right"}],"signature":"onActionStop(action)","slotKey":"-2"},"key":"34"},{"code":"LQ()","filter":{"args":[{"value":"left"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"35"},{"code":"ZQ()","filter":{"args":[{"value":"left"}],"signature":"onActionStop(action)","slotKey":"-2"},"key":"36"},{"code":"JQ()","filter":{"args":[{"value":"backward"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"37"},{"code":"KQ()","filter":{"args":[{"value":"backward"}],"signature":"onActionStop(action)","slotKey":"-2"},"key":"38"},{"code":"GQ()","filter":{"args":[{"value":"forward"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"39"},{"code":"HQ()","filter":{"args":[{"value":"forward"}],"signature":"onActionStop(action)","slotKey":"-2"},"key":"40"},{"code":"NQ()","filter":{"args":[{"value":"yawright"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"41"},{"code":"MQ()","filter":{"args":[{"value":"yawright"}],"signature":"onActionStop(action)","slotKey":"-2"},"key":"42"},{"code":"VQ()","filter":{"args":[{"value":"yawleft"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"43"},{"code":"BQ()","filter":{"args":[{"value":"yawleft"}],"signature":"onActionStop(action)","slotKey":"-2"},"key":"44"},{"code":"RQ()","filter":{"args":[{"value":"light"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"45"},{"code":"qQ()","filter":{"args":[{"value":"groundaltitudedown"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"46"},{"code":"wQ()","filter":{"args":[{"value":"groundaltitudedown"}],"signature":"onActionLoop(action)","slotKey":"-2"},"key":"47"},{"code":"eQ()","filter":{"args":[{"value":"groundaltitudeup"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"48"},{"code":"rQ()","filter":{"args":[{"value":"groundaltitudeup"}],"signature":"onActionLoop(action)","slotKey":"-2"},"key":"49"},{"code":"tQ()","filter":{"args":[{"value":"speedup"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"50"},{"code":"yQ()","filter":{"args":[{"value":"speedup"}],"signature":"onActionLoop(action)","slotKey":"-2"},"key":"51"},{"code":"uQ()","filter":{"args":[{"value":"speeddown"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"52"},{"code":"iQ()","filter":{"args":[{"value":"speeddown"}],"signature":"onActionLoop(action)","slotKey":"-2"},"key":"53"},{"code":"oQ()","filter":{"args":[{"value":"brake"}],"signature":"onActionStart(action)","slotKey":"-2"},"key":"54"},{"code":"kQ()","filter":{"args":[{"value":"brake"}],"signature":"onActionStop(action)","slotKey":"-2"},"key":"55"},{"code":"lQ()","filter":{"args":[{"value":"brake"}],"signature":"onActionLoop(action)","slotKey":"-2"},"key":"56"}],"methods":[],"events":[]}